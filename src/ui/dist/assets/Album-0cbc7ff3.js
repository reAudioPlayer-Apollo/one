import{i as I,B as S,s as $,D as y,q as n,G as b,E as A,o,c as u,f as x,cg as B,d as g,g as d,L as N,a,h as j,N as C,t as w,P as E,F as k,j as L,c1 as P,cp as V,bV as M,m as U,n as q,_ as F}from"./index-e36e5ea8.js";import{P as H}from"./PlaylistEntry-e8ccb1dd.js";import"./EditSong.vue_vue_type_script_setup_true_lang-e9c30365.js";import"./playerInPicture-af203fdf.js";const R=c=>(U("data-v-fb038189"),c=c(),q(),c),z={key:1,class:"fill-page"},G={key:2,class:"artist p-4"},J={class:"wrap"},O={class:"artist__data"},K={class:"upper"},Q={class:"track__info__details flex flex-col justify-end"},T={class:"text-secondary my-0 text-2xl font-bold"},W={key:0,class:"text-muted text-base ml-4 font-light"},X={class:"trac__info__details__normal"},Y={class:"flex flew-row items-center"},Z={class:"font-black text-5xl"},ee=R(()=>a("hr",{class:"mb-4"},null,-1)),se={class:"items"},ae=I({__name:"Album",setup(c){const v=S();$();const D=y(()=>v.params.hash),s=n(null),i=n(null),r=n(null),_=n("url"),m=n(!1),f=async()=>{const e=await(await fetch(`/api/albums/${D.value}`)).json();if(e.spotify=e.spotify?JSON.parse(e.spotify):null,e.spotify)try{e.spotify.releaseDate=new Date(e.spotify.releaseDate)}catch{e.spotify.releaseDate=null}s.value=e,i.value=null,r.value="",m.value=!1,s.value.spotify.url.length&&(r.value=s.value.spotify.url,m.value=!0),_.value="link"};b(r,()=>{var t,e;if(((e=(t=s.value)==null?void 0:t.spotify)==null?void 0:e.id)==V(r.value,"album")){_.value="link";return}_.value="save"});const h=y(()=>{var t,e,l;return((l=(e=(t=s.value)==null?void 0:t.spotify)==null?void 0:e.releaseDate)==null?void 0:l.toLocaleDateString())??""});return A(f),b(()=>v.params.name,()=>{s.value=null,f()}),(t,e)=>(o(),u(k,null,[s.value?(o(),x(B,{key:0,src:s.value.image,class:"-z-10"},null,8,["src"])):g("",!0),s.value?(o(),u("div",G,[a("div",J,[a("div",O,[a("div",K,[d(j,{src:s.value.image,class:"max-w-sm rounded-xl",placeholder:"library_music",name:s.value.name},null,8,["src","name"]),a("div",Q,[a("h3",T,[d(C,{artist:s.value.artists.join(", "),class:"inline"},null,8,["artist"]),h.value?(o(),u("span",W,w(h.value),1)):g("",!0)]),a("div",X,[a("div",Y,[a("h1",Z,w(s.value.name),1)])])])]),d(E,{class:"hideIfMobile mt-8","with-album":"","with-more":""}),ee,a("div",se,[(o(!0),u(k,null,L(s.value.songs,l=>P((o(),x(H,{index:s.value.songs.findIndex(p=>p.source==l.source),selected:i.value==l.id,song:l,"playlist-id":"album","with-album":"","with-cover":"","with-more":"",album:s.value.id,onClick:p=>i.value==l.id?i.value=-1:i.value=l.id,onUpdate:e[0]||(e[0]=p=>t.$emit("update"))},null,8,["index","selected","song","album","onClick"])),[[M,!0]])),256))])])])])):(o(),u("div",z,[d(N)]))],64))}});const ne=F(ae,[["__scopeId","data-v-fb038189"]]);export{ne as default};
