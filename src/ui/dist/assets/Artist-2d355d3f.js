import{m as A,o as t,f as r,w as g,b as L,t as h,C as w,_ as B,y as H,n as m,bq as N,aG as P,c as o,bH as j,d as n,g as f,a,h as V,ay as E,F as _,i as x,u as q,bI as M,bG as R,bN as z,k as D,l as G,L as W,bw as Y,q as J,bM as K,bn as O}from"./index-ccfdb71e.js";import{F as U}from"./FactCard-59f36e64.js";import{P as Q}from"./PlaylistHeader-a3444332.js";import{P as X}from"./PlaylistEntry-d628043e.js";import{E as Z}from"./ExternalEntry-8d587594.js";import{s as ee}from"./spotify-99ae1734.js";import"./EditSong.vue_vue_type_script_setup_true_lang-83246bcd.js";import"./Form-ed5b8042.js";import"./IconButton-69cff88c.js";import"./Dropdown-65d1e821.js";import"./song-c81a530a.js";import"./playerInPicture-af203fdf.js";const te=A({__name:"Tag",props:{tag:{type:String,required:!0},withHash:{type:Boolean,default:!1}},setup(u){return(b,C)=>(t(),r(w,{class:"tag px-4 py-2 cursor-pointer","with-hover":""},{default:g(()=>[L(h(u.withHash?"#":"")+h(u.tag),1)]),_:1}))}});const ae=B(te,[["__scopeId","data-v-2712639d"]]),k=u=>(D("data-v-34bada81"),u=u(),G(),u),se={key:1,class:"fill-page"},le={key:2,class:"artist p-4"},oe={class:"wrap"},re={class:"artist__data"},ne={class:"upper"},ie={class:"trac__info__details__normal"},ue={key:0,class:"mt-0 mb-2 flex flex-row gap-2"},de={class:"flex flew-row items-center"},ce={class:"font-black text-5xl ml-4"},_e={class:"features flex flex-row gap-4 mt-4 overflow-x-auto"},pe={class:"spotify-infos pt-4 pb-2"},ve={class:"meta items-center"},me={key:0,class:"flex flex-row align-items"},fe=k(()=>a("span",{class:"material-symbols-rounded ms-fill mr-2"},"local_fire_department",-1)),he={class:"font-bold"},ye=k(()=>a("hr",{class:"mb-4"},null,-1)),xe={class:"items"},ge={key:0,class:"spotify-suggestions mt-4"},we=k(()=>a("h2",null,"Top Tracks",-1)),ke={class:"items"},be=k(()=>a("h2",null,"Related Artists",-1)),Ce={class:"flex flex-row items-center gap-4"},Ie={class:"flex flex-col"},$e={class:"font-bold"},Te=A({__name:"Artist",setup(u){const b=R();J();const C=H(()=>b.params.name),e=m(null),p=m(null),d=m(null),y=m("url"),v=m(!1),I=async()=>{var l;const i=await fetch(`/api/artists/${C.value}`);e.value=await i.json(),p.value=null,d.value="https://open.spotify.com/artist/"+e.value.metadata.id,v.value=((l=e.value.metadata.id)==null?void 0:l.length)==22,y.value="link"};N(d,()=>{var i,l;if(((l=(i=e.value)==null?void 0:i.metadata)==null?void 0:l.id)==K(d.value,"artist")){y.value="link";return}y.value="save"});const F=()=>{z(d.value)};return P(I),N(()=>b.params.name,()=>{e.value=null,I()}),(i,l)=>{var $,T,S;return t(),o(_,null,[e.value?(t(),r(j,{key:0,src:e.value.cover,class:"-z-10"},null,8,["src"])):n("",!0),e.value?(t(),o("div",le,[a("div",oe,[a("div",re,[a("div",ne,[f(V,{src:e.value.cover,class:"max-w-sm rounded-xl",placeholder:"person"},null,8,["src"]),a("div",{class:E([{"justify-end":e.value.metadata,"justify-center":!e.value.metadata},"track__info__details flex flex-col"])},[a("div",ie,[($=e.value.metadata)!=null&&$.genres?(t(),o("div",ue,[(t(!0),o(_,null,x(e.value.metadata.genres,s=>(t(),r(ae,{tag:s,"with-hash":""},null,8,["tag"]))),256))])):n("",!0),a("div",de,[a("h1",ce,h(e.value.name),1)])]),e.value.metadata?(t(),o(_,{key:0},[a("div",_e,[e.value.metadata.followers?(t(),r(U,{key:0,"primary-text":e.value.metadata.followers.toLocaleString(),class:"w-full","secondary-text":"Followers"},null,8,["primary-text"])):n("",!0),e.value.songs.length?(t(),r(U,{key:1,"primary-text":e.value.songs.length,class:"w-full","secondary-text":"Tracks in Your Library"},null,8,["primary-text"])):n("",!0)]),a("div",pe,[a("div",ve,[e.value.metadata.popularity?(t(),o("span",me,[fe,a("span",he,h(e.value.metadata.popularity),1)])):n("",!0)]),f(q(ee),{class:E([{enabled:v.value},"spotify-enable"]),onClick:l[0]||(l[0]=s=>v.value=!v.value)},null,8,["class"]),v.value?(t(),r(M,{key:0,modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=s=>d.value=s),icon:y.value,onClick:F},null,8,["modelValue","icon"])):n("",!0)])],64)):n("",!0)],2)]),f(Q,{class:"hideIfMobile mt-8","with-album":"","with-more":""}),ye,a("div",xe,[(t(!0),o(_,null,x(e.value.songs,s=>Y((t(),r(X,{index:e.value.songs.findIndex(c=>c.source==s.source),selected:p.value==s.id,song:s,"playlist-id":"track","with-album":"","with-cover":"","with-more":"",onClick:c=>p.value==s.id?p.value=-1:p.value=s.id,onUpdate:l[2]||(l[2]=c=>i.$emit("update"))},null,8,["index","selected","song","onClick"])),[[O,!0]])),256))]),e.value.metadata?(t(),o("div",ge,[(T=e.value.metadata.topTracks)!=null&&T.length?(t(),r(w,{key:0,class:"p-4"},{default:g(()=>[we,a("div",ke,[(t(!0),o(_,null,x(e.value.metadata.topTracks,(s,c)=>(t(),r(Z,{index:c,song:s,"can-import":"","cannot-add":"","with-album":"","with-cover":"","with-more":"",onUpdate:l[3]||(l[3]=Se=>i.$emit("update"))},null,8,["index","song"]))),256))])]),_:1})):n("",!0),(S=e.value.metadata.related)!=null&&S.length?(t(),r(w,{key:1,class:"p-4 flex flex-col gap-2 related overflow-y-auto"},{default:g(()=>[be,(t(!0),o(_,null,x(e.value.metadata.related,s=>(t(),r(w,{class:"cursor-pointer px-4 py-2","with-hover":"",onClick:c=>i.$router.push(`/artist/${s.name}`)},{default:g(()=>[a("div",Ce,[f(V,{src:s.cover,class:"w-8 h-8 rounded-xl",placeholder:"person"},null,8,["src"]),a("div",Ie,[a("h3",$e,h(s.name),1)])])]),_:2},1032,["onClick"]))),256))]),_:1})):n("",!0)])):n("",!0)])])])):(t(),o("div",se,[f(W)]))],64)}}});const Me=B(Te,[["__scopeId","data-v-34bada81"]]);export{Me as default};
