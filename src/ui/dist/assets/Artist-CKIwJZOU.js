import{e as L,o as a,i as r,w as x,b as j,t as m,C as g,_ as P,B as q,q as A,D,n as h,E as U,y as R,c as o,a8 as z,d as i,g as y,L as M,a as t,H as V,Q as B,F as v,h as w,u as J,$ as O,P as Q,a3 as W,am as Y,aq as E,ar as G,ah as K,l as X,m as Z}from"./index-K4QaY0Na.js";import{F}from"./FactCard-BZwd6pEI.js";import{P as ee}from"./PlaylistEntry-9wUfG8hQ.js";import{s as ae}from"./spotify-DDsJS6kd.js";import"./EditSong.vue_vue_type_script_setup_true_lang-wWkOSMWV.js";import"./playerInPicture-Dfp9IAsf.js";const te=L({__name:"Tag",props:{tag:{type:String,required:!0},withHash:{type:Boolean,default:!1}},setup(c){return(b,$)=>(a(),r(g,{class:"tag px-4 py-2 cursor-pointer","with-hover":""},{default:x(()=>[j(m(c.withHash?"#":"")+m(c.tag),1)]),_:1}))}}),se=P(te,[["__scopeId","data-v-2712639d"]]),k=c=>(X("data-v-13b2922c"),c=c(),Z(),c),le={key:1,class:"fill-page"},oe={key:2,class:"artist p-4"},re={class:"wrap"},ne={class:"artist__data"},ie={class:"upper"},ue={class:"trac__info__details__normal"},de={key:0,class:"mt-0 mb-2 flex flex-row gap-2"},ce={class:"flex flew-row items-center"},pe={class:"font-black text-5xl ml-4"},ve={class:"features flex flex-row gap-4 mt-4 overflow-x-auto"},me={class:"spotify-infos pt-4 pb-2"},_e={class:"meta items-center"},fe={key:0,class:"flex flex-row align-items"},he=k(()=>t("span",{class:"material-symbols-rounded ms-fill mr-2"},"local_fire_department",-1)),ye={class:"font-bold"},we=k(()=>t("hr",{class:"mb-4"},null,-1)),xe={class:"items"},ge={key:0,class:"spotify-suggestions mt-4"},ke=k(()=>t("h2",null,"Top Tracks",-1)),be={class:"items"},$e=k(()=>t("h2",null,"Related Artists",-1)),Ce={class:"flex flex-row items-center gap-4"},Ie={class:"flex flex-col"},Se={class:"font-bold"},Te=L({__name:"Artist",setup(c){const b=q();A();const $=D(()=>b.params.name),e=h(null),_=h(null),u=h(null),f=h("url"),d=h(!1),C=async()=>{const n=await fetch(`/api/artists/${$.value}`);e.value=await n.json(),_.value=null,u.value="",d.value=!1,e.value.metadata.id.length==22&&(u.value="https://open.spotify.com/artist/"+e.value.metadata.id,d.value=!0),f.value="link"},I=async n=>{await fetch(`/api/artists/${$.value}`,{method:"PUT",body:JSON.stringify({spotifyId:n})}),e.value=null,await C()};U(u,()=>{var n,l;if(((l=(n=e.value)==null?void 0:n.metadata)==null?void 0:l.id)==E(u.value,"artist")){f.value="link";return}f.value="save"});const H=()=>{if(f.value=="link"){G(u.value);return}I(E(u.value,"artist"))};return R(C),U(()=>b.params.name,()=>{e.value=null,C()}),(n,l)=>{var S,T,N;return a(),o(v,null,[e.value?(a(),r(z,{key:0,src:e.value.cover,class:"-z-10"},null,8,["src"])):i("",!0),e.value?(a(),o("div",oe,[t("div",re,[t("div",ne,[t("div",ie,[y(V,{src:e.value.cover,class:"max-w-sm rounded-xl",placeholder:"person"},null,8,["src"]),t("div",{class:B([{"justify-end":e.value.metadata,"justify-center":!e.value.metadata},"track__info__details flex flex-col"])},[t("div",ue,[(S=e.value.metadata)!=null&&S.genres?(a(),o("div",de,[(a(!0),o(v,null,w(e.value.metadata.genres,s=>(a(),r(se,{tag:s,"with-hash":""},null,8,["tag"]))),256))])):i("",!0),t("div",ce,[t("h1",pe,m(e.value.name),1)])]),e.value.metadata?(a(),o(v,{key:0},[t("div",ve,[e.value.metadata.followers?(a(),r(F,{key:0,"primary-text":e.value.metadata.followers.toLocaleString(),class:"w-full","secondary-text":"Followers"},null,8,["primary-text"])):i("",!0),e.value.songs.length?(a(),r(F,{key:1,"primary-text":e.value.songs.length,class:"w-full","secondary-text":"Tracks in Your Library"},null,8,["primary-text"])):i("",!0)]),t("div",me,[t("div",_e,[e.value.metadata.popularity?(a(),o("span",fe,[he,t("span",ye,m(e.value.metadata.popularity),1)])):i("",!0)]),y(J(ae),{class:B([{enabled:d.value},"spotify-enable"]),onClick:l[0]||(l[0]=s=>d.value=!d.value)},null,8,["class"]),d.value?(a(),r(O,{key:0,modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=s=>u.value=s),icon:f.value,onClick:H},null,8,["modelValue","icon"])):i("",!0),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:l[2]||(l[2]=s=>d.value?I(!1):I(!0))},m(d.value?"delete":"search"),1)])],64)):i("",!0)],2)]),y(Q,{class:"hideIfMobile mt-8","with-album":"","with-more":""}),we,t("div",xe,[(a(!0),o(v,null,w(e.value.songs,s=>W((a(),r(ee,{index:e.value.songs.findIndex(p=>p.source==s.source),selected:_.value==s.id,song:s,"playlist-id":"artist","with-album":"","with-cover":"","with-more":"",artist:e.value.name,onClick:p=>_.value==s.id?_.value=-1:_.value=s.id,onUpdate:l[3]||(l[3]=p=>n.$emit("update"))},null,8,["index","selected","song","artist","onClick"])),[[K,!0]])),256))]),e.value.metadata?(a(),o("div",ge,[(T=e.value.metadata.topTracks)!=null&&T.length?(a(),r(g,{key:0,class:"p-4"},{default:x(()=>[ke,t("div",be,[(a(!0),o(v,null,w(e.value.metadata.topTracks,(s,p)=>(a(),r(Y,{index:p,song:s,"can-import":"","cannot-add":"","with-album":"","with-cover":"","with-more":"",onUpdate:l[4]||(l[4]=Ne=>n.$emit("update"))},null,8,["index","song"]))),256))])]),_:1})):i("",!0),(N=e.value.metadata.related)!=null&&N.length?(a(),r(g,{key:1,class:"p-4 flex flex-col gap-2 related overflow-y-auto"},{default:x(()=>[$e,(a(!0),o(v,null,w(e.value.metadata.related,s=>(a(),r(g,{class:"cursor-pointer px-4 py-2","with-hover":"",onClick:p=>n.$router.push(`/artist/${s.name}`)},{default:x(()=>[t("div",Ce,[y(V,{src:s.cover,class:"w-8 h-8 rounded-xl",placeholder:"person"},null,8,["src"]),t("div",Ie,[t("h3",Se,m(s.name),1)])])]),_:2},1032,["onClick"]))),256))]),_:1})):i("",!0)])):i("",!0)])])])):(a(),o("div",le,[y(M)]))],64)}}}),Pe=P(Te,[["__scopeId","data-v-13b2922c"]]);export{Pe as default};
