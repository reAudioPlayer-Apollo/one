import{e as F,o as a,i as r,w,b as A,t as p,C as x,_ as L,z as j,m as z,A as H,l as _,B as N,v as R,c as o,a6 as D,d as i,g as y,L as M,a as s,E as U,K as V,F as v,h,u as Y,Y as q,P as J,a1 as K,ap as O,ao as W,an as B,af as G}from"./index-DVF5DQef.js";import{F as E}from"./FactCard-DQAQoYAT.js";import{P as Q}from"./PlaylistEntry-JzfVdyQo.js";import{s as X}from"./spotify-ESdFeDlR.js";import"./EditSong.vue_vue_type_script_setup_true_lang-JBSZw6dU.js";import"./playerInPicture-Dfp9IAsf.js";const Z=F({__name:"Tag",props:{tag:{type:String,required:!0},withHash:{type:Boolean,default:!1}},setup(g){return(k,b)=>(a(),r(x,{class:"tag px-4 py-2 cursor-pointer","with-hover":""},{default:w(()=>[A(p(g.withHash?"#":"")+p(g.tag),1)]),_:1}))}}),ee=L(Z,[["__scopeId","data-v-2712639d"]]),ae={key:1,class:"fill-page"},te={key:2,class:"artist p-4"},se={class:"wrap"},le={class:"artist__data"},oe={class:"upper"},re={class:"trac__info__details__normal"},ne={key:0,class:"mt-0 mb-2 flex flex-row gap-2"},ie={class:"flex flew-row items-center"},ue={class:"font-black text-5xl ml-4"},de={class:"features flex flex-row gap-4 mt-4 overflow-x-auto"},ce={class:"spotify-infos pt-4 pb-2"},ve={class:"meta items-center"},pe={key:0,class:"flex flex-row align-items"},me={class:"font-bold"},fe={class:"items"},_e={key:0,class:"spotify-suggestions mt-4"},ye={class:"items"},he={class:"flex flex-row items-center gap-4"},we={class:"flex flex-col"},xe={class:"font-bold"},ge=F({__name:"Artist",setup(g){const k=j();z();const b=H(()=>k.params.name),e=_(null),m=_(null),u=_(null),f=_("url"),d=_(!1),C=async()=>{const n=await fetch(`/api/artists/${b.value}`);e.value=await n.json(),m.value=null,u.value="",d.value=!1,e.value.metadata.id.length==22&&(u.value="https://open.spotify.com/artist/"+e.value.metadata.id,d.value=!0),f.value="link"},$=async n=>{await fetch(`/api/artists/${b.value}`,{method:"PUT",body:JSON.stringify({spotifyId:n})}),e.value=null,await C()};N(u,()=>{var n,t;if(((t=(n=e.value)==null?void 0:n.metadata)==null?void 0:t.id)==B(u.value,"artist")){f.value="link";return}f.value="save"});const P=()=>{if(f.value=="link"){W(u.value);return}$(B(u.value,"artist"))};return R(C),N(()=>k.params.name,()=>{e.value=null,C()}),(n,t)=>{var I,T,S;return a(),o(v,null,[e.value?(a(),r(D,{key:0,src:e.value.cover,class:"-z-10"},null,8,["src"])):i("",!0),e.value?(a(),o("div",te,[s("div",se,[s("div",le,[s("div",oe,[y(U,{src:e.value.cover,class:"max-w-sm rounded-xl",placeholder:"person"},null,8,["src"]),s("div",{class:V([{"justify-end":e.value.metadata,"justify-center":!e.value.metadata},"track__info__details flex flex-col"])},[s("div",re,[(I=e.value.metadata)!=null&&I.genres?(a(),o("div",ne,[(a(!0),o(v,null,h(e.value.metadata.genres,l=>(a(),r(ee,{tag:l,"with-hash":""},null,8,["tag"]))),256))])):i("",!0),s("div",ie,[s("h1",ue,p(e.value.name),1)])]),e.value.metadata?(a(),o(v,{key:0},[s("div",de,[e.value.metadata.followers?(a(),r(E,{key:0,"primary-text":e.value.metadata.followers.toLocaleString(),class:"w-full","secondary-text":"Followers"},null,8,["primary-text"])):i("",!0),e.value.songs.length?(a(),r(E,{key:1,"primary-text":e.value.songs.length,class:"w-full","secondary-text":"Tracks in Your Library"},null,8,["primary-text"])):i("",!0)]),s("div",ce,[s("div",ve,[e.value.metadata.popularity?(a(),o("span",pe,[t[5]||(t[5]=s("span",{class:"material-symbols-rounded ms-fill mr-2"},"local_fire_department",-1)),s("span",me,p(e.value.metadata.popularity),1)])):i("",!0)]),y(Y(X),{class:V([{enabled:d.value},"spotify-enable"]),onClick:t[0]||(t[0]=l=>d.value=!d.value)},null,8,["class"]),d.value?(a(),r(q,{key:0,modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=l=>u.value=l),icon:f.value,onClick:P},null,8,["modelValue","icon"])):i("",!0),s("span",{class:"material-symbols-rounded cursor-pointer",onClick:t[2]||(t[2]=l=>d.value?$(!1):$(!0))},p(d.value?"delete":"search"),1)])],64)):i("",!0)],2)]),y(J,{class:"hideIfMobile mt-8","with-album":"","with-more":""}),t[8]||(t[8]=s("hr",{class:"mb-4"},null,-1)),s("div",fe,[(a(!0),o(v,null,h(e.value.songs,l=>K((a(),r(Q,{index:e.value.songs.findIndex(c=>c.source==l.source),selected:m.value==l.id,song:l,"playlist-id":"artist","with-album":"","with-cover":"","with-more":"",artist:e.value.name,onClick:c=>m.value==l.id?m.value=-1:m.value=l.id,onUpdate:t[3]||(t[3]=c=>n.$emit("update"))},null,8,["index","selected","song","artist","onClick"])),[[G,!0]])),256))]),e.value.metadata?(a(),o("div",_e,[(T=e.value.metadata.topTracks)!=null&&T.length?(a(),r(x,{key:0,class:"p-4"},{default:w(()=>[t[6]||(t[6]=s("h2",null,"Top Tracks",-1)),s("div",ye,[(a(!0),o(v,null,h(e.value.metadata.topTracks,(l,c)=>(a(),r(O,{index:c,song:l,"can-import":"","cannot-add":"","with-album":"","with-cover":"","with-more":"",onUpdate:t[4]||(t[4]=ke=>n.$emit("update"))},null,8,["index","song"]))),256))])]),_:1})):i("",!0),(S=e.value.metadata.related)!=null&&S.length?(a(),r(x,{key:1,class:"p-4 flex flex-col gap-2 related overflow-y-auto"},{default:w(()=>[t[7]||(t[7]=s("h2",null,"Related Artists",-1)),(a(!0),o(v,null,h(e.value.metadata.related,l=>(a(),r(x,{class:"cursor-pointer px-4 py-2","with-hover":"",onClick:c=>n.$router.push(`/artist/${l.name}`)},{default:w(()=>[s("div",he,[y(U,{src:l.cover,class:"w-8 h-8 rounded-xl",placeholder:"person"},null,8,["src"]),s("div",we,[s("h3",xe,p(l.name),1)])])]),_:2},1032,["onClick"]))),256))]),_:1})):i("",!0)])):i("",!0)])])])):(a(),o("div",ae,[y(M)]))],64)}}}),Ne=L(ge,[["__scopeId","data-v-13b2922c"]]);export{Ne as default};
