import{F as m}from"./FullShelf-ee955822.js";import{_ as C,C as k,e as p,o as s,f as _,w as u,g as c,a as l,t as w,c as d,J as h,d as B,i as S,q as g,E as b,F as v,j as y}from"./index-9ce0501a.js";import{C as A}from"./CollectionHeader-65e61737.js";import{C as I}from"./CardWithImageAndText-6d2d3cec.js";const x={components:{Card:k},name:"ArtistItem",methods:{follow(r){r.stopPropagation();const e=this.following?"DELETE":"POST";fetch("/api/spotify/following",{method:e,body:JSON.stringify({artistId:this.id})}).then(o=>{o.status==200&&(this.following=!this.following)})}},data(){return{following:this.initiallyFollowing}},props:{cover:String,name:String,description:String,id:String,initiallyFollowing:Boolean,showFollowButton:Boolean}},T={class:"item"},E=["src"],L=["innerHTML"];function M(r,e,o,n,a,t){const i=p("add-artist-to-playlist"),F=p("Card");return s(),_(F,{class:"wrapper","with-hover":"",onClick:e[1]||(e[1]=h(f=>r.$router.push("/artist/"+o.name),["stop"]))},{default:u(()=>[c(i,{ref:"import",artist:{id:o.id,name:o.name,href:`https://open.spotify.com/artist/${o.id}`,image:o.cover}},null,8,["artist"]),l("div",T,[l("img",{src:o.cover},null,8,E),l("h4",null,w(o.name),1),l("p",{innerHTML:o.description},null,8,L),o.showFollowButton?(s(),d("button",{key:0,class:"followButton",onClick:e[0]||(e[0]=h((...f)=>t.follow&&t.follow(...f),["stop"]))},w(a.following?"unfollow":"Follow"),1)):B("",!0)])]),_:1})}const N=C(x,[["render",M],["__scopeId","data-v-353b4692"]]),j={class:"padding-20"},H={class:"artists"},V=S({__name:"Artists",setup(r){const e=g([]),o=g([]);return b(async()=>{let n=await fetch("/api/spotify/artists"),a=await n.json();e.value=a.sort((t,i)=>t.name.localeCompare(i.name)),n=await fetch("/api/artists"),a=await n.json(),o.value=a.sort((t,i)=>t.name.localeCompare(i.name))}),(n,a)=>(s(),d("div",j,[c(A),l("div",H,[c(m,{heading:"In your library"},{default:u(()=>[(s(!0),d(v,null,y(o.value,t=>(s(),_(I,{title:t.name,cover:t.image,onClick:i=>n.$router.push(`/artist/${t.name}`),imageType:"artist"},null,8,["title","cover","onClick"]))),256))]),_:1}),c(m,{heading:"Following on Spotify"},{default:u(()=>[(s(!0),d(v,null,y(e.value,(t,i)=>(s(),_(N,{id:t.id,key:i,cover:t.cover,description:t.description,name:t.name,"initially-following":"","show-follow-button":""},null,8,["id","cover","description","name"]))),128))]),_:1})])]))}});const q=C(V,[["__scopeId","data-v-2b99d27f"]]);export{q as default};
