import{_ as g,s as f,o as l,c as a,a as e,k as c,n,g as _,F as h,i as v,f as P,d as k,t as p,e as d,p as x,h as S}from"./index.644d6423.js";import{L as b}from"./LightPlaylistEntry.095b08ab.js";import{S as B}from"./SpotifyPlaylistHeader.045ace2c.js";import"./EditSong.78fef466.js";import"./FindSources.19ea5ddc.js";const w={components:{LightPlaylistEntry:b,SpotifyPlaylistHeader:B},name:"BigPlayer",computed:{...f({currentSongName:s=>s.player.song.title,playing:s=>s.player.playing,cover:s=>s.player.song.cover,songId:s=>s.player.song.id})},methods:{toggleMaximise(){this.maximised=!this.maximised,this.$emit("maximise",this.maximised)},fetchPlaylist(){fetch("/api/me/player/current-playlist").then(s=>s.json()).then(s=>this.playlist=s)}},mounted(){window.setTimeout(()=>{var i;if(this.$refs.playlistScroll.scrollTop)return;const s=(i=document.getElementById(`bplayer-entry-${this.songId}`))==null?void 0:i.offsetTop;s>=354&&(this.$refs.playlistScroll.scrollTop=s-354)},1e3)},data(){return this.fetchPlaylist(),{playlist:[],maximised:!1,noPlaylist:!1,animate:!1}}},I=s=>(x("data-v-23e99259"),s=s(),S(),s),C={class:"bigPlayer"},N={class:"upNow"},T=["src"],D=I(()=>e("div",{class:"block",style:{"animation-delay":"0s"}},null,-1)),E={key:0,class:"playlistOverflow drop-shadow-2xl"},L={class:"playlist",ref:"playlistScroll"},M={class:"settings"};function V(s,i,q,z,t,r){const y=d("spotify-playlist-header"),m=d("light-playlist-entry");return l(),a("div",C,[e("div",N,[e("img",{src:s.cover,class:c([{playing:s.playing,animate:t.animate},"drop-shadow-2xl"])},null,10,T),e("div",{class:c(["blocks",{playing:s.playing,animate:t.animate}])},[D,e("div",{class:"block",style:n({"animation-delay":".25s"})},null,4),e("div",{class:"block",style:n({"animation-delay":".5s"})},null,4)],2)]),t.noPlaylist?k("",!0):(l(),a("div",E,[e("div",L,[_(y),(l(!0),a(h,null,v(t.playlist.songs,o=>(l(),P(m,{key:o.source,onDownload:s.download,onRequestUpdate:s.updatePlaylist,index:t.playlist.songs.findIndex(u=>u.source==o.source),source:o.source,playing:o.title==s.currentSongName,id:o.id,title:o.title,album:o.album,artist:o.artist,cover:o.cover,favourite:o.favourite,duration:o.duration},null,8,["onDownload","onRequestUpdate","index","source","playing","id","title","album","artist","cover","favourite","duration"]))),128))],512)])),e("div",M,[e("span",{onClick:i[0]||(i[0]=(...o)=>r.toggleMaximise&&r.toggleMaximise(...o)),class:"iconButton material-symbols-rounded"},p(t.maximised?"fullscreen_exit":"fullscreen"),1),e("span",{onClick:i[1]||(i[1]=()=>t.noPlaylist=!t.noPlaylist),class:"iconButton material-symbols-rounded",style:n({transform:`rotate(${t.noPlaylist?0:180}deg)`})},"menu_open",4),e("span",{onClick:i[2]||(i[2]=()=>t.animate=!t.animate),class:"iconButton material-symbols-rounded"},p(t.animate?"motion_photos_off":"animation"),1)])])}const O=g(w,[["render",V],["__scopeId","data-v-23e99259"]]);export{O as default};
