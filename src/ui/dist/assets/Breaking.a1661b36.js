import{F as v,G as k}from"./FixedPlaylistHeader.131dd058.js";import{P as b}from"./PlaylistEntry.bdb5f8fe.js";import{_ as w,s as x,o,c as r,g as c,k as P,m as S,w as H,b as N,a,t as u,F as C,i as I,f as B,e as d,l as D,p as T,h as V}from"./index.fc9bdca8.js";import"./SongCtx.56eb284a.js";import"./EditSong.2e047ad9.js";import"./FindSources.26858312.js";const E={components:{PlaylistEntry:b,FixedPlaylistHeader:v,GridHeader:k},data(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:"N/A"}},computed:x("player",{currentSong:e=>e.song.id}),watch:{currentSong(){this.updateIsPlaying()}},methods:{download(e){var n;const l=(n=this.playlist)==null?void 0:n[e];window.open(`/api/tracks/${l.id}/download`)},updateIsPlaying(){console.log("Updating is playing",this.currentSong),this.playlist.forEach(e=>{e.playing=e.id==this.currentSong})},headerVisibilityChanged(e){this.fixedHeaderHidden=e},updateTracks(){fetch("/api/me/new").then(e=>e.json()).then(e=>{this.playlist=e.songs,this.playlistName=e.name,this.updateIsPlaying()})},loadPlaylist(){fetch("/api/player/load",{method:"POST",body:JSON.stringify({type:"collection/breaking"})})}}},_=e=>(T("data-v-8e52cdbd"),e=e(),V(),e),F={class:"playlist"},U={class:"padding-20"},q=_(()=>a("hr",null,null,-1)),G={class:"padding-20"},O={class:"grid"},R=_(()=>a("hr",null,null,-1)),j={class:"playlistEntries"};function z(e,l,n,A,s,i){const y=d("fixed-playlist-header"),h=d("h7"),g=d("grid-header"),f=d("playlist-entry"),m=D("observe-visibility");return o(),r("div",F,[c(y,{onClick:i.loadPlaylist,ref:"fixedHeading",class:P({hidden:s.fixedHeaderHidden}),title:s.playlistName},null,8,["onClick","class","title"]),S((o(),r("div",U,[c(h,null,{default:H(()=>[N("Playlist")]),_:1}),a("h1",null,u(s.playlistName),1),a("h5",null,"Your "+u(s.playlist.length)+" newest tracks, auto-generated just for you",1)])),[[m,i.headerVisibilityChanged]]),q,a("div",G,[a("span",{id:"loadPlaylist",onClick:l[0]||(l[0]=(...t)=>i.loadPlaylist&&i.loadPlaylist(...t)),class:"material-icons-outlined"},"play_circle_filled"),a("div",O,[c(g),R,a("div",j,[(o(!0),r(C,null,I(s.playlist,(t,p)=>(o(),B(f,{key:p,index:p,source:t.source,id:t.id,title:t.title,playing:t.playing,album:t.album,artist:t.artist,cover:t.cover,favourite:t.favourite,duration:t.duration,onDownload:i.download,onRequestUpdate:i.updateTracks},null,8,["index","source","id","title","playing","album","artist","cover","favourite","duration","onDownload","onRequestUpdate"]))),128))])])])])}const W=w(E,[["render",z],["__scopeId","data-v-8e52cdbd"]]);export{W as default};
