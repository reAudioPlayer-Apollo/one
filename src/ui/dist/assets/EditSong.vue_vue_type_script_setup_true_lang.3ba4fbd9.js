import{F as v,T as y,u as f}from"./song.6b14bab3.js";import{m as w,q as p,o as b,f as h,w as x,g as _}from"./index.2f8d843b.js";const C=w({__name:"EditSong",props:{song:{type:Object,required:!0}},setup(c,{expose:i}){const t=c,n=async(o,e)=>{const a=new FormData,l="."+e.name.split(".").pop();var d=e.slice(0,e.size,e.type),g=new File([d],t.song.id+l,{type:e.type});return a.append("file",g),await(await fetch(o,{method:"POST",body:a})).text()},u=[{name:"src",type:"upload",accept:"audio/mp3",required:!0,onUpload:o=>{n("/api/config/tracks",o).then(e=>t.song.src=e)},value:t.song.src},{name:"title",type:"text",required:!0,value:t.song.title},{name:"artist",type:"text",required:!0,value:t.song.artist},{name:"album",type:"text",value:t.song.album},{name:"cover",type:"upload",accept:"image/*",imagePreview:!0,value:t.song.cover,onUpload:o=>{n("/api/config/images",o).then(e=>t.song.cover=e)}}],m=async()=>{await f({...t.song,...r.value.toObject()})},s=p(null),r=p(null);return i({show:()=>{s.value.show()}}),(o,e)=>(b(),h(y,{ref_key:"modal",ref:s,name:"Edit Song",submitName:"Save",onSubmit:m,onClose:e[0]||(e[0]=a=>o.$emit("close"))},{default:x(()=>[_(v,{ref_key:"form",ref:r,options:u},null,512)]),_:1},512))}});export{C as _};
