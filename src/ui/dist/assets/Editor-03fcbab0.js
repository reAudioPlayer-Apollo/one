import{I as p}from"./IconButton-4d0597f4.js";import{n as g,A as x,j as D,q as v,D as I,O as P,P as E,Q as U,R as A,c as i,a as l,g as s,K as B,t as _,T as f,F as y,i as b,S as $,o as n,w as F,C as O,U as R,_ as T}from"./index-65db2c2c.js";import{_ as L}from"./Playlist.vue_vue_type_script_setup_true_lang-48a72acb.js";import"./PlaylistEntry-e002ad41.js";import"./EditSong.vue_vue_type_script_setup_true_lang-8ac27373.js";import"./Template-a1dab28f.js";import"./Form-bbb0f63a.js";import"./Dropdown-62bf446a.js";import"./playerInPicture-af203fdf.js";import"./PlaylistHeader-9a7963bc.js";const N={class:"playlist-editor"},j={class:"editor"},q={class:"sort my-2"},K={class:"filters"},M={class:"uppercase mt-0"},Q={class:"items"},W={class:"item"},z=["onClick"],G={class:"preview"},H=g({__name:"Editor",setup(J){const h=$(),u=x(()=>h.params.id),w=D(),t=v({name:"",description:"",direction:"asc",sort:"id",filter:{title:[],artist:[],album:[],duration:{}}}),d=v();I([()=>t.value.sort,()=>t.value.filter,()=>t.value.direction],P.debounce(async()=>{d.value=await E(t.value)},3*1e3),{deep:!0});const V=[{value:"title",label:"Title",icon:"title"},{value:"artist",label:"Artist",icon:"person"},{value:"album",label:"Album",icon:"album"},{value:"duration",label:"Duration",icon:"timer"},{value:"id",label:"Added",icon:"date_range"}],c=["title","artist","album"],C={title:"title",artist:"person",album:"album"};U(async()=>{t.value=await A(u.value),t.value.filter||(t.value.filter={});const o=t.value.filter;for(const a of c)o[a]||(o[a]=[]);t.value.filter=o});const k=async()=>{await R(u.value,t.value),w.fetchPlaylists()};return(o,a)=>(n(),i("div",N,[l("div",j,[l("div",q,[s(p,{label:"Save",icon:"save",type:"success",class:"!mt-0",onClick:k}),s(B,{modelValue:t.value.sort,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.sort=e),options:V,icon:"filter_list"},null,8,["modelValue"]),l("span",{class:"cursor-pointer material-symbols-rounded ms-wght-100 text-5xl",onClick:a[1]||(a[1]=e=>t.value.direction=t.value.direction=="asc"?"desc":"asc")},_(t.value.direction=="asc"?"arrow_drop_up":"arrow_drop_down"),1),s(f,{modelValue:t.value.limit,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.limit=e),type:"number",placeholder:"Limit...",icon:"123"},null,8,["modelValue"])]),l("div",K,[(n(),i(y,null,b(c,e=>s(O,{class:"filter"},{default:F(()=>[l("h4",M,_(e),1),l("div",Q,[(n(!0),i(y,null,b(t.value.filter[e],(S,r)=>(n(),i("div",W,[s(f,{modelValue:t.value.filter[e][r],"onUpdate:modelValue":m=>t.value.filter[e][r]=m,icon:C[e]},null,8,["modelValue","onUpdate:modelValue","icon"]),l("span",{class:"material-symbols-rounded",onClick:m=>t.value.filter[e].splice(r,1)}," delete ",8,z)]))),256)),s(p,{label:"OR",icon:"add",onClick:S=>t.value.filter[e].push("")},null,8,["onClick"])])]),_:2},1024)),64))])]),l("div",G,[s(L,{playlist:d.value},null,8,["playlist"])])]))}});const nt=T(H,[["__scopeId","data-v-dac9f8de"]]);export{nt as default};
