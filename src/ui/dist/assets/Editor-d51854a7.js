import{I as d}from"./IconButton-b26e0bb5.js";import{i as S,E as x,s as D,B as E,k as B,q as _,G as U,H as $,I as A,J as F,K as N,o as i,c as n,a as l,g as s,N as O,t as f,T as y,F as b,j as h,w as R,C as T,O as L,P as M,_ as j}from"./index-f1eb661c.js";import{_ as q}from"./Playlist.vue_vue_type_script_setup_true_lang-6e5264ff.js";import"./PlaylistEntry-3eada459.js";import"./EditSong.vue_vue_type_script_setup_true_lang-cb18c76e.js";import"./Template-7123ef05.js";import"./Form-fbf7830f.js";import"./playerInPicture-af203fdf.js";import"./collection-b1c10a16.js";import"./PlaylistHeader-4db33a04.js";const G={class:"playlist-editor"},H={class:"editor"},J={class:"sort my-2"},K={class:"filters"},W={class:"uppercase mt-0"},z={class:"items"},Q={class:"item"},X=["onClick"],Y={class:"preview"},Z=S({__name:"Editor",setup(ee){const w=x(),V=D(),r=E(()=>w.params.id),c=B(),e=_({name:"",description:"",direction:"asc",sort:"id",filter:{title:[],artist:[],album:[],duration:{}}}),p=_();U([()=>e.value.sort,()=>e.value.filter,()=>e.value.direction],$.debounce(async()=>{p.value=await A(e.value)},3*1e3),{deep:!0});const k=[{value:"title",label:"Title",icon:"title"},{value:"artist",label:"Artist",icon:"person"},{value:"album",label:"Album",icon:"album"},{value:"duration",label:"Duration",icon:"timer"},{value:"id",label:"Added",icon:"date_range"}],m=["title","artist","album"],C={title:"title",artist:"person",album:"album"};F(async()=>{e.value=await N(r.value),e.value.filter||(e.value.filter={});const o=e.value.filter;for(const a of m)o[a]||(o[a]=[]);e.value.filter=o});const P=async()=>{await L(r.value,e.value),c.fetchPlaylists()},g=async()=>{await M(r.value),c.fetchPlaylists(),V.push("/")};return(o,a)=>(i(),n("div",G,[l("div",H,[l("div",J,[s(d,{label:"Save",icon:"save",type:"success",class:"!mt-0",onClick:P}),s(d,{label:"Delete",icon:"delete",type:"danger",class:"!mt-0",onClick:g}),s(O,{modelValue:e.value.sort,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.sort=t),options:k,icon:"filter_list"},null,8,["modelValue"]),l("span",{class:"cursor-pointer material-symbols-rounded ms-wght-100 text-5xl",onClick:a[1]||(a[1]=t=>e.value.direction=e.value.direction=="asc"?"desc":"asc")},f(e.value.direction=="asc"?"arrow_drop_up":"arrow_drop_down"),1),s(y,{modelValue:e.value.limit,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.limit=t),type:"number",placeholder:"Limit...",icon:"123"},null,8,["modelValue"])]),l("div",K,[(i(),n(b,null,h(m,t=>s(T,{class:"filter"},{default:R(()=>[l("h4",W,f(t),1),l("div",z,[(i(!0),n(b,null,h(e.value.filter[t],(I,u)=>(i(),n("div",Q,[s(y,{modelValue:e.value.filter[t][u],"onUpdate:modelValue":v=>e.value.filter[t][u]=v,icon:C[t]},null,8,["modelValue","onUpdate:modelValue","icon"]),l("span",{class:"material-symbols-rounded",onClick:v=>e.value.filter[t].splice(u,1)}," delete ",8,X)]))),256)),s(d,{label:"OR",icon:"add",onClick:I=>e.value.filter[t].push("")},null,8,["onClick"])])]),_:2},1024)),64))])]),l("div",Y,[s(q,{playlist:p.value},null,8,["playlist"])])]))}});const ce=j(Z,[["__scopeId","data-v-51eda3dd"]]);export{ce as default};
