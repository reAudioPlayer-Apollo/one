import{_ as p,o as r,c as i,a,r as h,x as _,F as f,h as m,p as u,y,f as k,g as l,w as c,M as d,u as v}from"./index-BpNZikfW.js";const g={props:{src:String}},$={class:"info"};function S(s,e,o,n,t,P){return r(),i("div",{class:"image",style:_({backgroundImage:"url("+o.src+")"})},[e[0]||(e[0]=a("div",{class:"filter"},null,-1)),a("div",$,[h(s.$slots,"default",{},void 0,!0)])],4)}const x=p(g,[["render",S],["__scopeId","data-v-0c755b69"]]),C={class:"songContent"},b={class:"play"},O=["onClick"],H={class:"info"},I={data(){return fetch("/api/playlists").then(async s=>{this.playlists=await s.json(),this.pick()}),{playlists:[],picks:[]}},mounted(){},methods:{parseCover:u,pick(){this.songs=this.playlists.map(s=>s.songs).flat();for(let s=0;s<4;s++)this.picks.push(this.songs[Math.floor(Math.random()*this.songs.length)])},onScroll(){this.$refs.container.clientHeight+this.$refs.container.scrollTop>=this.$refs.container.scrollHeight-100&&this.pick()},href(s){return`/track/${y(s.id)}`},loadPlaylist(s){fetch("/api/player/load",{method:"POST",body:JSON.stringify({id:s,type:"track"})})}}},M=Object.assign(I,{__name:"Explore",setup(s){return(e,o)=>{const n=k("router-link");return r(),i("div",{ref:"container",class:"explore",onScroll:o[0]||(o[0]=(...t)=>e.onScroll&&e.onScroll(...t))},[(r(!0),i(f,null,m(e.picks,t=>(r(),i("div",{key:t.name,class:"item"},[l(x,{src:v(u)(t.cover)},{default:c(()=>[a("div",C,[a("div",b,[a("span",{id:"loadPlaylist",class:"material-symbols-rounded play",onClick:()=>e.loadPlaylist(t.id)},"play_circle",8,O)]),a("div",H,[l(n,{to:e.href(t),class:"linkOnHover"},{default:c(()=>[a("h1",null,[l(d,{text:t.title},null,8,["text"])])]),_:2},1032,["to"]),l(n,{to:`/search/${t.artist}`,class:"linkOnHover"},{default:c(()=>[a("p",null,[l(d,{text:t.artist},null,8,["text"])])]),_:2},1032,["to"])])])]),_:2},1032,["src"])]))),128))],544)}}}),B=p(M,[["__scopeId","data-v-51105a59"]]);export{B as default};
