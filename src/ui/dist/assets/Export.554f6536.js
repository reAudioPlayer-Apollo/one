import{b as m}from"./index.b5a11ad3.js";import{_,H as y,o as n,c as u,a as e,b as f,d as w,F as v,i as k,f as b,e as x,p as C,h as S}from"./index.f28a8d76.js";import{C as g}from"./CloudPlaylist.eb5b45ba.js";window.Buffer=m.Buffer;new y("reapApollo");const B={name:"import",methods:{login(){window.location=`https://eu-apollo.herokuapp.com/user/accessToken?redirect=${encodeURIComponent(window.location.origin+"/#/export/<token>")}`},downloadFile(){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.playlists)),s=document.getElementById("downloadAnchorElem");s.setAttribute("href",t),s.setAttribute("download","lib.one.json"),s.click()},upload(){this.userData.data.playlists=this.playlists,console.error(this.userData.data);const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.userData.data)})}},data(){if(this.$route.params.data){const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${t}`).then(async s=>this.userData=await s.json())}return fetch("/api/playlists").then(async t=>{const s=await t.json();for(let o=0;o<s.length;o++){const r=await fetch(`/api/playlists/${o}`);this.playlists.push(await r.json())}}),{playlists:[],userData:{}}},components:{CloudPlaylist:g}},i=t=>(C("data-v-671db502"),t=t(),S(),t),E={class:"export"},I={class:"action"},T=i(()=>e("h1",null,"Save to File",-1)),j=i(()=>e("a",{id:"downloadAnchorElem",style:{display:"none"}},null,-1)),A=i(()=>e("span",{class:"material-symbols-rounded"},"file_download",-1)),D={class:"data"};function F(t,s,o,r,a,d){const h=x("CloudPlaylist");return n(),u("div",E,[e("div",I,[T,j,e("button",{onClick:s[0]||(s[0]=(...l)=>d.downloadFile&&d.downloadFile(...l)),class:"iconWithText"},[A,f(" Save")])]),w("",!0),e("div",D,[(n(!0),u(v,null,k(a.playlists,(l,c)=>{var p;return n(),b(h,{onRemove:()=>a.playlists.splice(c,1),key:c,playlist:l,cloudPlaylists:((p=a.userData.data)==null?void 0:p.playlists)||[]},null,8,["onRemove","playlist","cloudPlaylists"])}),128))])])}const R=_(B,[["render",F],["__scopeId","data-v-671db502"]]);export{R as default};
