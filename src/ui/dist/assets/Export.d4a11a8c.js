import{b as m}from"./index.b5a11ad3.js";import{C as _}from"./CloudPlaylist.bbe805ad.js";import{_ as y,bA as f,o as n,c as u,a as s,b as w,d as v,F as k,j as b,f as x,e as C,p as S,i as g}from"./index.d3105e36.js";window.Buffer=m.Buffer;new f("reapApollo");const j={name:"import",methods:{login(){window.location=`https://eu-apollo.herokuapp.com/user/accessToken?redirect=${encodeURIComponent(window.location.origin+"/#/export/<token>")}`},downloadFile(){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.playlists)),e=document.getElementById("downloadAnchorElem");e.setAttribute("href",t),e.setAttribute("download","lib.one.json"),e.click()},upload(){this.userData.data.playlists=this.playlists,console.error(this.userData.data);const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.userData.data)})}},data(){if(this.$route.params.data){const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${t}`).then(async e=>this.userData=await e.json())}return fetch("/api/playlists").then(async t=>{const e=await t.json();for(let o=0;o<e.length;o++){const r=await fetch(`/api/playlists/${o}`);this.playlists.push(await r.json())}}),{playlists:[],userData:{}}},components:{CloudPlaylist:_}},i=t=>(S("data-v-82a9859e"),t=t(),g(),t),A={class:"export"},B={class:"action"},E=i(()=>s("h1",null,"Save to File",-1)),I=i(()=>s("a",{id:"downloadAnchorElem",style:{display:"none"}},null,-1)),T=i(()=>s("span",{class:"material-symbols-rounded"},"file_download",-1)),D={class:"data"};function F(t,e,o,r,a,c){const h=C("CloudPlaylist");return n(),u("div",A,[s("div",B,[E,I,s("button",{onClick:e[0]||(e[0]=(...l)=>c.downloadFile&&c.downloadFile(...l)),class:"iconWithText"},[T,w(" Save")])]),v("",!0),s("div",D,[(n(!0),u(k,null,b(a.playlists,(l,d)=>{var p;return n(),x(h,{onRemove:()=>a.playlists.splice(d,1),key:d,playlist:l,cloudPlaylists:((p=a.userData.data)==null?void 0:p.playlists)||[]},null,8,["onRemove","playlist","cloudPlaylists"])}),128))])])}const R=y(j,[["render",F],["__scopeId","data-v-82a9859e"]]);export{R as default};
