import{_ as k,o as s,c as o,a as r,b as m,t as f,d,r as $,e as S,f as h,w as l,u as P,p as w,g as n,F as _,h as p,i as H,j as O,k as C,l as j}from"./index.12f03f32.js";import{T as y}from"./TrackCompact.14541dba.js";import{S as g,L as b}from"./LightPlaylistEntry.005e54ea.js";import"./AddAlbumToPlaylist.d86c6b0d.js";import"./AlbumHeader.71370c16.js";import"./MiniPlayer.833aaa56.js";import"./FindSources.ffe3bb4a.js";import"./AddSongToPlaylist.fdee1322.js";import"./EditSong.vue_vue_type_script_setup_true_lang.2b98b6dd.js";import"./song.e52b21df.js";const D={name:"FlexShelf",props:{heading:String,icon:String}},I={class:"shelf"},N={class:"header"},B={key:0},F={key:0,class:"icon material-symbols-round"},T={class:"items"};function q(t,i,u,c,e,a){return s(),o("div",I,[r("div",N,[u.heading||u.icon?(s(),o("h2",B,[m(f(u.heading),1),u.icon?(s(),o("span",F,f(u.icon),1)):d("",!0)])):d("",!0)]),r("div",T,[$(t.$slots,"default",{},void 0,!0)])])}const v=k(D,[["render",q],["__scopeId","data-v-b884f5aa"]]);const E={class:"home-playlist drop-shadow-md"},L=["src"],R={__name:"Playlist",props:{name:{type:String,required:!0},cover:{type:String,required:!0},href:{type:String,required:!0}},setup(t){return(i,u)=>{const c=S("router-link");return s(),h(c,{to:t.href,class:"no-underline"},{default:l(()=>[r("div",E,[r("img",{src:P(w)(t.cover)},null,8,L),r("h2",null,f(t.name),1)])]),_:1},8,["to"])}}},V=k(R,[["__scopeId","data-v-4219b825"]]);const G=t=>(C("data-v-022b8f07"),t=t(),j(),t),A={class:"home"},J={class:"main"},M={key:0,class:"playlists"},z={key:1,class:"liked"},K={key:2,class:"breaking"},Q={class:"side"},U={key:0,class:"releases"},W={key:1,class:"disovery"},X={key:2,class:"recommendations"},Y=G(()=>r("h2",null,"Recommendations",-1)),Z={name:"Home",data(){const t=new Date;return{greeting:t.getHours()<12?"Good morning":t.getHours()<18?"Good afternoon":"Good evening",releases:[],picks:[],songs:[],liked:[],breaking:[],recommendations:[],data:H()}},mounted(){fetch("/api/config").then(t=>{t.status==400&&this.$router.push("/welcome")}),fetch("/api/releases").then(t=>t.json()).then(t=>{this.releases=t.slice(0,3)}),fetch("/api/me/liked").then(t=>t.json()).then(t=>{this.liked=t.songs.slice(0,3)}),fetch("/api/me/new").then(t=>t.json()).then(t=>{this.breaking=t.songs.slice(0,3)})},computed:{playlists(){return this.data.playlists}},methods:{playDiscover(t){fetch("/api/player/load",{method:"POST",body:JSON.stringify({id:t.id,type:"track"})})},playRecommendation(t){const i=new CustomEvent("player.play",{detail:{artist:t.artist,title:t.title,source:t.src||t.url}});window.dispatchEvent(i)},pick(){this.songs=this.playlists.map(t=>t.songs).flat();for(let t=0;t<3;t++)this.picks.push(this.songs[Math.floor(Math.random()*this.songs.length)]);fetch("/api/spotify/recommendations",{method:"POST",body:JSON.stringify({query:`${this.picks[0].artist} ${this.picks[0].title}`})}).then(t=>t.json()).then(t=>{this.recommendations=t.slice(0,3)})}}},x=Object.assign(Z,{setup(t){return(i,u)=>{const c=S("router-link");return s(),o("div",A,[r("div",J,[i.playlists.length?(s(),o("div",M,[r("h2",null,[n(c,{to:"/collection/playlists",class:"linkOnHover"},{default:l(()=>[m("Playlists")]),_:1})]),n(v,null,{default:l(()=>[(s(!0),o(_,null,p(i.playlists,(e,a)=>(s(),h(V,{key:a,name:e.name,cover:e.cover,href:e==null?void 0:e.href},null,8,["name","cover","href"]))),128))]),_:1})])):d("",!0),i.liked.length?(s(),o("div",z,[r("h2",null,[n(c,{to:"/collection/tracks",class:"linkOnHover"},{default:l(()=>[m("Liked Songs")]),_:1})]),n(g),(s(!0),o(_,null,p(i.liked,(e,a)=>(s(),h(b,{key:a,index:a,loadAt:{type:"collection"},source:e.source,id:e.id,title:e.title,playing:e.playing,album:e.album,artist:e.artist,cover:e.cover,favourite:e.favourite,duration:e.duration},null,8,["index","source","id","title","playing","album","artist","cover","favourite","duration"]))),128))])):d("",!0),i.breaking.length?(s(),o("div",K,[r("h2",null,[n(c,{to:"/collection/tracks/breaking",class:"linkOnHover"},{default:l(()=>[m("Breaking Songs")]),_:1})]),n(g),(s(!0),o(_,null,p(i.breaking,(e,a)=>(s(),h(b,{key:a,index:a,loadAt:{type:"collection/breaking"},source:e.source,id:e.id,title:e.title,playing:e.playing,album:e.album,artist:e.artist,cover:e.cover,favourite:e.favourite,duration:e.duration},null,8,["index","source","id","title","playing","album","artist","cover","favourite","duration"]))),128))])):d("",!0)]),r("div",Q,[i.releases.length?(s(),o("div",U,[r("h2",null,[n(c,{to:"/collection/releases",class:"linkOnHover"},{default:l(()=>[m("Out now")]),_:1})]),n(v,null,{default:l(()=>[(s(!0),o(_,null,p(i.releases,(e,a)=>(s(),h(y,{onPlay:()=>i.playRecommendation(e),key:a,artist:e.artist,title:e.title,cover:e.cover,href:e.url},null,8,["onPlay","artist","title","cover","href"]))),128))]),_:1})])):d("",!0),i.picks.length?(s(),o("div",W,[r("h2",null,[n(c,{to:"/discover",class:"linkOnHover"},{default:l(()=>[m("Discover")]),_:1})]),n(v,null,{default:l(()=>[(s(!0),o(_,null,p(i.picks,(e,a)=>(s(),h(y,{onPlay:()=>i.playDiscover(e),key:a,artist:e.artist,title:e.title,cover:P(O)(e.cover),id:e.id},null,8,["onPlay","artist","title","cover","id"]))),128))]),_:1})])):d("",!0),i.recommendations.length?(s(),o("div",X,[Y,n(v,null,{default:l(()=>[(s(!0),o(_,null,p(i.recommendations,(e,a)=>(s(),h(y,{onPlay:()=>i.playRecommendation(e),key:a,artist:e.artist,title:e.title,cover:e.cover,href:e.src},null,8,["onPlay","artist","title","cover","href"]))),128))]),_:1})])):d("",!0)])])}}}),de=k(x,[["__scopeId","data-v-022b8f07"]]);export{de as default};
