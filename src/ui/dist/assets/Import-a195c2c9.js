import{G as m,C as h}from"./gistClient-a43714fc.js";import{_ as v,j as P,o as p,c as u,a,g as d,F as C,i as F,f as I,e as _,k as $,l as k}from"./index-bcfdc045.js";import{I as S}from"./IconButton-fac5016d.js";const g={name:"import",async mounted(){this.$refs.upFile.addEventListener("change",()=>{var t,n,l,i;const e=(t=this.$refs.upFile.files)==null?void 0:t[0];if(e){this.uploadedCoverName=(i=(l=(n=this.$refs.upFile)==null?void 0:n.files)==null?void 0:l[0])==null?void 0:i.name;var s=new FileReader;s.onloadend=()=>{this.cloudPlaylists=JSON.parse(s.result)},s.readAsText(e)}}),this.cloudPlaylists=await m.getContent(),console.log(this.cloudPlaylists)},data(){const e=P();for(let s=0;s<e.playlists.length;s++)fetch(`/api/playlists/${s}`).then(t=>t.json()).then(t=>this.localPlaylists.push(t));return{localPlaylists:[],cloudPlaylists:[],userData:{},dataStore:e}},components:{IconButton:S,CloudPlaylist:h}},f=e=>($("data-v-63f3a727"),e=e(),k(),e),B={class:"import"},E={class:"action"},b=f(()=>a("h1",null,"Restore From File",-1)),w={ref:"upFile",accept:"application/json",style:{display:"none"},type:"file"},G={class:"action"},N=f(()=>a("h2",null,"Synchronise From Github Gists",-1)),R={class:"data"};function j(e,s,t,n,l,i){const r=_("IconButton"),y=_("CloudPlaylist");return p(),u("div",B,[a("div",E,[b,a("input",w,null,512),d(r,{icon:"file_upload",label:"Upload",onClick:s[0]||(s[0]=()=>e.$refs.upFile.click())}),d(r,{icon:"done",label:"Apply",onClick:s[1]||(s[1]=c=>e.$refs.playlistsElements.forEach(o=>o.import()))})]),a("div",G,[N,d(r,{icon:"cloud_download",label:"Synchronise",onClick:s[2]||(s[2]=c=>e.$refs.playlistsElements.forEach(o=>o.import()))})]),a("div",R,[(p(!0),u(C,null,F(l.cloudPlaylists,(c,o)=>(p(),I(y,{key:o,ref_for:!0,ref:"playlistsElements",localPlaylists:l.localPlaylists,playlist:c,onRemove:()=>l.cloudPlaylists.splice(o,1)},null,8,["localPlaylists","playlist","onRemove"]))),128))])])}const V=v(g,[["render",j],["__scopeId","data-v-63f3a727"]]);export{V as default};
