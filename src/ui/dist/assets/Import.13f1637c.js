import{b as h,C as f}from"./CloudPlaylist.a93c3b8f.js";import{_,bJ as y,o as r,c as d,a as t,b as u,d as v,F as k,i as P,f as $,e as w,k as C,l as F}from"./index.bb9dc178.js";window.Buffer=h.Buffer;new y("reapApollo");const b={name:"import",methods:{login(){window.location=`https://eu-apollo.herokuapp.com/user/accessToken?redirect=${encodeURIComponent(window.location.origin+"/#/import/<token>")}`}},mounted(){this.$refs.upFile.addEventListener("change",()=>{var a,i,o,n;const e=(a=this.$refs.upFile.files)==null?void 0:a[0];if(!!e){this.uploadedCoverName=(n=(o=(i=this.$refs.upFile)==null?void 0:i.files)==null?void 0:o[0])==null?void 0:n.name;var s=new FileReader;s.onloadend=()=>{this.cloudPlaylists=JSON.parse(s.result)},s.readAsText(e)}})},data(){if(this.$route.params.data){const e=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${e}`).then(async s=>{this.userData=await s.json(),this.cloudPlaylists=this.userData.data.playlists})}for(let e=0;e<this.$store.state.playlists.length;e++)fetch(`/api/playlists/${e}`).then(s=>s.json()).then(s=>this.localPlaylists.push(s));return{localPlaylists:[],cloudPlaylists:[],userData:{}}},components:{CloudPlaylist:f}},c=e=>(C("data-v-7d83ce5c"),e=e(),F(),e),I={class:"import"},g={class:"action"},B=c(()=>t("h1",null,"Restore From File",-1)),T={type:"file",ref:"upFile",style:{display:"none"},accept:"application/json"},x=c(()=>t("span",{class:"material-symbols-rounded"},"file_upload",-1)),E=c(()=>t("span",{class:"material-symbols-rounded"},"done",-1)),N={class:"data"};function R(e,s,a,i,o,n){const m=w("CloudPlaylist");return r(),d("div",I,[t("div",g,[B,t("input",T,null,512),t("button",{onClick:s[0]||(s[0]=()=>e.$refs.upFile.click()),class:"iconWithText"},[x,u(" Upload")]),t("button",{onClick:s[1]||(s[1]=p=>e.$refs.playlistsElements.forEach(l=>l.import())),class:"iconWithText"},[E,u(" Apply")])]),v("",!0),t("div",N,[(r(!0),d(k,null,P(o.cloudPlaylists,(p,l)=>(r(),$(m,{onRemove:()=>o.cloudPlaylists.splice(l,1),ref_for:!0,ref:"playlistsElements",key:l,playlist:p,localPlaylists:o.localPlaylists},null,8,["onRemove","playlist","localPlaylists"]))),128))])])}const A=_(b,[["render",R],["__scopeId","data-v-7d83ce5c"]]);export{A as default};
