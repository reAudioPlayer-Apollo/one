import{C as h}from"./CloudPlaylist.3209552c.js";import{_,j as f,o as r,c as p,a as o,b as u,d as y,F as v,i as k,f as P,e as $,k as C,l as F}from"./index.c970909a.js";const w={name:"import",methods:{login(){window.location=`https://eu-apollo.herokuapp.com/user/accessToken?redirect=${encodeURIComponent(window.location.origin+"/#/import/<token>")}`}},mounted(){this.$refs.upFile.addEventListener("change",()=>{var t,i,l,n;const s=(t=this.$refs.upFile.files)==null?void 0:t[0];if(!!s){this.uploadedCoverName=(n=(l=(i=this.$refs.upFile)==null?void 0:i.files)==null?void 0:l[0])==null?void 0:n.name;var e=new FileReader;e.onloadend=()=>{this.cloudPlaylists=JSON.parse(e.result)},e.readAsText(s)}})},data(){const s=f();if(this.$route.params.data){const e=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${e}`).then(async t=>{this.userData=await t.json(),this.cloudPlaylists=this.userData.data.playlists})}for(let e=0;e<s.playlists.length;e++)fetch(`/api/playlists/${e}`).then(t=>t.json()).then(t=>this.localPlaylists.push(t));return{localPlaylists:[],cloudPlaylists:[],userData:{},dataStore:s}},components:{CloudPlaylist:h}},c=s=>(C("data-v-3d90df46"),s=s(),F(),s),I={class:"import"},g={class:"action"},S=c(()=>o("h1",null,"Restore From File",-1)),T={type:"file",ref:"upFile",style:{display:"none"},accept:"application/json"},b=c(()=>o("span",{class:"material-symbols-rounded"},"file_upload",-1)),x=c(()=>o("span",{class:"material-symbols-rounded"},"done",-1)),E={class:"data"};function N(s,e,t,i,l,n){const m=$("CloudPlaylist");return r(),p("div",I,[o("div",g,[S,o("input",T,null,512),o("button",{onClick:e[0]||(e[0]=()=>s.$refs.upFile.click()),class:"iconWithText"},[b,u(" Upload")]),o("button",{onClick:e[1]||(e[1]=d=>s.$refs.playlistsElements.forEach(a=>a.import())),class:"iconWithText"},[x,u(" Apply")])]),y("",!0),o("div",E,[(r(!0),p(v,null,k(l.cloudPlaylists,(d,a)=>(r(),P(m,{onRemove:()=>l.cloudPlaylists.splice(a,1),ref_for:!0,ref:"playlistsElements",key:a,playlist:d,localPlaylists:l.localPlaylists},null,8,["onRemove","playlist","localPlaylists"]))),128))])])}const B=_(w,[["render",N],["__scopeId","data-v-3d90df46"]]);export{B as default};
