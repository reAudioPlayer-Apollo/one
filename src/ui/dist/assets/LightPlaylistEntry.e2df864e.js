import{_ as y,o as _,c as S,k as x,l as k,a,M as P,x as A,i as w,e as d,f as b,w as c,g as n,y as M,n as r,t as f}from"./index.2f8d843b.js";import{_ as N}from"./SongCtx.7489cf6d.js";import{_ as O}from"./EditSong.vue_vue_type_script_setup_true_lang.3ba4fbd9.js";const C={name:"SpotifyPlaylistHeader"},g=i=>(x("data-v-ea0c070d"),i=i(),k(),i),I={class:"gridHeader"},L=g(()=>a("span",{class:"id"},"#",-1)),T=g(()=>a("span",{class:"title"},"Title",-1)),H=[L,T];function E(i,s,t,v,o,e){return _(),S("div",I,H)}const Q=y(C,[["render",E],["__scopeId","data-v-ea0c070d"]]);const B={name:"LightPlaylistEntry",components:{SongCtx:N,EditSong:O,Marquee:P},props:{index:Number,id:Number,artist:{type:String,default:"N/A"},title:{type:String,default:"N/A"},cover:{type:String,default:"/assets/img/music_placeholder.png"},source:String,album:{type:String,default:"N/A"},duration:{type:String,default:"N/A"},favourite:{type:Boolean,default:!1},playing:{type:Boolean,default:!1},loadAt:{type:Object}},data(){return{highlighted:!1,favourited:this.favourite,isAutoPlaylist:this.$route.path=="/collection/tracks",hovering:!1}},computed:{trackId(){return A(this.id)}},methods:{parseCover:w,download(){window.open(`/api/tracks/${this.id}/download`)},addToPlaylist(i){fetch(`/api/playlists/${i}/tracks`,{method:"POST",body:JSON.stringify({source:this.source})}).then(s=>{s.status==200&&this.$emit("requestUpdate")})},update(){this.$refs.editSongPopup.show()},remove(){},onselect(){this.highlighted=!this.highlighted},playAt(){console.log(this.$route.path);const i=this.loadAt||{};i.index=this.index,fetch("/api/player/at",{method:"POST",body:JSON.stringify(i)})},setFavourite(){fetch(`/api/tracks/${this.id}`,{method:"PUT",body:JSON.stringify({favourite:this.favourited,album:this.album,artist:this.artist,title:this.title,duration:this.duration,cover:this.cover,source:this.source})})},displayPlay(){const i=this.$refs.idOrPlay;i.innerHTML="play_arrow",i.classList.add("material-icons-round")},displayId(){const i=this.$refs.idOrPlay;i.innerHTML=this.index+1,i.classList.remove("material-icons-round")}},watch:{added(){console.log("change"),this.$refs.add.innerHTML=this.added?"done":"add"},favourited(){this.setFavourite()},favourite(){console.log("mounted",this.title,this.favourite,this.favourited),this.favourited=this.favourite,this.highlighted=!1}}},q=["id"],D={class:"h-full flex flex-col justify-center"},U={class:"track"},j=["src"],J={class:"trackwrapper"},F={class:"h-full flex flex-col justify-center"},R={class:"duration"};function V(i,s,t,v,o,e){const m=d("EditSong"),u=d("Marquee"),h=d("router-link"),p=d("SongCtx");return _(),b(p,{artist:t.artist,src:t.source,title:t.title,onDownload:e.download,onAddto:e.addToPlaylist,onRemove:e.remove,onUpdate:e.update,onLike:s[5]||(s[5]=l=>o.favourited=!o.favourited),isAutoPlaylist:o.isAutoPlaylist,liked:o.favourited,ref:"ctxMenu"},{default:c(()=>[n(m,{ref:"editSongPopup",song:{title:t.title,artist:t.artist,album:t.album,cover:t.cover,src:t.source,id:t.id}},null,8,["song"]),a("div",{id:"bplayer-entry-"+t.id,onDblclick:s[1]||(s[1]=()=>{e.playAt(),e.onselect()}),onClick:s[2]||(s[2]=(...l)=>e.onselect&&e.onselect(...l)),onMouseover:s[3]||(s[3]=(...l)=>e.displayPlay&&e.displayPlay(...l)),onMouseleave:s[4]||(s[4]=(...l)=>e.displayId&&e.displayId(...l)),class:r(["lightPlaylistEntry",{selected:o.highlighted}])},[a("div",D,[a("span",{onClick:s[0]||(s[0]=M((...l)=>e.playAt&&e.playAt(...l),["stop"])),ref:"idOrPlay",class:r([{playing:t.playing},"id"])},f(t.index+1),3)]),a("div",U,[a("img",{src:e.parseCover(t.cover)},null,8,j),a("div",J,[a("span",{class:r(["title",{playing:t.playing}])},[n(h,{class:"linkOnHover",to:`/track/${e.trackId}`},{default:c(()=>[n(u,{text:t.title},null,8,["text"])]),_:1},8,["to"])],2),a("span",{class:r(["artist",{playing:t.playing}])},[n(h,{class:"linkOnHover",to:`/search/artist:${t.artist}`},{default:c(()=>[n(u,{text:t.artist},null,8,["text"])]),_:1},8,["to"])],2)])]),a("div",F,[a("span",R,f(t.duration),1)])],42,q)]),_:1},8,["artist","src","title","onDownload","onAddto","onRemove","onUpdate","isAutoPlaylist","liked"])}const W=y(B,[["render",V],["__scopeId","data-v-f340915f"]]);export{W as L,Q as S};
