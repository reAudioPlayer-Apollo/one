import{e as b,n as r,y as x,E as n,o as d,c as q,g as c,P as B,w as C,i as P,u as p,O as w,d as Q}from"./index-c7b070b4.js";import{P as E}from"./PlaylistEntry-14284315.js";import{d as y}from"./vuedraggable.umd-a43d2b78.js";const _=b({__name:"Playlist",props:{playlist:{type:Object,required:!1},useQueue:{type:Boolean,required:!1,default:!1},draggable:{type:Boolean,required:!1,default:!1}},emits:["rearrange"],setup(u,{expose:f,emit:m}){const i=r(null),s=u,t=r(-1),o=r([]);x(()=>{o.value=s.useQueue?s.playlist.queue:s.playlist.songs}),n(()=>s.playlist,a=>{o.value=s.useQueue?a.queue:a.songs}),n(()=>s.useQueue,()=>{o.value=s.useQueue?s.playlist.queue:s.playlist.songs}),f({scrollToSong:a=>{var l;const e=(l=document.getElementById(`bplayer-entry-${a}`))==null?void 0:l.offsetTop;e>=150&&(i.value.scrollTop=e-150)}});const g=m,v=a=>{const e=a.moved;e&&g("rearrange",e.oldIndex,e.newIndex)};return(a,e)=>u.playlist?(d(),q("div",{key:0,ref_key:"playlistScroll",ref:i,class:"playlist"},[c(B),c(p(y),{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value=l),disabled:!p(y),"item-key":"id",onChange:v,onDragover:e[1]||(e[1]=w(()=>{},["stop"]))},{item:C(({element:l,index:k})=>[(d(),P(E,{id:"bplayer-entry-"+l.id,key:l.source,index:k,selected:t.value==l.id,song:l,"with-cover":"",onClick:I=>t.value==l.id?t.value=-1:t.value=l.id},null,8,["id","index","selected","song","onClick"]))]),_:1},8,["modelValue","disabled"])],512)):Q("",!0)}});export{_};
