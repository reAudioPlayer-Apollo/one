import{e as _,j as O,n as y,o as f,i as h,w,g as d,u as I,ar as $,aO as j,v as A,aP as D,aa as B,a as u,ac as x,x as N,a7 as q,D as T,f as V,d as g,H as E,O as M,t as v,c as F,C as H,_ as W}from"./index-vqANRdX_.js";import{p as b}from"./playerInPicture-Dfp9IAsf.js";const z=u("br",null,null,-1),G=_({__name:"ImportSpotifyPlaylist",props:{playlist:{type:Object,required:!0}},setup(a,{expose:o}){const i=O(),e=a,n=y([{name:"playlist",type:"dropdown",required:!0,value:null,options:i.playlistsAsDropdown}]),r=y(null),c=y(null),s=y([]),p=async()=>{if(r.value.load(),s.value.length==0){const t=e.playlist.id==="liked"?"/api/spotify/tracks":`/api/spotify/playlists/${e.playlist.id}`,l=await fetch(t);s.value=await l.json()}r.value.show()},m=()=>{b("Spotify Playlist",e.playlist.name,e.playlist.href)},P=async t=>{if(t==="new"){const l=await N("classic",e.playlist.name,e.playlist.description,e.playlist.cover);return n.value[0].options=i.playlistsAsDropdown,n.value[0].value=l,l}return t},k=async(t,l=null)=>{s.value[t].added||(l??(l=c.value.toObject().playlist),l=await P(l),await x(l,s.value[t]),s.value[t].added=!0)},C=async()=>{let t=c.value.toObject().playlist;t=await P(t),s.value.forEach((l,S)=>{k(S,t)})};return o({show:p}),(t,l)=>(f(),h(B,{ref_key:"modal",ref:r,submit:{label:"Add All",icon:"add"},name:"Import Playlist",onClose:l[0]||(l[0]=S=>t.$emit("close")),onSubmit:C},{default:w(()=>[d(j,{cover:a.playlist.cover,icons:[{name:"share",onClick:()=>I($)(a.playlist.href)},{name:"play_arrow",onClick:m}],title:a.playlist.name},null,8,["cover","icons","title"]),d(A,{ref_key:"form",ref:c,options:n.value},null,8,["options"]),z,d(D,{songs:s.value,onAdd:k},null,8,["songs"])]),_:1},512))}}),J={class:"relative"},K={class:"title"},L={key:0,class:"material-symbols-rounded"},Q=_({__name:"PlaylistCard",props:{playlist:{type:Object,required:!0},isSpotify:{type:Boolean,default:!1}},setup(a){const o=a,i=q(),e=y(),n=T(()=>i.playlistPlayOrPauseIcon(o.playlist.id)),r=()=>{if(o.isSpotify){b(o.playlist.name,"Spotify",o.playlist.href);return}i.playlistId==o.playlist.id?i.playPause():i.loadPlaylist(o.playlist.id)},c=s=>{var p;console.log(o.isSpotify),o.isSpotify&&(s.preventDefault(),s.stopPropagation(),(p=e.value)==null||p.show(),console.log("showing",e.value))};return(s,p)=>{const m=V("router-link");return f(),h(m,{to:a.playlist.href,class:"no-underline"},{default:w(()=>[a.isSpotify?(f(),h(G,{key:0,ref_key:"importSpotify",ref:e,playlist:a.playlist},null,8,["playlist"])):g("",!0),d(H,{class:"home-playlist drop-shadow-md","with-hover":"",onClick:c},{default:w(()=>[u("div",J,[d(E,{src:a.playlist.cover,type:"playlist",name:a.playlist.name},null,8,["src","name"]),u("span",{class:"material-symbols-rounded ms-fill play",onClick:M(r,["stop","prevent"])},v(n.value),1)]),u("div",K,[a.playlist.type!="classic"?(f(),F("span",L,v(a.playlist.type=="smart"?"neurology":"bolt"),1)):g("",!0),u("h4",null,v(a.playlist.name),1)])]),_:1})]),_:1},8,["to"])}}}),X=W(Q,[["__scopeId","data-v-d1d701cc"]]);export{X as P};
