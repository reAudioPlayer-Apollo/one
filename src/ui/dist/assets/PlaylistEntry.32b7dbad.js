import{m as H,o as l,c as v,d as g,x as M,k as J,l as K,a as i,_ as U,j as W,G as A,n as B,z as X,r as Q,g as o,w as n,b as c,F as R,i as T,f as P,t as p,u as h,e as x,J as Z,K as ee,h as te,M as F,N as oe}from"./index.08918264.js";import{_ as se}from"./EditSong.vue_vue_type_script_setup_true_lang.629ea41c.js";import{p as ne}from"./playerInPicture.37a9ab56.js";import{a as ae,c as le,r as ie,d as ue,f as re}from"./song.ef42d390.js";const O=e=>(J("data-v-07642d0e"),e=e(),K(),e),de=O(()=>i("div",{class:"index text-right"},"#",-1)),ce=O(()=>i("div",{class:"artist-title"}," title ",-1)),ve={key:0,class:"album"},me=O(()=>i("div",{class:"duration"},[i("span",{class:"material-symbols-rounded"},"schedule")],-1)),fe=H({__name:"PlaylistHeader",props:{index:{type:Number,required:!0},withAlbum:{type:Boolean,required:!1,default:!1},withMore:{type:Boolean,required:!1,default:!1}},setup(e){return(b,a)=>(l(),v("div",{class:M(["playlist-header",{withAlbum:e.withAlbum,withMore:e.withMore}])},[de,ce,e.withAlbum?(l(),v("div",ve," album ")):g("",!0),me],2))}});const Ie=U(fe,[["__scopeId","data-v-07642d0e"]]),ye=H({__name:"SongContext",props:{song:{type:Object,required:!0},playlistId:{type:Number,required:!1,default:-1}},emits:["update","edit"],setup(e,{expose:b,emit:a}){const t=e,N=W(),u=A(()=>N.playlists),$=A(()=>t.playlistId==-1),C=()=>{ne(t.song.artist,t.song.title,t.song.src||t.song.source)},_=async s=>{s!=-1&&await ae(s,t.song)},S=async()=>{const s=await le(t.song.title,t.song.artist,t.song.cover);_(s)},D=async()=>{await ie(t.playlistId,t.song.id),a("update")},q=B(null),f=B(null),r=()=>{f.value.visible?w():k()},w=()=>{f.value.hide()},k=()=>{const s=q.value.getBoundingClientRect(),y={top:s.height+s.top+window.scrollY,left:s.width+s.left+window.scrollX};f.value.show(y)};b({show:k,toggle:r,hide:w});const j={Soundcloud:`https://soundcloud.com/search?q=${t.song.artist} ${t.song.title}`,Audius:`https://audius.co/search/${t.song.artist} ${t.song.title}`,"Youtube Music":`https://music.youtube.com/search?q=${t.song.artist} ${t.song.title}`,Spotify:`https://open.spotify.com/search/${t.song.artist} ${t.song.title}`},V=()=>{a("edit")},z=s=>{window.open(j[s]),V()};return(s,y)=>{const d=x("v-contextmenu-item"),L=x("v-contextmenu-submenu"),I=x("v-contextmenu-divider"),Y=x("v-contextmenu"),G=Z("contextmenu");return X((l(),v("div",{ref_key:"box",ref:q},[Q(s.$slots,"default"),o(Y,{ref_key:"contextmenu",ref:f},{default:n(()=>[o(d,{onClick:C},{default:n(()=>[c(" Preview ")]),_:1}),o(L,{title:"Find source"},{default:n(()=>[(l(!0),v(R,null,T(Object.keys(j),m=>(l(),P(d,{key:m,onClick:E=>z(m)},{default:n(()=>[c(p(m),1)]),_:2},1032,["onClick"]))),128))]),_:1}),o(I),o(d,{onClick:y[0]||(y[0]=m=>s.$emit("like"))},{default:n(()=>[c(p((e.song.favourite?"Remove from":"Save to")+" your Liked Songs"),1)]),_:1}),h($)?g("",!0):(l(),P(d,{key:0,onClick:D},{default:n(()=>[c(" Remove from this playlist ")]),_:1})),o(L,{title:"Add to playlist"},{default:n(()=>[o(d,{onClick:S},{default:n(()=>[c("Add to new playlist")]),_:1}),o(I),(l(!0),v(R,null,T(h(u),(m,E)=>(l(),P(d,{key:E,onClick:be=>_(E)},{default:n(()=>[c(p(m.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),o(I),o(d,{onClick:V},{default:n(()=>[c(" Update Metadata ")]),_:1}),o(I),o(d,{onClick:y[1]||(y[1]=m=>h(ue)(e.song.id))},{default:n(()=>[c("Download")]),_:1})]),_:1},512)])),[[G,void 0,"contextmenu"]])}}}),ge={key:0,class:"cover"},pe={class:"artist-title"},he={class:"title"},_e={class:"artist"},we={key:1,class:"album"},ke={class:"duration text-center"},xe=H({__name:"PlaylistEntry",props:{song:{type:Object,required:!0},index:{type:Number,required:!0},withCover:{type:Boolean,required:!1,default:!1},withAlbum:{type:Boolean,required:!1,default:!1},withMore:{type:Boolean,required:!1,default:!1},selected:{type:Boolean,required:!1,default:!1},playlistId:{type:Number,required:!1,default:null}},emits:["update"],setup(e,{emit:b}){const a=e,t=ee(),N=A(()=>a.song.id==t.song.id),u=B(!1),$=()=>{a.song.favourite=!a.song.favourite,re(a.song.id,a.song.favourite)},C=A(()=>a.playlistId==null?t.playlist.id:a.playlistId),_=()=>{t.loadSong(C.value,a.index)},S=B(null),D=()=>{S.value.show()},q=()=>{b("update")};return(f,r)=>{const w=x("router-link");return l(),P(ye,{ref:"ctxMenu",liked:e.song.favourite,playlistId:h(C),song:e.song,onEdit:D,onLike:$,onUpdate:q},{default:n(()=>[o(se,{ref_key:"updatePopup",ref:S,song:e.song,onUpdate:r[0]||(r[0]=k=>f.$emit("update"))},null,8,["song"]),i("div",{class:M([{playing:h(N),selected:e.selected,hovering:u.value,withCover:e.withCover,withAlbum:e.withAlbum,withMore:e.withMore},"playlist-entry"]),onDblclick:_,onMouseenter:r[2]||(r[2]=k=>u.value=!0),onMouseleave:r[3]||(r[3]=k=>u.value=!1)},[i("div",{class:M([{"material-symbols-rounded":u.value},"index text-right"]),onClick:_},p(u.value?"play_arrow":e.index+1),3),e.withCover?(l(),v("div",ge,[o(te,{src:e.song.cover,type:"track"},null,8,["src"])])):g("",!0),i("div",pe,[i("span",he,[o(w,{to:`/track/${e.song.id}`,class:"linkOnHover"},{default:n(()=>[o(F,{text:e.song.title},null,8,["text"])]),_:1},8,["to"])]),i("span",_e,[o(w,{to:`/search/artist:${e.song.artist}`,class:"linkOnHover"},{default:n(()=>[o(F,{text:e.song.artist},null,8,["text"])]),_:1},8,["to"])])]),e.withAlbum&&!h(oe)?(l(),v("div",we,[o(F,{text:e.song.album},null,8,["text"])])):g("",!0),e.selected||u.value||e.song.favourite?(l(),v("div",{key:2,class:M([{favourite:e.song.favourite},"favourite-icon icon text-right material-symbols-rounded"]),onClick:$},p(e.song.favourite?"favorite":"heart_plus"),3)):g("",!0),i("div",ke,p(e.song.duration=="-1:59"?"N/A":e.song.duration),1),g("",!0)],34)]),_:1},8,["liked","playlistId","song"])}}});const Me=U(xe,[["__scopeId","data-v-e78075bc"]]);export{Ie as P,Me as a};
