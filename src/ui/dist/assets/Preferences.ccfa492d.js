import{_ as y,o as l,c as p,a as e,t as _,k as w,H as v,m as d,bp as u,D as c,b as m,q as b,f,w as k,F as T,i as C,p as I,h as B}from"./index.c9ec6f55.js";import{F as S}from"./FullShelf.dd766911.js";import{b as P}from"./index.b5a11ad3.js";const N={name:"Theme",props:{name:String},methods:{selected(){return window.getCurrentTheme()==this.name},select(){window.setTheme(this.name),this.$emit("selected")}}},L=["src"];function $(n,r,i,s,o,t){return l(),p("div",{onClick:r[0]||(r[0]=(...h)=>t.select&&t.select(...h)),class:"wrapper"},[e("p",{class:w({selected:t.selected()})},_(i.name),3),e("img",{src:`/assets/img/themes/${this.name}.svg`,class:w({selected:t.selected()})},null,10,L)])}const g=y(N,[["render",$],["__scopeId","data-v-0f8ac1ca"]]);const a=n=>(I("data-v-0f4d79ae"),n=n(),B(),n),V={class:"preferences"},M={class:"padding-10"},R={class:"sidebar"},A=a(()=>e("h2",null,"Sidebar",-1)),D={class:"checkbox"},O=a(()=>e("label",{for:"checkbox"},[e("span",null,'Show "News" tab')],-1)),U={class:"checkbox"},x=a(()=>e("label",{for:"checkbox2"},[e("span",null,'Show "Sports" tab')],-1)),F={class:"sidebar"},H=a(()=>e("h2",null,"Player",-1)),j=["disabled"],E={key:0,for:"checkbox3"},J=a(()=>e("span",null,"Play in browser",-1)),q=[J],z={key:1,for:"checkbox3"},G=a(()=>e("span",null,"Play in browser (local playback not supported on this device)",-1)),K=[G],Q={class:"sidebar"},W=a(()=>e("h2",null,"Data Backup",-1)),X={class:"wrapTogether spaceBetween"},Y={class:"spotify"},Z=a(()=>e("h2",null,"Spotify",-1)),ee=a(()=>e("summary",null,"How to",-1)),te=a(()=>e("p",null,[m("1) Head over to the "),e("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1)),se=a(()=>e("p",null,"2) Create An App",-1)),oe=a(()=>e("p",null,"3) Enter any name and any description",-1)),ae=a(()=>e("p",null,"5) Copy and enter the client id and secret into the corresponding input field",-1)),ne={class:"wrapTogether"},le=a(()=>e("p",null,"Client ID: ",-1)),ie={class:"wrapTogether"},re=a(()=>e("p",null,"Client Secret: ",-1)),de={class:"wrapTogether spaceBetween"},ce=a(()=>e("h2",null,"Themes",-1));window.Buffer=P.Buffer;new v("reapApollo");const pe={components:{Theme:g,FullShelf:S},name:"Preferences",mounted(){this.checkSupportsLocalPlayback()},methods:{updateThemes(){this.themeSelected=window.getCurrentTheme()},changeShowSportsTab(){window.localStorage.setItem("sidebar.showSportsTab",this.showSportsTab?"true":"false")},changeShowNewsTab(){window.localStorage.setItem("sidebar.showNewsTab",this.showNewsTab?"true":"false")},changePlayInBrowser(){window.localStorage.setItem("player.inBrowser",this.playInBrowser?"true":"false")},saveRestrictedMode(){this.spotifyClientId||this.spotifyClientSecret||fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:"restricted",secret:"restricted"})}).then(n=>console.log(n))},saveSpotify(){!this.spotifyClientId||!this.spotifyClientSecret||fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:this.spotifyClientId,secret:this.spotifyClientSecret})}).then(n=>console.log(n))},async checkSupportsLocalPlayback(){const n=await fetch("/api/player/supports/local-playback");if(n.status!=200){this.supportsLocalPlayback();return}this.supportsLocalPlayback=await n.json()}},data(){const n=["jade","dark","light"],r=window.getCurrentTheme();let i="",s="";return{coverAsBackground:window.localStorage.getItem("player.coverAsBackground")=="true",themes:n,themeSelected:r,showSportsTab:window.localStorage.getItem("sidebar.showSportsTab")=="true",showNewsTab:window.localStorage.getItem("sidebar.showNewsTab")=="true",playInBrowser:window.localStorage.getItem("player.inBrowser")=="true",spotifyClientId:i,spotifyClientSecret:s,supportsLocalPlayback:!1}}},he=Object.assign(pe,{setup(n){const i=`http://${window.location.host}/api/spotify/callback`;return(s,o)=>(l(),p("div",V,[e("div",M,[e("div",R,[A,e("div",D,[d(e("input",{onChange:o[0]||(o[0]=(...t)=>s.changeShowNewsTab&&s.changeShowNewsTab(...t)),"onUpdate:modelValue":o[1]||(o[1]=t=>c(showNewsTab)?showNewsTab.value=t:null),type:"checkbox",id:"checkbox",name:"",value:""},null,544),[[u,s.showNewsTab]]),O]),e("div",U,[d(e("input",{onChange:o[2]||(o[2]=(...t)=>s.changeShowSportsTab&&s.changeShowSportsTab(...t)),"onUpdate:modelValue":o[3]||(o[3]=t=>c(showSportsTab)?showSportsTab.value=t:null),type:"checkbox",id:"checkbox2",name:"",value:""},null,544),[[u,s.showSportsTab]]),x])]),e("div",F,[H,e("div",{class:w(["checkbox",{disabled:!s.supportsLocalPlayback}])},[d(e("input",{onChange:o[4]||(o[4]=(...t)=>s.changePlayInBrowser&&s.changePlayInBrowser(...t)),disabled:!s.supportsLocalPlayback,"onUpdate:modelValue":o[5]||(o[5]=t=>c(playInBrowser)?playInBrowser.value=t:null),type:"checkbox",id:"checkbox3",name:"",value:""},null,40,j),[[u,s.playInBrowser]]),s.supportsLocalPlayback?(l(),p("label",E,q)):(l(),p("label",z,K))],2)]),e("div",Q,[W,e("div",X,[e("button",{onClick:o[6]||(o[6]=t=>s.$router.push("/export"))},"Save"),e("button",{onClick:o[7]||(o[7]=t=>s.$router.push("/import"))},"Restore")])]),e("div",Y,[Z,e("details",null,[ee,te,se,oe,e("p",null,[m("4) Edit the settings: set the redirect url to "),e("a",{href:i},_(i))]),ae]),e("div",ne,[le,d(e("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=t=>c(spotifyClientId)?spotifyClientId.value=t:null)},null,512),[[b,s.spotifyClientId]])]),e("div",ie,[re,d(e("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=t=>c(spotifyClientSecret)?spotifyClientSecret.value=t:null)},null,512),[[b,s.spotifyClientSecret]])]),e("div",de,[e("button",{onClick:o[10]||(o[10]=(...t)=>s.saveSpotify&&s.saveSpotify(...t))},"save"),e("button",{onClick:o[11]||(o[11]=(...t)=>s.saveRestrictedMode&&s.saveRestrictedMode(...t)),class:"restrictedMode"},"enter restricted mode")])])]),e("div",null,[ce,(l(),f(S,{key:s.themeSelected},{default:k(()=>[(l(!0),p(T,null,C(s.themes,(t,h)=>(l(),f(g,{onSelected:s.updateThemes,key:h,name:t},null,8,["onSelected","name"]))),128))]),_:1}))])]))}}),fe=y(he,[["__scopeId","data-v-0f4d79ae"]]);export{fe as default};
