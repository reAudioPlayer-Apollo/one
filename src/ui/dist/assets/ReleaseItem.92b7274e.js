import{F as I,T as k,a as $}from"./song.91ac9cb9.js";import{a as q,A as T}from"./AlbumHeader.2e910121.js";import{B as b,o as n,c as d,g as m,F as y,h as w,f as A,a as l,t as u,_ as S,i as x,C as h,w as B,u as D,G as E,e as N,d as j}from"./index.aa38e9d2.js";const F=l("hr",null,null,-1),R=b({__name:"Playlist",props:{songs:{type:Array,required:!0}},setup(t){return(o,e)=>(n(),d(y,null,[m(q),F,(n(!0),d(y,null,w(t.songs,(s,i)=>(n(),A(T,{onAdd:c=>o.$emit("add",i),key:s.source,added:s.added,index:i,cover:s.cover,artist:s.artists.join(", "),title:s.title,source:s.src,preview:s.source},null,8,["onAdd","added","index","cover","artist","title","source","preview"]))),128))],64))}}),V={class:"padding-20 playlisteditor"},O=["src"],P={class:"details"},G={class:"detailswrapper"},H=["onClick"],L=b({__name:"TrackInfo",props:{title:{type:String,required:!0},subtitle:{type:String,required:!0},cover:{type:String,required:!0},icons:{type:Array,required:!0}},setup(t){return(o,e)=>(n(),d("div",V,[l("img",{class:"cover",src:t.cover},null,8,O),l("div",P,[l("div",G,[(n(!0),d(y,null,w(t.icons,(s,i)=>(n(),d("span",{key:i,class:"material-icons-round",onClick:s.onClick},u(s.name),9,H))),128))]),l("h1",null,u(t.title),1),l("h5",null,u(t.subtitle),1)])]))}});const z=S(L,[["__scopeId","data-v-7837b826"]]),J=l("br",null,null,-1),K=b({__name:"ImportSpotifyAlbum",props:{album:{type:Object,required:!0}},setup(t,{expose:o}){const e=t,s=x(),i=[{name:"playlist",type:"dropdown",required:!0,value:null,options:s.playlists.map(a=>({label:a.name,value:a.id}))}],c=h(null),_=h(null),r=h([]),p=async()=>{if(c.value.load(),r.value.length==0){const a=await fetch(`/api/spotify/albums/${e.album.id}`);r.value=await a.json()}c.value.show()},f=()=>{console.log(r.value);const a=new CustomEvent("player.play",{detail:{artist:e.album.artist,title:e.album.title,source:e.album.href}});window.dispatchEvent(a)},g=async a=>{await $(_.value.toObject().playlist,r.value[a]),r.value[a].added=!0},C=()=>{r.value.forEach((a,v)=>{g(v)})};return o({show:p}),(a,v)=>(n(),A(k,{ref_key:"modal",ref:c,name:"Import Album",submitName:"Add All",onSubmit:C,onClose:v[0]||(v[0]=Y=>a.$emit("close"))},{default:B(()=>[m(z,{title:t.album.title,subtitle:t.album.artist,cover:t.album.cover,icons:[{name:"share",onClick:()=>D(E)(t.album.href)},{name:"play_arrow",onClick:f}]},null,8,["title","subtitle","cover","icons"]),m(I,{ref_key:"form",ref:_,options:i},null,512),J,m(R,{songs:r.value,onAdd:g},null,8,["songs"])]),_:1},512))}});const M={name:"ReleaseItem",components:{AddAlbumToPlaylist:K},methods:{redirect(){this.$refs.addAlbum.show()}},props:{cover:String,title:String,artist:String,href:String,releaseDate:String}},Q={class:"wrapper drop-shadow-md"},U=["src"],W={key:0,class:"note"};function X(t,o,e,s,i,c){var r,p;const _=N("add-album-to-playlist");return n(),d("div",Q,[m(_,{id:(r=this.href)==null?void 0:r.replace("https://open.spotify.com/album/",""),cover:e.cover,title:e.title,artist:e.artist,href:e.href,ref:"addAlbum",album:{id:(p=this.href)==null?void 0:p.replace("https://open.spotify.com/album/",""),title:this.title,artist:this.artist,cover:this.cover,href:this.href}},null,8,["id","cover","title","artist","href","album"]),l("div",{class:"item",onClick:o[0]||(o[0]=(...f)=>c.redirect&&c.redirect(...f))},[l("img",{src:e.cover},null,8,U),l("h4",null,u(e.title),1),l("p",null,u(e.artist),1),e.releaseDate?(n(),d("p",W,"Released on "+u(e.releaseDate),1)):j("",!0)])])}const se=S(M,[["render",X],["__scopeId","data-v-df09858d"]]);export{se as I,K as _};
