import{F as A}from"./FullShelf-77f6f5f1.js";import{_ as w,C,K as k,e as o,f as n,w as y,o as s,g as b,a as r,t as m,c as _,d as f,L as B,F as D,j as S}from"./index-286d536d.js";import{C as R}from"./CollectionHeader-0134ecc9.js";const x={name:"ReleaseItem",components:{Card:C,AddAlbumToPlaylist:k},methods:{redirect(){this.$refs.addAlbum.show()}},props:{cover:String,title:String,artist:String,href:String,releaseDate:String}},N=["src"],F={key:0,class:"note"};function j(u,a,e,c,l,h){const g=o("add-album-to-playlist"),v=o("Card");return s(),n(v,{class:"wrapper","with-hover":""},{default:y(()=>{var d,i;return[b(g,{id:(d=this.href)==null?void 0:d.replace("https://open.spotify.com/album/",""),ref:"addAlbum",album:{id:(i=this.href)==null?void 0:i.replace("https://open.spotify.com/album/",""),title:this.title,artist:this.artist,cover:this.cover,href:this.href,releaseDate:this.releaseDate},artist:e.artist,cover:e.cover,href:e.href,title:e.title},null,8,["id","album","artist","cover","href","title"]),r("div",{class:"item",onClick:a[0]||(a[0]=(...p)=>h.redirect&&h.redirect(...p))},[r("img",{src:e.cover},null,8,N),r("h4",null,m(e.title),1),r("p",null,m(e.artist),1),e.releaseDate?(s(),_("p",F,"Released on "+m(e.releaseDate),1)):f("",!0)])]}),_:1})}const L=w(x,[["render",j],["__scopeId","data-v-448c5702"]]);const H={components:{Card:C,AddAlbumToPlaylist:k},name:"ReleaseItemBig",methods:{redirect(){this.$refs.addAlbum.show()}},props:{cover:String,title:String,artist:String,href:String,releaseDate:String}},V=["src"],M={class:"wrapper"},O={key:0,class:"note"};function P(u,a,e,c,l,h){const g=o("add-album-to-playlist"),v=o("Card");return s(),n(v,{class:"itemBig","with-hover":""},{default:y(()=>{var d,i;return[b(g,{id:(d=this.href)==null?void 0:d.replace("https://open.spotify.com/album/",""),ref:"addAlbum",album:{id:(i=this.href)==null?void 0:i.replace("https://open.spotify.com/album/",""),title:this.title,artist:this.artist,cover:this.cover,href:this.href,releaseDate:this.releaseDate},artist:e.artist,cover:e.cover,href:e.href,title:e.title},null,8,["id","album","artist","cover","href","title"]),r("div",{class:"item",onClick:a[0]||(a[0]=(...p)=>h.redirect&&h.redirect(...p))},[r("img",{src:e.cover},null,8,V),r("div",M,[r("h4",null,m(e.title),1),r("p",null,m(e.artist),1),e.releaseDate?(s(),_("p",O,"Released on "+m(e.releaseDate),1)):f("",!0)])])]}),_:1})}const T=w(H,[["render",P],["__scopeId","data-v-a069bd39"]]),Y={components:{Loader:B,CollectionHeader:R,FullShelf:A,Item:L,ItemBig:T},name:"Releases",data(){return{outSoon:[],outNow:[],outAlready:[],loading:!0}},mounted(){this.loading=!0,fetch("/api/releases").then(u=>u.json()).then(u=>{const a=new Date;for(const e of u){const c=new Date(e.releaseDate);a<c?this.outSoon.push(e):a.getMonth()==c.getMonth()&&a.getDate()==c.getDate()&&a.getFullYear()==c.getFullYear()?this.outNow.push(e):this.outAlready.push(e)}this.loading=!1})}};const E={key:0,class:"fill-page"},K={class:"padding-20"},q={class:"releases"};function z(u,a,e,c,l,h){const g=o("Loader"),v=o("CollectionHeader"),d=o("item-big"),i=o("full-shelf"),p=o("ItemBig"),I=o("Item");return s(),_(D,null,[l.loading?(s(),_("div",E,[b(g)])):f("",!0),r("div",K,[b(v),r("div",q,[l.outSoon.length?(s(),n(i,{key:0,heading:"Out Soon"},{default:y(()=>[(s(!0),_(D,null,S(l.outSoon,t=>(s(),n(d,{key:t.url,artist:t.artists.join(", "),cover:t.cover,href:t.url,releaseDate:t.releaseDate,title:t.title},null,8,["artist","cover","href","releaseDate","title"]))),128))]),_:1})):f("",!0),l.outNow.length?(s(),n(i,{key:1,heading:"Out Now"},{default:y(()=>[(s(!0),_(D,null,S(l.outNow,t=>(s(),n(p,{key:t.url,artist:t.artists.join(", "),cover:t.cover,href:t.url,releaseDate:t.releaseDate,title:t.title},null,8,["artist","cover","href","releaseDate","title"]))),128))]),_:1})):f("",!0),l.outAlready.length?(s(),n(i,{key:2,heading:"Releases"},{default:y(()=>[(s(!0),_(D,null,S(l.outAlready,t=>(s(),n(I,{key:t.url,artist:t.artists.join(", "),cover:t.cover,href:t.url,releaseDate:t.releaseDate,title:t.title},null,8,["artist","cover","href","releaseDate","title"]))),128))]),_:1})):f("",!0)])])],64)}const U=w(Y,[["render",z],["__scopeId","data-v-08907f69"]]);export{U as default};
