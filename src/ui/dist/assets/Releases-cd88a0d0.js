import{F as S}from"./FullShelf-beafbf41.js";import{I}from"./ReleaseItem-e8bff47c.js";import{_ as B}from"./ImportSpotifyAlbum.vue_vue_type_script_setup_true_lang-73cbbbdd.js";import{C as A}from"./Card-1541fb70.js";import{_ as w,e as a,o,f as i,w as m,g as k,a as l,t as D,c as u,d as _,P as N,F as f,i as b}from"./index-63840441.js";import{C as x}from"./CollectionHeader-4610122c.js";import"./Form-c1908040.js";import"./IconButton-fd8d7fa0.js";import"./Dropdown-685e63fc.js";import"./Playlist-e4bf779d.js";import"./PlaylistHeader-468304f4.js";import"./ExternalEntry-25c642db.js";import"./song-6bfd6160.js";const R={components:{Card:A,AddAlbumToPlaylist:B},name:"ReleaseItemBig",methods:{redirect(){this.$refs.addAlbum.show()}},props:{cover:String,title:String,artist:String,href:String,releaseDate:String}},F=["src"],j={class:"wrapper"},L={key:0,class:"note"};function H(d,r,t,n,s,p){const g=a("add-album-to-playlist"),v=a("Card");return o(),i(v,{class:"itemBig","with-hover":""},{default:m(()=>{var h,c;return[k(g,{id:(h=this.href)==null?void 0:h.replace("https://open.spotify.com/album/",""),ref:"addAlbum",album:{id:(c=this.href)==null?void 0:c.replace("https://open.spotify.com/album/",""),title:this.title,artist:this.artist,cover:this.cover,href:this.href,releaseDate:this.releaseDate},artist:t.artist,cover:t.cover,href:t.href,title:t.title},null,8,["id","album","artist","cover","href","title"]),l("div",{class:"item",onClick:r[0]||(r[0]=(...y)=>p.redirect&&p.redirect(...y))},[l("img",{src:t.cover},null,8,F),l("div",j,[l("h4",null,D(t.title),1),l("p",null,D(t.artist),1),t.releaseDate?(o(),u("p",L,"Released on "+D(t.releaseDate),1)):_("",!0)])])]}),_:1})}const V=w(R,[["render",H],["__scopeId","data-v-d9a455f1"]]);const M={components:{Loader:N,CollectionHeader:x,FullShelf:S,Item:I,ItemBig:V},name:"Releases",data(){return{outSoon:[],outNow:[],outAlready:[],loading:!0}},mounted(){this.loading=!0,fetch("/api/releases").then(d=>d.json()).then(d=>{const r=new Date;for(const t of d){const n=new Date(t.releaseDate);r<n?this.outSoon.push(t):r.getMonth()==n.getMonth()&&r.getDate()==n.getDate()&&r.getFullYear()==n.getFullYear()?this.outNow.push(t):this.outAlready.push(t)}this.loading=!1})}},O={key:0,class:"fill-page"},P={class:"padding-20"},Y={class:"releases"};function E(d,r,t,n,s,p){const g=a("Loader"),v=a("CollectionHeader"),h=a("item-big"),c=a("full-shelf"),y=a("ItemBig"),C=a("Item");return o(),u(f,null,[s.loading?(o(),u("div",O,[k(g)])):_("",!0),l("div",P,[k(v),l("div",Y,[s.outSoon.length?(o(),i(c,{key:0,heading:"Out Soon"},{default:m(()=>[(o(!0),u(f,null,b(s.outSoon,e=>(o(),i(h,{key:e.url,artist:e.artists.join(", "),cover:e.cover,href:e.url,releaseDate:e.releaseDate,title:e.title},null,8,["artist","cover","href","releaseDate","title"]))),128))]),_:1})):_("",!0),s.outNow.length?(o(),i(c,{key:1,heading:"Out Now"},{default:m(()=>[(o(!0),u(f,null,b(s.outNow,e=>(o(),i(y,{key:e.url,artist:e.artists.join(", "),cover:e.cover,href:e.url,releaseDate:e.releaseDate,title:e.title},null,8,["artist","cover","href","releaseDate","title"]))),128))]),_:1})):_("",!0),s.outAlready.length?(o(),i(c,{key:2,heading:"Releases"},{default:m(()=>[(o(!0),u(f,null,b(s.outAlready,e=>(o(),i(C,{key:e.url,artist:e.artists.join(", "),cover:e.cover,href:e.url,releaseDate:e.releaseDate,title:e.title},null,8,["artist","cover","href","releaseDate","title"]))),128))]),_:1})):_("",!0)])])],64)}const te=w(M,[["render",E],["__scopeId","data-v-164dabf1"]]);export{te as default};
