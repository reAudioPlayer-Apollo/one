import{s as w,_ as x,e as d,l as C,m as y,o as r,c as u,r as g,g as o,w as n,b as a,t as _,f as p,d as S,F as b,i as B}from"./index.fc9bdca8.js";const $={name:"SongCtx",props:{liked:Boolean,isAutoPlaylist:Boolean,src:String,artist:String,title:String},computed:w({playlists:"playlists"}),methods:{preview(){const e=new CustomEvent("player.play",{detail:{title:this.title,artist:this.artist,source:this.src}});window.dispatchEvent(e),this.$refs.contextmenu.hide()},hide(){this.$refs.contextmenu.hide()},show(e){const t=this.$refs.box.getBoundingClientRect(),l={top:t.height+t.top+window.scrollY,left:t.width+t.left+window.scrollX};this.$refs.contextmenu.show(l),e==null||e.stopPropagation()},like(){this.$emit("like")},remove(){this.$emit("remove")},addto(e){if(e==="new"){fetch("/api/playlists/new").then(t=>t.text()).then(t=>{this.$emit("addto",Number(t.replace("/playlist/","")))});return}this.$emit("addto",e)},download(){this.$emit("download")},update(){this.$emit("update")}}},D={ref:"box"};function A(e,t,l,N,P,i){const s=d("v-contextmenu-item"),c=d("v-contextmenu-divider"),h=d("v-contextmenu-submenu"),f=d("v-contextmenu"),v=C("contextmenu");return y((r(),u("div",D,[g(e.$slots,"default"),o(f,{ref:"contextmenu"},{default:n(()=>[o(s,{onClick:i.preview},{default:n(()=>[a("Preview")]),_:1},8,["onClick"]),o(c),o(s,{onClick:i.like},{default:n(()=>[a(_((l.liked?"Remove from":"Save to")+" your Liked Songs"),1)]),_:1},8,["onClick"]),l.isAutoPlaylist?S("",!0):(r(),p(s,{key:0,onClick:i.remove},{default:n(()=>[a("Remove from this playlist")]),_:1},8,["onClick"])),o(h,{title:"Add to playlist"},{default:n(()=>[o(s,{onClick:t[0]||(t[0]=()=>i.addto("new"))},{default:n(()=>[a("Add to new playlist")]),_:1}),o(c),(r(!0),u(b,null,B(e.playlists,(k,m)=>(r(),p(s,{key:m,onClick:()=>i.addto(m)},{default:n(()=>[a(_(k.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),o(c),o(s,{onClick:i.update},{default:n(()=>[a("Update Metadata")]),_:1},8,["onClick"]),o(c),o(s,{onClick:i.download},{default:n(()=>[a("Download")]),_:1},8,["onClick"])]),_:1},512)])),[[v,void 0,"contextmenu"]])}const R=x($,[["render",A]]);export{R as S};
