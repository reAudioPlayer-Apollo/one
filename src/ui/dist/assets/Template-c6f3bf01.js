import{n as Z,B as ee,j as te,A as S,q as C,D as M,E as le,G as se,o as d,c as P,u as l,f as g,H as ae,d as v,a as o,g as m,I as O,J as L,h as oe,t as $,w as I,b as j,C as q,T as ie,K as ne,N as re,F as de,l as ue,m as ce,_ as me}from"./index-9b66f4b7.js";import{F as U}from"./FactCard-958d9c90.js";import{P as pe}from"./PlaylistEntry-aac3c7b3.js";import{_ as ve,a as fe,F as ye,E as R,M as D,d as xe}from"./EditPlaylist.vue_vue_type_script_setup_true_lang-c2ff4308.js";import{P as he}from"./PlaylistHeader-2908cf18.js";const _e=a=>{const{search:u,artist:c,title:x,album:f,order:t,sort:p}=a;return u.length||c.length||x.length||f.length||t!="asc"||p!="index"},ge=(a,u)=>{const{search:c,artist:x,title:f,album:t,sort:p}=u;return a.map(n=>{const y=c.length?n.title.toLowerCase().includes(c.toLowerCase())||n.artist.toLowerCase().includes(c.toLowerCase()):!0,b=x.length?x.includes(n.artist):!0,h=f.length?f.includes(n.title):!0,A=t.length?t.includes(n.album):!0;return{...n,show:y&&b&&h&&A,index:a.indexOf(n)}}).sort((n,y)=>{const b=n[p],h=y[p];return b<h?-1:b>h?1:0})},be=a=>a.map(u=>({label:u.title,value:u.title})),we=a=>a.map(u=>({label:u.album,value:u.album})),Ve=a=>{const u=new Set;for(const c of a)for(const x of c.artist.split(", "))u.add(x);return Array.from(u).sort().map(c=>({label:c,value:c}))},T=a=>(ue("data-v-edd962e1"),a=a(),ce(),a),Pe={class:"playlist p-4"},ke={key:2,class:"fill-page"},Ce=T(()=>o("h2",{class:"text-2xl text-center error"},"Playlist not found",-1)),Se=[Ce],$e={key:3,class:"wrap"},Ie={class:"track__data"},Te={class:"upper relative"},Ae={class:"track__info__details flex flex-col justify-end"},Fe={class:"trac__info__details__normal"},Me={key:0,class:"flex flex-row items-center gap-2 playlist-type"},Ue={class:"material-symbols-rounded"},De={class:"flex flew-row items-center"},Ee={class:"font-black text-5xl ml-4 w-full flex-1"},Be={class:"text-muted"},He={class:"features flex flex-row gap-4 pt-4 pb-2 overflow-x-auto"},Ne=T(()=>o("span",{class:"text-muted"},"Add a Song",-1)),Oe=T(()=>o("span",{class:"text-muted"},"Edit This Playlist",-1)),Le={key:0,class:"filters mt-4"},je=T(()=>o("hr",{class:"mb-4"},null,-1)),qe={key:1,class:"items"},Re=Z({__name:"Template",props:{id:{type:String,required:!0},coverIcon:{type:String,required:!1}},emits:["rearrange"],setup(a,{emit:u}){var B,H,N;const c=a,x=ee(),f=te(),t=S(()=>f.getPlaylistById(c.id)),p=C(((B=t.value)==null?void 0:B.songs)??[]),n=C(((H=t.value)==null?void 0:H.name.trim())??""),y=C(((N=t.value)==null?void 0:N.description.trim())??""),b=C(!0),h=C(null),A=()=>({sort:"index",order:"asc",search:"",title:[],artist:[],album:[]}),i=C(null),E=()=>{i.value={...A()}};E();const z=[{value:"title",label:"Title",icon:"title"},{value:"artist",label:"Artist",icon:"person"},{value:"album",label:"Album",icon:"album"},{value:"duration",label:"Duration",icon:"timer"},{value:"index",label:"Added",icon:"date_range"}],G=S(()=>{let r=0,e=!1;if(!t.value.songs.length)return"";for(const V of t.value.songs){e=e||V.duration<=0;const Y=V.duration<=0?3*60:V.duration;r+=Y}const w=r,_=Math.floor(w/60),k=Math.floor(_/60),s=e?"about ":"";return k?s+`${k} hr ${_-k*60} min`:_?s+`${_} min ${w-_*60} sec`:s+r+" sec"}),J=r=>{const e=r.moved;e&&u("rearrange",e.oldIndex,e.newIndex)};M([i,t],()=>{t.value&&F()},{deep:!0});const F=()=>{p.value=ge(t.value.songs??[],i.value)};F(),M(t,()=>{var r,e;n.value=((r=t.value)==null?void 0:r.name.trim())??"",y.value=((e=t.value)==null?void 0:e.description.trim())??"",F()}),M([n,y],()=>{var e,w;if(n.value===((e=t.value)==null?void 0:e.name)&&y.value===((w=t.value)==null?void 0:w.description))return;const r={...t.value,name:n.value,description:y.value};le(r),f.fetchPlaylists()});const K=(r,e)=>{b.value=r},W=S(()=>t.value.type==="classic"),Q=S(()=>["classic","smart"].includes(t.value.type)),X=S(()=>t.value.type==="classic");return(r,e)=>{var _,k;const w=se("observe-visibility");return d(),P(de,null,[l(t)?(d(),g(ae,{key:0,placeholder:a.coverIcon,src:l(t).cover},null,8,["placeholder","src"])):v("",!0),o("div",Pe,[m(ve,{ref:"addSongPopup",onUpdate:e[0]||(e[0]=s=>l(f).fetchPlaylists())},null,512),l(t)?(d(),g(fe,{key:0,ref:"editPlaylistPopup",playlist:l(t),onClose:e[1]||(e[1]=s=>l(f).fetchPlaylists())},null,8,["playlist"])):v("",!0),l(t)?(d(),g(ye,{key:1,ref:"fixedHeading",class:O({hidden:b.value}),title:l(t).name,onLoadPlaylist:e[2]||(e[2]=s=>l(x).loadPlaylist(a.id))},null,8,["class","title"])):v("",!0),l(t)?(d(),P("div",$e,[o("div",Ie,[L((d(),P("div",Te,[m(oe,{placeholder:a.coverIcon,src:l(t).cover,class:"max-w-sm rounded-xl",type:"playlist"},null,8,["placeholder","src"]),o("div",Ae,[o("div",Fe,[l(t).type!="classic"?(d(),P("div",Me,[o("span",Ue,$(l(t).type=="smart"?"neurology":"bolt"),1),o("span",null,$(l(t).type)+" Playlist",1)])):v("",!0),o("div",De,[o("span",{class:"text-5xl cursor-pointer material-symbols-rounded ms-fill my-auto",onClick:e[3]||(e[3]=s=>l(x).loadPlaylist(a.id))}," play_circle "),o("h1",Ee,[m(R,{modelValue:n.value,"onUpdate:modelValue":e[4]||(e[4]=s=>n.value=s)},{default:I(()=>[j($(l(t).name),1)]),_:1},8,["modelValue"])])]),o("p",Be,[m(R,{modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=s=>y.value=s),placeholder:"No description"},{default:I(()=>[j($(l(t).description),1)]),_:1},8,["modelValue"])])]),o("div",He,[m(U,{"primary-text":(_=l(t).songs)==null?void 0:_.length,"secondary-text":((k=l(t).songs)==null?void 0:k.length)===1?"Song":"Songs",class:"w-full"},null,8,["primary-text","secondary-text"]),m(U,{"primary-text":l(G),class:"w-full","secondary-text":"Total Duration"},null,8,["primary-text"]),l(t).plays?(d(),g(U,{key:0,"primary-text":l(t).plays,class:"w-full","secondary-text":"Plays"},null,8,["primary-text"])):v("",!0),l(W)?(d(),g(q,{key:1,class:"p-4 w-1/2 flex flex-col items-center justify-center"},{default:I(()=>[o("span",{id:"addToPlaylist",class:"material-symbols-rounded ms-fill",onClick:e[6]||(e[6]=s=>r.$refs.addSongPopup.show())},"add_circle"),Ne]),_:1})):v("",!0),l(Q)?(d(),g(q,{key:2,class:"p-4 w-1/2 flex flex-col items-center justify-center"},{default:I(()=>[o("span",{id:"addToPlaylist",class:"material-symbols-rounded ms-fill",onClick:e[7]||(e[7]=s=>r.$refs.editPlaylistPopup.show())},"edit"),Oe]),_:1})):v("",!0)]),l(t).songs?(d(),P("div",Le,[m(ie,{modelValue:i.value.search,"onUpdate:modelValue":e[8]||(e[8]=s=>i.value.search=s),icon:"search",placeholder:"Search"},null,8,["modelValue"]),m(D,{modelValue:i.value.title,"onUpdate:modelValue":e[9]||(e[9]=s=>i.value.title=s),options:l(be)(l(t).songs),class:"multiselect",icon:"title",placeholder:"Title"},null,8,["modelValue","options"]),m(D,{modelValue:i.value.artist,"onUpdate:modelValue":e[10]||(e[10]=s=>i.value.artist=s),options:l(Ve)(l(t).songs),class:"multiselect",icon:"person",placeholder:"Artist"},null,8,["modelValue","options"]),m(D,{modelValue:i.value.album,"onUpdate:modelValue":e[11]||(e[11]=s=>i.value.album=s),options:l(we)(l(t).songs),class:"multiselect",icon:"album",placeholder:"Album"},null,8,["modelValue","options"]),m(ne,{modelValue:i.value.sort,"onUpdate:modelValue":e[12]||(e[12]=s=>i.value.sort=s),options:z,icon:"filter_list"},null,8,["modelValue"]),o("span",{class:"cursor-pointer material-symbols-rounded ms-wght-100 text-5xl",onClick:e[13]||(e[13]=s=>i.value.order=i.value.order=="asc"?"desc":"asc")},$(i.value.order=="asc"?"arrow_drop_up":"arrow_drop_down"),1),o("span",{class:"cursor-pointer material-symbols-rounded ms-wght-300 text-3xl mr-2",onClick:E}," delete_sweep ")])):v("",!0)])])),[[w,K]]),p.value.length?(d(),g(he,{key:0,class:"hideIfMobile mt-8","with-album":"","with-more":""})):v("",!0),je,p.value.length?(d(),P("div",qe,[p.value.length?(d(),g(l(xe),{key:a.id,modelValue:p.value,"onUpdate:modelValue":e[15]||(e[15]=s=>p.value=s),class:O([i.value.order=="asc"?"flex-col":"flex-col-reverse","flex"]),disabled:l(_e)(i.value)||!l(X),"item-key":"id",onChange:J},{item:I(({element:s})=>[L(m(pe,{index:l(t).songs.findIndex(V=>V.source==s.source),"playlist-id":a.id,selected:h.value==s.id,song:s,"with-album":"","with-cover":"","with-more":"",onClick:V=>h.value==s.id?h.value=-1:h.value=s.id,onUpdate:e[14]||(e[14]=V=>l(f).fetchPlaylists())},null,8,["index","playlist-id","selected","song","onClick"]),[[re,s.show]])]),_:1},8,["modelValue","class","disabled"])):v("",!0)])):v("",!0)])])):(d(),P("div",ke,Se))])],64)}}});const Qe=me(Re,[["__scopeId","data-v-edd962e1"]]);export{Qe as T};
