import{l as I,m as f,y as S,aT as j,o as s,c as m,_ as T,f as n,w as $,a as l,t as _,d as i,H as F,z as H,g as x,C as L,D as K,b as U,u as h,F as C,T as O,h as N,bP as R,bR as P,K as A,j as W,k as J,bN as G,O as Q,bS as X,J as Y,bT as Z}from"./index-2f307979.js";import{d as ee,k as ae,l as te,m as se}from"./song-35cb7ed4.js";import{C as B}from"./Card-4cd4dde1.js";import{E as le}from"./ExternalEntry-a350f6e8.js";import{F as k}from"./FactCard-95aa9eab.js";import{_ as oe}from"./EditSong.vue_vue_type_script_setup_true_lang-48a6931d.js";import"./Form-54e5fa7a.js";import"./IconButton-8caddf58.js";import"./Dropdown-9f6e6931.js";const ne=["aria-valuemax","aria-valuenow"],re=I({__name:"ProgressCircle",props:{max:{type:Number,required:!1,default:100},modelValue:{type:Number,required:!1,default:0},displayValue:{type:String,required:!0}},setup(r){const v=r,d=f(null),g=()=>{if(d.value){const u=v.modelValue/v.max*100;d.value.style.setProperty("--progress",`${u}%`),d.value.innerHTML=v.displayValue}};S(v,g,{deep:!0});const o=()=>{d.value&&(d.value.style.height=d.value.offsetWidth+"px")};return j(()=>{o(),g()}),window.addEventListener("resize",o),(u,y)=>(s(),m("div",{ref_key:"radialProgress",ref:d,"aria-valuemax":r.max,"aria-valuenow":r.modelValue,"aria-valuemin":"0",class:"radialProgress",role:"progressbar"},null,8,ne))}});const D=T(re,[["__scopeId","data-v-2329319f"]]),ue={class:"material-symbols-rounded ms-fill"},ie={key:0,class:"text-muted"},de=I({__name:"ButtonCard",props:{icon:{type:String,required:!0},label:{type:String,required:!1}},setup(r){return(v,d)=>(s(),n(B,{class:"p-4 flex flex-col w-full items-center justify-center"},{default:$(()=>[l("span",ue,_(r.icon),1),r.label?(s(),m("span",ie,_(r.label),1)):i("",!0)]),_:1}))}});const M=T(de,[["__scopeId","data-v-1b7199f2"]]),E=r=>(W("data-v-aa0b799d"),r=r(),J(),r),ce={class:"track p-4"},pe={key:2},me={class:"track__data"},_e={class:"upper"},ve={class:"trac__info__details__normal"},fe={class:"text-secondary my-0 text-2xl font-bold"},ye={class:"text-muted text-base ml-2 font-light"},xe={class:"flex flew-row items-center"},he={class:"font-black text-5xl ml-4"},ke={key:0,class:"features flex flex-row gap-4 mt-4 overflow-x-auto"},ge={class:"spotify-infos mt-4"},be={class:"meta items-center"},we={class:"text-muted"},Ce={key:0,class:"material-symbols-rounded ms-fill"},Ve={class:"flex flex-row align-items"},Pe=E(()=>l("span",{class:"material-symbols-rounded ms-fill mr-2"},"local_fire_department",-1)),Se={class:"font-bold"},$e={class:"relative w-full mt-4"},Be={class:"spotify__features__circles"},Ie={class:"text-muted mb-0 text-center text-sm capitalize flex justify-center"},Te={class:"material-symbols-rounded mr-2"},Ue=E(()=>l("h2",{class:"!text-left"},"Similar Songs",-1)),Ne=I({__name:"Track",setup(r){const v=G(),d=F(),g=H(()=>v.params.hash),o=f(null),u=f(null),y=f("url"),e=f(null),b=f([]),V=f([]),q={acousticness:"piano",danceability:"nightlife",energy:"electric_bolt",happiness:"mood",instrumentalness:"mic_off",liveness:"groups_2",speechiness:"mic",loudness:"volume_up"},w=async(c=null)=>{o.value=null,e.value=null,b.value=[],o.value=await ae(g.value),window.document.title=`${o.value.title} - reAudioPlayer One`,e.value=await te(o.value.id,!!c,c),u.value=`https://open.spotify.com/track/${e.value.spotify.id}`,y.value="link",b.value=await se(o.value.id),V.value=[];for(let[t,a]of Object.entries(e.value.spotify.features))["key","mode","tempo","duration_ms","time_signature"].includes(t)||typeof a=="number"&&(t=t.replaceAll("_"," "),t=t.replace("valence","happiness"),t==="loudness"&&(a=60+a),V.value.push({key:t,value:a,icon:q[t]}))};j(w),S(v,()=>w(),{deep:!0}),S(u,()=>{var c,t,a,p;if(console.log(P(u.value,"track"),(t=(c=e.value)==null?void 0:c.spotify)==null?void 0:t.id),((p=(a=e.value)==null?void 0:a.spotify)==null?void 0:p.id)==P(u.value,"track")){y.value="link";return}y.value="save"});const z=()=>{if(y.value==="save"){const c=P(u.value,"track");if(!c)return;w(c);return}A(u.value)};return(c,t)=>(s(),m(C,null,[l("div",ce,[o.value?(s(),n(oe,{key:0,ref:"updatePopup",song:o.value,onUpdate:t[0]||(t[0]=()=>w())},null,8,["song"])):i("",!0),o.value?(s(),m("div",pe,[l("div",me,[l("div",_e,[x(L,{src:o.value.cover,class:"max-w-sm rounded-xl"},null,8,["src"]),l("div",{class:K([{"justify-end":e.value,"justify-center":!e.value},"track__info__details flex flex-col"])},[l("div",ve,[l("h3",fe,[U(_(o.value.artist)+" ",1),l("span",ye,"â€¢ "+_(o.value.album),1)]),l("div",xe,[l("span",{class:"text-5xl cursor-pointer material-symbols-rounded ms-fill my-auto",onClick:t[1]||(t[1]=a=>h(d).loadPlaylist("track",o.value.id))}," play_circle "),l("h1",he,_(o.value.title),1)])]),e.value&&e.value.spotify.features?(s(),m(C,{key:0},[e.value&&e.value.spotify.features?(s(),m("div",ke,[e.value?(s(),n(k,{key:0,"primary-text":e.value.spotify.features.key+" "+e.value.spotify.features.mode,class:"w-full","secondary-text":"Key"},null,8,["primary-text"])):i("",!0),e.value?(s(),n(k,{key:1,"primary-text":h(X)(e.value),class:"w-full","secondary-text":"Camelot"},null,8,["primary-text"])):i("",!0),e.value?(s(),n(k,{key:2,"primary-text":Math.round(e.value.spotify.features.tempo),class:"w-full","secondary-text":"BPM"},null,8,["primary-text"])):i("",!0),x(k,{"primary-text":h(Y)(o.value.duration),class:"w-full","secondary-text":"Duration"},null,8,["primary-text"]),e.value?(s(),n(k,{key:3,"primary-text":e.value.plays,class:"w-full","secondary-text":"Plays"},null,8,["primary-text"])):i("",!0),x(M,{icon:"edit",label:"Edit",onClick:t[2]||(t[2]=a=>c.$refs.updatePopup.show())}),x(M,{icon:"download",label:"Download",onClick:t[3]||(t[3]=a=>h(ee)(o.value.id))})])):i("",!0),l("div",ge,[l("div",be,[l("span",we,_(h(Z)(e.value.spotify.releaseDate)),1),e.value.spotify.explicit?(s(),m("span",Ce,"explicit")):i("",!0),l("span",Ve,[Pe,l("span",Se,_(e.value.spotify.popularity),1)])]),x(O,{modelValue:u.value,"onUpdate:modelValue":t[4]||(t[4]=a=>u.value=a),icon:y.value,onClick:z},null,8,["modelValue","icon"])])],64)):i("",!0)],2)])]),l("div",$e,[l("div",Be,[(s(!0),m(C,null,N(V.value,a=>(s(),n(B,{class:"p-2"},{default:$(()=>[a.key==="loudness"?(s(),n(D,{key:0,modelValue:a.value,"onUpdate:modelValue":p=>a.value=p,"display-value":Math.round(-60+a.value)+"dB",class:"circle",max:"60"},null,8,["modelValue","onUpdate:modelValue","display-value"])):(s(),n(D,{key:1,modelValue:a.value,"onUpdate:modelValue":p=>a.value=p,"display-value":Math.round(a.value*100)+"%",class:"circle",max:"1"},null,8,["modelValue","onUpdate:modelValue","display-value"])),l("p",Ie,[l("span",Te,_(a.icon),1),U(" "+_(a.key),1)])]),_:2},1024))),256))])]),b.value.length?(s(),n(B,{key:0,class:"p-4 mt-4"},{default:$(()=>[Ue,(s(!0),m(C,null,N(b.value,(a,p)=>(s(),n(le,{key:p,index:p,song:a,"can-import":"","cannot-add":"","with-album":"","with-cover":""},null,8,["index","song"]))),128))]),_:1})):i("",!0)])):(s(),n(Q,{key:1}))]),o.value?(s(),n(R,{key:0,src:o.value.cover},null,8,["src"])):i("",!0)],64))}});const Ke=T(Ne,[["__scopeId","data-v-aa0b799d"]]);export{Ke as default};
