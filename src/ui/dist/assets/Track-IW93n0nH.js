import{e as U,l as f,B,v as O,o as l,c as x,_ as M,i as n,w as S,a as e,t as v,d as c,C as W,z as J,a5 as Q,A as X,f as Z,a6 as ee,g as _,E as ae,H as te,b as A,u as h,F as P,ag as se,ah as le,ai as oe,aj as ne,K as ue,Y as re,h as ie,ak as de,al as ce,am as pe,an as F,ao as me,L as fe}from"./index-DVF5DQef.js";import{F as b}from"./FactCard-DQAQoYAT.js";import{_ as ve}from"./EditSong.vue_vue_type_script_setup_true_lang-JBSZw6dU.js";import{s as ye}from"./spotify-ESdFeDlR.js";const _e=["aria-valuemax","aria-valuenow"],xe=U({__name:"ProgressCircle",props:{max:{type:Number,required:!1,default:100},modelValue:{type:Number,required:!1,default:0},displayValue:{type:String,required:!0}},setup(p){const m=p,u=f(null),w=()=>{if(u.value){const r=m.modelValue/m.max*100;u.value.style.setProperty("--progress",`${r}%`),u.value.innerHTML=m.displayValue}};B(m,w,{deep:!0});const a=()=>{u.value&&(u.value.style.height=u.value.offsetWidth+"px")};return O(()=>{a(),w()}),window.addEventListener("resize",a),(r,k)=>(l(),x("div",{ref_key:"radialProgress",ref:u,"aria-valuemax":p.max,"aria-valuenow":p.modelValue,"aria-valuemin":"0",class:"radialProgress",role:"progressbar"},null,8,_e))}}),R=M(xe,[["__scopeId","data-v-6e1a8d6b"]]),ke={class:"material-symbols-rounded ms-fill"},he={key:0,class:"text-muted"},ge=U({__name:"ButtonCard",props:{icon:{type:String,required:!0},label:{type:String,required:!1}},setup(p){return(m,u)=>(l(),n(W,{class:"p-4 flex flex-col w-full items-center justify-center"},{default:S(()=>[e("span",ke,v(p.icon),1),p.label?(l(),x("span",he,v(p.label),1)):c("",!0)]),_:1}))}}),K=M(ge,[["__scopeId","data-v-98bfdf17"]]),be={class:"track p-4"},we={key:2},Ce={class:"track__data"},Ve={class:"upper"},$e={class:"track__info__details justify-end flex flex-col"},Pe={class:"trac__info__details__normal"},Be={class:"text-secondary my-0 text-2xl font-bold"},Se={class:"text-muted text-base ml-4 font-light"},Ue={class:"flex flew-row items-center"},Me={class:"font-black text-5xl ml-4"},Ie={class:"features flex flex-row gap-4 pt-4 pb-2 overflow-x-auto"},Le={class:"spotify-infos mt-4"},Ne={class:"meta items-center"},qe={class:"text-muted"},De={key:0,class:"material-symbols-rounded ms-fill"},Te={class:"flex flex-row align-items"},je={class:"font-bold"},ze={class:"relative w-full mt-4"},Ee={class:"spotify__features__circles"},He={class:"text-muted mb-0 text-center text-sm capitalize flex justify-center"},Ae={class:"material-symbols-rounded mr-2"},Fe=U({__name:"Track",setup(p){const m=J(),u=Q(),w=X(()=>m.params.hash),a=f(null),r=f(null),k=f("url"),s=f(null),I=f([]),V=f([]),g=f(!1),Y={acousticness:"piano",danceability:"nightlife",energy:"electric_bolt",happiness:"mood",instrumentalness:"mic_off",liveness:"groups_2",speechiness:"mic",loudness:"volume_up"},C=async(i=null)=>{var t;a.value=null,s.value=null,I.value=[],a.value=await de(w.value),window.document.title=`${a.value.title} - reAudioPlayer One`,s.value=await ce(a.value.id,!!i,i),r.value=`https://open.spotify.com/track/${s.value.spotify.id}`,k.value="link",g.value=((t=s.value.spotify.id)==null?void 0:t.length)==22,I.value=await pe(a.value.id),V.value=[];for(let[d,y]of Object.entries(s.value.spotify.features??{}))["key","mode","tempo","duration_ms","time_signature"].includes(d)||typeof y=="number"&&(d=d.replaceAll("_"," "),d=d.replace("valence","happiness"),d==="loudness"&&(y=60+y),V.value.push({key:d,value:y,icon:Y[d]}))};O(C),B(m,()=>C(),{deep:!0}),B(r,()=>{var i,t;if(((t=(i=s.value)==null?void 0:i.spotify)==null?void 0:t.id)==F(r.value,"track")){k.value="link";return}k.value="save"});const G=()=>{if(k.value==="save"){const i=F(r.value,"track");if(!i)return;C(i);return}me(r.value)};return(i,t)=>{var y,L,N,q,D,T,j,z,E,H;const d=Z("RouterLink");return l(),x(P,null,[a.value?(l(),n(ee,{key:0,src:a.value.cover,class:"-z-10"},null,8,["src"])):c("",!0),e("div",be,[a.value?(l(),n(ve,{key:0,ref:"updatePopup",song:a.value,onUpdate:t[0]||(t[0]=()=>C())},null,8,["song"])):c("",!0),a.value?(l(),x("div",we,[e("div",Ce,[e("div",Ve,[_(ae,{src:a.value.cover,class:"max-w-sm rounded-xl"},null,8,["src"]),e("div",$e,[e("div",Pe,[e("h3",Be,[_(te,{artist:a.value.artist,class:"inline"},null,8,["artist"]),e("span",Se,[_(d,{to:a.value.album.href,class:"linkOnHover"},{default:S(()=>[A(v(a.value.album.name),1)]),_:1},8,["to"])])]),e("div",Ue,[e("span",{class:"text-5xl cursor-pointer material-symbols-rounded ms-fill my-auto",onClick:t[1]||(t[1]=o=>h(u).loadPlaylist("track",a.value.id))}," play_circle "),e("h1",Me,v(a.value.title),1)])]),(y=s.value)!=null&&y.spotify?(l(),x(P,{key:0},[e("div",Ie,[(q=(N=(L=s.value)==null?void 0:L.spotify)==null?void 0:N.features)!=null&&q.key?(l(),n(b,{key:0,"primary-text":s.value.spotify.features.key+" "+s.value.spotify.features.mode,class:"w-full","secondary-text":"Key"},null,8,["primary-text"])):c("",!0),(j=(T=(D=s.value)==null?void 0:D.spotify)==null?void 0:T.features)!=null&&j.key?(l(),n(b,{key:1,"primary-text":h(se)(s.value),class:"w-full","secondary-text":"Camelot"},null,8,["primary-text"])):c("",!0),(H=(E=(z=s.value)==null?void 0:z.spotify)==null?void 0:E.features)!=null&&H.tempo?(l(),n(b,{key:2,"primary-text":Math.round(s.value.spotify.features.tempo),class:"w-full","secondary-text":"BPM"},null,8,["primary-text"])):c("",!0),_(b,{"primary-text":h(le)(a.value.duration),class:"w-full","secondary-text":"Duration"},null,8,["primary-text"]),s.value?(l(),n(b,{key:3,"primary-text":s.value.plays,class:"w-full","secondary-text":"Plays"},null,8,["primary-text"])):c("",!0),_(K,{icon:"edit",label:"Edit",onClick:t[2]||(t[2]=o=>i.$refs.updatePopup.show())}),_(K,{icon:"download",label:"Download",onClick:t[3]||(t[3]=o=>h(oe)(a.value.id))})]),e("div",Le,[e("div",Ne,[e("span",qe,v(h(ne)(s.value.spotify.releaseDate)),1),s.value.spotify.explicit?(l(),x("span",De,"explicit")):c("",!0),e("span",Te,[t[6]||(t[6]=e("span",{class:"material-symbols-rounded ms-fill mr-2"},"local_fire_department",-1)),e("span",je,v(s.value.spotify.popularity),1)])]),_(h(ye),{class:ue([{enabled:g.value},"spotify-enable"]),onClick:t[4]||(t[4]=o=>g.value=!g.value)},null,8,["class"]),g.value?(l(),n(re,{key:0,modelValue:r.value,"onUpdate:modelValue":t[5]||(t[5]=o=>r.value=o),icon:k.value,onClick:G},null,8,["modelValue","icon"])):c("",!0)])],64)):c("",!0)])])]),e("div",ze,[e("div",Ee,[(l(!0),x(P,null,ie(V.value,o=>(l(),n(W,{class:"p-2"},{default:S(()=>[o.key==="loudness"?(l(),n(R,{key:0,modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,"display-value":Math.round(-60+o.value)+"dB",class:"circle",max:60},null,8,["modelValue","onUpdate:modelValue","display-value"])):(l(),n(R,{key:1,modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,"display-value":Math.round(o.value*100)+"%",class:"circle",max:1},null,8,["modelValue","onUpdate:modelValue","display-value"])),e("p",He,[e("span",Ae,v(o.icon),1),A(" "+v(o.key),1)])]),_:2},1024))),256))])])])):(l(),n(fe,{key:1}))])],64)}}}),Ye=M(Fe,[["__scopeId","data-v-96b29a2b"]]);export{Ye as default};
