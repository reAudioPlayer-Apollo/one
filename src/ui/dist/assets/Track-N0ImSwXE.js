import{e as M,l as f,B,v as T,o as a,c as p,_ as E,i as n,w as P,a as l,t as y,d as u,C as U,z as A,a5 as F,A as R,f as K,a6 as O,g as _,E as W,K as I,H as Y,b as L,u as h,F as $,ag as G,ah as J,ai as Q,aj as X,Y as Z,h as N,ak as ee,al as ae,am as te,an as se,ao as j,ap as le,L as oe}from"./index-5KRJtp2M.js";import{F as b}from"./FactCard-BK04Mhk0.js";import{_ as ne}from"./EditSong.vue_vue_type_script_setup_true_lang-DaXDymvP.js";import{s as ue}from"./spotify-Zp-GUgB6.js";const re=["aria-valuemax","aria-valuenow"],ie=M({__name:"ProgressCircle",props:{max:{type:Number,required:!1,default:100},modelValue:{type:Number,required:!1,default:0},displayValue:{type:String,required:!0}},setup(m){const v=m,r=f(null),w=()=>{if(r.value){const i=v.modelValue/v.max*100;r.value.style.setProperty("--progress",`${i}%`),r.value.innerHTML=v.displayValue}};B(v,w,{deep:!0});const o=()=>{r.value&&(r.value.style.height=r.value.offsetWidth+"px")};return T(()=>{o(),w()}),window.addEventListener("resize",o),(i,x)=>(a(),p("div",{ref_key:"radialProgress",ref:r,"aria-valuemax":m.max,"aria-valuenow":m.modelValue,"aria-valuemin":"0",class:"radialProgress",role:"progressbar"},null,8,re))}}),q=E(ie,[["__scopeId","data-v-6e1a8d6b"]]),de={class:"material-symbols-rounded ms-fill"},ce={key:0,class:"text-muted"},pe=M({__name:"ButtonCard",props:{icon:{type:String,required:!0},label:{type:String,required:!1}},setup(m){return(v,r)=>(a(),n(U,{class:"p-4 flex flex-col w-full items-center justify-center"},{default:P(()=>[l("span",de,y(m.icon),1),m.label?(a(),p("span",ce,y(m.label),1)):u("",!0)]),_:1}))}}),D=E(pe,[["__scopeId","data-v-98bfdf17"]]),me={class:"track p-4"},ve={key:2},fe={class:"track__data"},ye={class:"upper"},_e={class:"trac__info__details__normal"},xe={class:"text-secondary my-0 text-2xl font-bold"},ke={class:"text-muted text-base ml-4 font-light"},he={class:"flex flew-row items-center"},ge={class:"font-black text-5xl ml-4"},be={key:0,class:"features flex flex-row gap-4 pt-4 pb-2 overflow-x-auto"},we={class:"spotify-infos mt-4"},Ce={class:"meta items-center"},Ve={class:"text-muted"},$e={key:0,class:"material-symbols-rounded ms-fill"},Pe={class:"flex flex-row align-items"},Se={class:"font-bold"},Be={class:"relative w-full mt-4"},Ue={class:"spotify__features__circles"},Me={class:"text-muted mb-0 text-center text-sm capitalize flex justify-center"},Ee={class:"material-symbols-rounded mr-2"},Ie=M({__name:"Track",setup(m){const v=A(),r=F(),w=R(()=>v.params.hash),o=f(null),i=f(null),x=f("url"),e=f(null),C=f([]),S=f([]),g=f(!1),z={acousticness:"piano",danceability:"nightlife",energy:"electric_bolt",happiness:"mood",instrumentalness:"mic_off",liveness:"groups_2",speechiness:"mic",loudness:"volume_up"},V=async(d=null)=>{var t;o.value=null,e.value=null,C.value=[],o.value=await ae(w.value),window.document.title=`${o.value.title} - reAudioPlayer One`,e.value=await te(o.value.id,!!d,d),i.value=`https://open.spotify.com/track/${e.value.spotify.id}`,x.value="link",g.value=((t=e.value.spotify.id)==null?void 0:t.length)==22,C.value=await se(o.value.id),S.value=[];for(let[c,s]of Object.entries(e.value.spotify.features))["key","mode","tempo","duration_ms","time_signature"].includes(c)||typeof s=="number"&&(c=c.replaceAll("_"," "),c=c.replace("valence","happiness"),c==="loudness"&&(s=60+s),S.value.push({key:c,value:s,icon:z[c]}))};T(V),B(v,()=>V(),{deep:!0}),B(i,()=>{var d,t;if(((t=(d=e.value)==null?void 0:d.spotify)==null?void 0:t.id)==j(i.value,"track")){x.value="link";return}x.value="save"});const H=()=>{if(x.value==="save"){const d=j(i.value,"track");if(!d)return;V(d);return}le(i.value)};return(d,t)=>{const c=K("RouterLink");return a(),p($,null,[o.value?(a(),n(O,{key:0,src:o.value.cover,class:"-z-10"},null,8,["src"])):u("",!0),l("div",me,[o.value?(a(),n(ne,{key:0,ref:"updatePopup",song:o.value,onUpdate:t[0]||(t[0]=()=>V())},null,8,["song"])):u("",!0),o.value?(a(),p("div",ve,[l("div",fe,[l("div",ye,[_(W,{src:o.value.cover,class:"max-w-sm rounded-xl"},null,8,["src"]),l("div",{class:I([{"justify-end":e.value,"justify-center":!e.value},"track__info__details flex flex-col"])},[l("div",_e,[l("h3",xe,[_(Y,{artist:o.value.artist,class:"inline"},null,8,["artist"]),l("span",ke,[_(c,{to:o.value.album.href,class:"linkOnHover"},{default:P(()=>[L(y(o.value.album.name),1)]),_:1},8,["to"])])]),l("div",he,[l("span",{class:"text-5xl cursor-pointer material-symbols-rounded ms-fill my-auto",onClick:t[1]||(t[1]=s=>h(r).loadPlaylist("track",o.value.id))}," play_circle "),l("h1",ge,y(o.value.title),1)])]),e.value&&e.value.spotify.features?(a(),p($,{key:0},[e.value&&e.value.spotify.features?(a(),p("div",be,[e.value?(a(),n(b,{key:0,"primary-text":e.value.spotify.features.key+" "+e.value.spotify.features.mode,class:"w-full","secondary-text":"Key"},null,8,["primary-text"])):u("",!0),e.value?(a(),n(b,{key:1,"primary-text":h(G)(e.value),class:"w-full","secondary-text":"Camelot"},null,8,["primary-text"])):u("",!0),e.value?(a(),n(b,{key:2,"primary-text":Math.round(e.value.spotify.features.tempo),class:"w-full","secondary-text":"BPM"},null,8,["primary-text"])):u("",!0),_(b,{"primary-text":h(J)(o.value.duration),class:"w-full","secondary-text":"Duration"},null,8,["primary-text"]),e.value?(a(),n(b,{key:3,"primary-text":e.value.plays,class:"w-full","secondary-text":"Plays"},null,8,["primary-text"])):u("",!0),_(D,{icon:"edit",label:"Edit",onClick:t[2]||(t[2]=s=>d.$refs.updatePopup.show())}),_(D,{icon:"download",label:"Download",onClick:t[3]||(t[3]=s=>h(Q)(o.value.id))})])):u("",!0),l("div",we,[l("div",Ce,[l("span",Ve,y(h(X)(e.value.spotify.releaseDate)),1),e.value.spotify.explicit?(a(),p("span",$e,"explicit")):u("",!0),l("span",Pe,[t[6]||(t[6]=l("span",{class:"material-symbols-rounded ms-fill mr-2"},"local_fire_department",-1)),l("span",Se,y(e.value.spotify.popularity),1)])]),_(h(ue),{class:I([{enabled:g.value},"spotify-enable"]),onClick:t[4]||(t[4]=s=>g.value=!g.value)},null,8,["class"]),g.value?(a(),n(Z,{key:0,modelValue:i.value,"onUpdate:modelValue":t[5]||(t[5]=s=>i.value=s),icon:x.value,onClick:H},null,8,["modelValue","icon"])):u("",!0)])],64)):u("",!0)],2)])]),l("div",Be,[l("div",Ue,[(a(!0),p($,null,N(S.value,s=>(a(),n(U,{class:"p-2"},{default:P(()=>[s.key==="loudness"?(a(),n(q,{key:0,modelValue:s.value,"onUpdate:modelValue":k=>s.value=k,"display-value":Math.round(-60+s.value)+"dB",class:"circle",max:60},null,8,["modelValue","onUpdate:modelValue","display-value"])):(a(),n(q,{key:1,modelValue:s.value,"onUpdate:modelValue":k=>s.value=k,"display-value":Math.round(s.value*100)+"%",class:"circle",max:1},null,8,["modelValue","onUpdate:modelValue","display-value"])),l("p",Me,[l("span",Ee,y(s.icon),1),L(" "+y(s.key),1)])]),_:2},1024))),256))])]),C.value.length?(a(),n(U,{key:0,class:"p-4 mt-4"},{default:P(()=>[t[7]||(t[7]=l("h2",{class:"!text-left"},"Similar Songs",-1)),(a(!0),p($,null,N(C.value,(s,k)=>(a(),n(ee,{key:k,index:k,song:s,"can-import":"","cannot-add":"","with-album":"","with-cover":""},null,8,["index","song"]))),128))]),_:1})):u("",!0)])):(a(),n(oe,{key:1}))])],64)}}}),De=E(Ie,[["__scopeId","data-v-4d592b47"]]);export{De as default};
