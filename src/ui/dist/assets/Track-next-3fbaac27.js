import{m as B,n as f,z as $,aS as j,o,c,_ as D,H as F,A as H,f as m,d as x,a as e,g as d,h as L,D as q,b as N,t as _,u as w,F as T,T as A,w as b,i as I,bP as U,J as R,k as K,l as O,bM as W,N as J,bQ as Q,bR as G}from"./index-734e511f.js";import{d as X,k as Y,l as Z,m as ee}from"./song-4aa15996.js";import{C as V}from"./Card-8727bcbc.js";import{E as ae}from"./ExternalEntry-8a76d403.js";import{F as C}from"./FactCard-87c469fa.js";import{_ as se}from"./EditSong.vue_vue_type_script_setup_true_lang-75625b12.js";import"./Form-69369dee.js";import"./IconButton-03e5f9fa.js";import"./Dropdown-6d5d0ee9.js";const te=["aria-valuemax","aria-valuenow"],le=B({__name:"ProgressCircle",props:{max:{type:Number,required:!1,default:100},modelValue:{type:Number,required:!1,default:0},displayValue:{type:String,required:!0}},setup(u){const p=u,r=f(null),h=()=>{if(r.value){const n=p.modelValue/p.max*100;r.value.style.setProperty("--progress",`${n}%`),r.value.innerHTML=p.displayValue}};$(p,h,{deep:!0});const t=()=>{r.value&&(r.value.style.height=r.value.offsetWidth+"px")};return j(()=>{t(),h()}),window.addEventListener("resize",t),(n,y)=>(o(),c("div",{ref_key:"radialProgress",ref:r,"aria-valuemax":u.max,"aria-valuenow":u.modelValue,"aria-valuemin":"0",class:"radialProgress",role:"progressbar"},null,8,te))}});const M=D(le,[["__scopeId","data-v-6e1a8d6b"]]),P=u=>(K("data-v-0e7d42c8"),u=u(),O(),u),oe={class:"track p-4"},ne={key:2,class:"wrap"},ie={class:"track__data"},re={class:"upper"},ue={class:"trac__info__details__normal"},de={class:"text-secondary my-0 text-2xl font-bold"},ce={class:"text-muted text-base ml-2 font-light"},pe={class:"flex flew-row items-center"},me={class:"font-black text-5xl ml-4"},_e={key:0,class:"features flex flex-row gap-4 mt-4"},fe={class:"spotify-infos mt-4"},ve={class:"meta items-center"},ye={class:"text-muted"},xe={key:0,class:"material-symbols-rounded ms-fill"},he={class:"flex flex-row align-items"},ge=P(()=>e("span",{class:"material-symbols-rounded ms-fill mr-2"},"local_fire_department",-1)),ke={class:"font-bold"},we=P(()=>e("h2",{class:"!text-left"},"Similar Songs",-1)),be={class:"relative w-full"},Ve={class:"fixed pr-4"},Ce={class:"ml-4 mb-2 grid grid-cols-2 gap-4"},Pe=P(()=>e("span",{class:"text-muted"},"Edit This Song",-1)),Se=P(()=>e("span",{class:"text-muted"},"Download",-1)),Te={class:"spotify__features__circles"},$e={class:"text-muted mb-0 text-center text-sm capitalize flex justify-center"},Ne={class:"material-symbols-rounded mr-2"},Ie=B({__name:"Track-next",setup(u){const p=W(),r=F(),h=H(()=>p.params.hash),t=f(null),n=f(null),y=f("url"),l=f(null),g=f([]),S=f([]),E={acousticness:"piano",danceability:"nightlife",energy:"electric_bolt",happiness:"mood",instrumentalness:"mic_off",liveness:"groups_2",speechiness:"mic",loudness:"volume_up"},k=async(i=null)=>{t.value=null,l.value=null,g.value=[],t.value=await Y(h.value),window.document.title=`${t.value.title} - reAudioPlayer One`,l.value=await Z(t.value.id,!!i,i),n.value=`https://open.spotify.com/track/${l.value.spotify.id}`,g.value=await ee(t.value.id),S.value=[];for(let[s,a]of Object.entries(l.value.spotify.features))["key","mode","tempo","duration_ms","time_signature"].includes(s)||typeof a=="number"&&(s=s.replaceAll("_"," "),s=s.replace("valence","happiness"),s==="loudness"&&(a=60+a),S.value.push({key:s,value:a,icon:E[s]}))};j(k),$(p,()=>k(),{deep:!0}),$(n,()=>{var i,s,a;if(((a=(s=(i=t.value)==null?void 0:i.metadata)==null?void 0:s.spotify)==null?void 0:a.id)==U(n.value,"track")){y.value="link";return}y.value="save"});const z=()=>{if(y.value==="save"){const i=U(n.value,"track");if(!i)return;k(i);return}R(n.value)};return(i,s)=>(o(),c("div",oe,[t.value?(o(),m(se,{key:0,ref:"updatePopup",song:t.value,onUpdate:s[0]||(s[0]=()=>k())},null,8,["song"])):x("",!0),t.value?(o(),c("div",ne,[e("div",ie,[e("div",re,[d(L,{src:t.value.cover,class:"max-w-sm rounded-xl"},null,8,["src"]),e("div",{class:q([{"justify-end":l.value,"justify-center":!l.value},"track__info__details flex flex-col"])},[e("div",ue,[e("h3",de,[N(_(t.value.artist)+" ",1),e("span",ce,"â€¢ "+_(t.value.album),1)]),e("div",pe,[e("span",{class:"text-5xl cursor-pointer material-symbols-rounded ms-fill my-auto",onClick:s[1]||(s[1]=a=>w(r).loadPlaylist("track",t.value.id))}," play_circle "),e("h1",me,_(t.value.title),1)])]),l.value&&l.value.spotify.features?(o(),c(T,{key:0},[l.value&&l.value.spotify.features?(o(),c("div",_e,[d(C,{"primary-text":l.value.spotify.features.key+" "+l.value.spotify.features.mode,class:"w-full","secondary-text":"Key"},null,8,["primary-text"]),d(C,{"primary-text":w(Q)(l.value),class:"w-full","secondary-text":"Camelot"},null,8,["primary-text"]),d(C,{"primary-text":Math.round(l.value.spotify.features.tempo),class:"w-full","secondary-text":"BPM"},null,8,["primary-text"]),d(C,{"primary-text":t.value.duration,class:"w-full","secondary-text":"Duration"},null,8,["primary-text"])])):x("",!0),e("div",fe,[e("div",ve,[e("span",ye,_(w(G)(l.value.spotify.releaseDate)),1),l.value.spotify.explicit?(o(),c("span",xe,"explicit")):x("",!0),e("span",he,[ge,e("span",ke,_(l.value.spotify.popularity),1)])]),d(A,{modelValue:n.value,"onUpdate:modelValue":s[2]||(s[2]=a=>n.value=a),icon:y.value,onClick:z},null,8,["modelValue","icon"])])],64)):x("",!0)],2)]),g.value.length?(o(),m(V,{key:0,class:"p-4 mt-8"},{default:b(()=>[we,(o(!0),c(T,null,I(g.value,(a,v)=>(o(),m(ae,{key:v,index:v,song:a,"can-import":"","cannot-add":"","with-album":"","with-cover":""},null,8,["index","song"]))),128))]),_:1})):x("",!0)]),e("aside",be,[e("div",Ve,[e("div",Ce,[d(V,{class:"p-4 flex flex-col w-full items-center justify-center"},{default:b(()=>[e("span",{id:"addToPlaylist",class:"material-symbols-rounded ms-fill",onClick:s[3]||(s[3]=a=>i.$refs.updatePopup.show())},"edit"),Pe]),_:1}),d(V,{class:"p-4 flex flex-col w-full items-center justify-center"},{default:b(()=>[e("span",{id:"addToPlaylist",class:"material-symbols-rounded ms-fill",onClick:s[4]||(s[4]=a=>w(X)(t.value.id))},"download"),Se]),_:1})]),e("div",Te,[(o(!0),c(T,null,I(S.value,a=>(o(),m(V,{class:"p-2"},{default:b(()=>[a.key==="loudness"?(o(),m(M,{key:0,modelValue:a.value,"onUpdate:modelValue":v=>a.value=v,"display-value":Math.round(-60+a.value)+"dB",class:"circle",max:"60"},null,8,["modelValue","onUpdate:modelValue","display-value"])):(o(),m(M,{key:1,modelValue:a.value,"onUpdate:modelValue":v=>a.value=v,"display-value":Math.round(a.value*100)+"%",class:"circle",max:"1"},null,8,["modelValue","onUpdate:modelValue","display-value"])),e("p",$e,[e("span",Ne,_(a.icon),1),N(" "+_(a.key),1)])]),_:2},1024))),256))])])])])):(o(),m(J,{key:1}))]))}});const Le=D(Ie,[["__scopeId","data-v-0e7d42c8"]]);export{Le as default};
