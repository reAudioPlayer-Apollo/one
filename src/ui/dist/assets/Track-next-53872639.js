import{m as B,n as m,E as P,aS as $,o,c,_ as E,N as F,G as q,f as v,a,g as f,h as z,J as H,b as S,t as p,u as V,F as C,d as g,T as R,w as N,i as I,bP as M,C as A,k as K,l as O,bM as W,L as G,bQ as J,bR as Q}from"./index-59a56c74.js";import{k as X,l as Y,m as Z}from"./song-8627c30f.js";import{C as T}from"./Card-97319374.js";import{E as ee}from"./ExternalEntry-c35d63de.js";import{F as k}from"./FactCard-57dc5ea1.js";import"./IconButton-288e0ba4.js";import"./Dropdown-0ad947f4.js";const ae=["aria-valuemax","aria-valuenow"],te=B({__name:"ProgressCircle",props:{max:{type:Number,required:!1,default:100},modelValue:{type:Number,required:!1,default:0},displayValue:{type:String,required:!0}},setup(i){const d=i,r=m(null),x=()=>{if(r.value){const n=d.modelValue/d.max*100;r.value.style.setProperty("--progress",`${n}%`),r.value.innerHTML=d.displayValue}};P(d,x,{deep:!0});const s=()=>{r.value&&(r.value.style.height=r.value.offsetWidth+"px")};return $(()=>{s(),x()}),window.addEventListener("resize",s),(n,y)=>(o(),c("div",{ref_key:"radialProgress",ref:r,"aria-valuemax":i.max,"aria-valuenow":i.modelValue,"aria-valuemin":"0",class:"radialProgress",role:"progressbar"},null,8,ae))}});const U=E(te,[["__scopeId","data-v-6e1a8d6b"]]),L=i=>(K("data-v-4c559c36"),i=i(),O(),i),se={class:"track p-4"},le={key:1,class:"wrap"},oe={class:"track__data"},ne={class:"upper"},re={class:"trac__info__details__normal"},ue={class:"text-secondary my-0 text-2xl font-bold"},ie={class:"text-muted text-base ml-2 font-light"},ce={class:"flex flew-row items-center"},de={class:"font-black text-5xl ml-4"},pe={key:0,class:"features flex flex-row gap-4 mt-4"},me={class:"spotify-infos mt-4"},_e={class:"meta items-center"},ve={class:"text-muted"},fe={key:0,class:"material-symbols-rounded ms-fill"},ye={class:"flex flex-row align-items"},xe=L(()=>a("span",{class:"material-symbols-rounded ms-fill mr-2"},"local_fire_department",-1)),he={class:"font-bold"},ge=L(()=>a("h2",{class:"!text-left"},"Similar Songs",-1)),ke={class:"spotify__features__circles mt-4"},be={class:"text-muted mb-0 text-center text-sm capitalize flex justify-center"},we={class:"material-symbols-rounded mr-2"},Ve=B({__name:"Track-next",setup(i){const d=W(),r=F(),x=q(()=>d.params.hash),s=m(null),n=m(null),y=m("url"),t=m(null),h=m([]),b=m([]),j={acousticness:"piano",danceability:"nightlife",energy:"electric_bolt",happiness:"mood",instrumentalness:"mic_off",liveness:"groups_2",speechiness:"mic",loudness:"volume_up"},w=async(u=null)=>{s.value=null,t.value=null,h.value=[],s.value=await X(x.value),window.document.title=`${s.value.title} - reAudioPlayer One`,t.value=await Y(s.value.id,!!u,u),n.value=`https://open.spotify.com/track/${t.value.spotify.id}`,h.value=await Z(s.value.id),b.value=[];for(let[l,e]of Object.entries(t.value.spotify.features))["key","mode","tempo","duration_ms","time_signature"].includes(l)||typeof e=="number"&&(l=l.replaceAll("_"," "),l=l.replace("valence","happiness"),l==="loudness"&&(e=60+e),b.value.push({key:l,value:e,icon:j[l]}))};$(w),P(d,()=>w(),{deep:!0}),P(n,()=>{var u,l,e;if(((e=(l=(u=s.value)==null?void 0:u.metadata)==null?void 0:l.spotify)==null?void 0:e.id)==M(n.value,"track")){y.value="link";return}y.value="save"});const D=()=>{if(y.value==="save"){const u=M(n.value,"track");if(!u)return;w(u);return}A(n.value)};return(u,l)=>(o(),c("div",se,[s.value?(o(),c("div",le,[a("div",oe,[a("div",ne,[f(z,{src:s.value.cover,class:"max-w-sm rounded-xl"},null,8,["src"]),a("div",{class:H([{"justify-end":t.value,"justify-center":!t.value},"track__info__details flex flex-col"])},[a("div",re,[a("h3",ue,[S(p(s.value.artist)+" ",1),a("span",ie,"â€¢ "+p(s.value.album),1)]),a("div",ce,[a("span",{class:"text-5xl cursor-pointer material-symbols-rounded ms-fill my-auto",onClick:l[0]||(l[0]=e=>V(r).loadPlaylist("track",s.value.id))}," play_circle "),a("h1",de,p(s.value.title),1)])]),t.value&&t.value.spotify.features?(o(),c(C,{key:0},[t.value&&t.value.spotify.features?(o(),c("div",pe,[f(k,{"primary-text":t.value.spotify.features.key+" "+t.value.spotify.features.mode,class:"w-full","secondary-text":"Key"},null,8,["primary-text"]),f(k,{"primary-text":V(J)(t.value),class:"w-full","secondary-text":"Camelot"},null,8,["primary-text"]),f(k,{"primary-text":Math.round(t.value.spotify.features.tempo),class:"w-full","secondary-text":"BPM"},null,8,["primary-text"]),f(k,{"primary-text":s.value.duration,class:"w-full","secondary-text":"Duration"},null,8,["primary-text"])])):g("",!0),a("div",me,[a("div",_e,[a("span",ve,p(V(Q)(t.value.spotify.releaseDate)),1),t.value.spotify.explicit?(o(),c("span",fe,"explicit")):g("",!0),a("span",ye,[xe,a("span",he,p(t.value.spotify.popularity),1)])]),f(R,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value=e),icon:y.value,onClick:D},null,8,["modelValue","icon"])])],64)):g("",!0)],2)]),h.value.length?(o(),v(T,{key:0,class:"p-4 mt-8"},{default:N(()=>[ge,(o(!0),c(C,null,I(h.value,(e,_)=>(o(),v(ee,{key:_,index:_,song:e,"can-import":"","cannot-add":"","with-album":"","with-cover":""},null,8,["index","song"]))),128))]),_:1})):g("",!0)]),a("aside",ke,[(o(!0),c(C,null,I(b.value,e=>(o(),v(T,{class:"p-2"},{default:N(()=>[e.key==="loudness"?(o(),v(U,{key:0,modelValue:e.value,"onUpdate:modelValue":_=>e.value=_,"display-value":Math.round(-60+e.value)+"dB",class:"circle",max:"60"},null,8,["modelValue","onUpdate:modelValue","display-value"])):(o(),v(U,{key:1,modelValue:e.value,"onUpdate:modelValue":_=>e.value=_,"display-value":Math.round(e.value*100)+"%",class:"circle",max:"1"},null,8,["modelValue","onUpdate:modelValue","display-value"])),a("p",be,[a("span",we,p(e.icon),1),S(" "+p(e.key),1)])]),_:2},1024))),256))])])):(o(),v(G,{key:0}))]))}});const Ue=E(Ve,[["__scopeId","data-v-4c559c36"]]);export{Ue as default};
