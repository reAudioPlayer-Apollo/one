import{m as B,n as v,z as P,aS as E,o as s,c as p,_ as I,f as r,w as S,a as l,t as m,d as c,H as F,A as H,g as x,h as L,D as A,b as N,u as w,F as V,T as R,i as U,bP as M,J as K,k as O,l as W,bM as J,N as Q,bQ as G,bR as X}from"./index-766c4f9b.js";import{d as Y,k as Z,l as ee,m as ae}from"./song-bd75baee.js";import{C as $}from"./Card-bf981b3f.js";import{E as te}from"./ExternalEntry-16ca8cbd.js";import{F as h}from"./FactCard-2ee31c89.js";import{_ as se}from"./EditSong.vue_vue_type_script_setup_true_lang-49e8cc70.js";import"./Form-e9fe2184.js";import"./IconButton-2b2c4bda.js";import"./Dropdown-00b9e7ff.js";const le=["aria-valuemax","aria-valuenow"],oe=B({__name:"ProgressCircle",props:{max:{type:Number,required:!1,default:100},modelValue:{type:Number,required:!1,default:0},displayValue:{type:String,required:!0}},setup(n){const _=n,u=v(null),k=()=>{if(u.value){const i=_.modelValue/_.max*100;u.value.style.setProperty("--progress",`${i}%`),u.value.innerHTML=_.displayValue}};P(_,k,{deep:!0});const o=()=>{u.value&&(u.value.style.height=u.value.offsetWidth+"px")};return E(()=>{o(),k()}),window.addEventListener("resize",o),(i,y)=>(s(),p("div",{ref_key:"radialProgress",ref:u,"aria-valuemax":n.max,"aria-valuenow":n.modelValue,"aria-valuemin":"0",class:"radialProgress",role:"progressbar"},null,8,le))}});const T=I(oe,[["__scopeId","data-v-6e1a8d6b"]]),ne={class:"material-symbols-rounded ms-fill"},re={key:0,class:"text-muted"},ue=B({__name:"ButtonCard",props:{icon:{type:String,required:!0},label:{type:String,required:!1}},setup(n){return(_,u)=>(s(),r($,{class:"p-4 flex flex-col w-full items-center justify-center"},{default:S(()=>[l("span",ne,m(n.icon),1),n.label?(s(),p("span",re,m(n.label),1)):c("",!0)]),_:1}))}});const D=I(ue,[["__scopeId","data-v-98bfdf17"]]),j=n=>(O("data-v-82dde780"),n=n(),W(),n),ie={class:"track p-4"},de={key:2},ce={class:"track__data"},pe={class:"upper"},me={class:"trac__info__details__normal"},_e={class:"text-secondary my-0 text-2xl font-bold"},ve={class:"text-muted text-base ml-2 font-light"},fe={class:"flex flew-row items-center"},ye={class:"font-black text-5xl ml-4"},xe={key:0,class:"features flex flex-row gap-4 mt-4"},he={class:"spotify-infos mt-4"},ke={class:"meta items-center"},ge={class:"text-muted"},be={key:0,class:"material-symbols-rounded ms-fill"},we={class:"flex flex-row align-items"},Ce=j(()=>l("span",{class:"material-symbols-rounded ms-fill mr-2"},"local_fire_department",-1)),Ve={class:"font-bold"},Pe={class:"relative w-full mt-4"},Se={class:"spotify__features__circles"},$e={class:"text-muted mb-0 text-center text-sm capitalize flex justify-center"},Be={class:"material-symbols-rounded mr-2"},Ie=j(()=>l("h2",{class:"!text-left"},"Similar Songs",-1)),Ne=B({__name:"Track-next",setup(n){const _=J(),u=F(),k=H(()=>_.params.hash),o=v(null),i=v(null),y=v("url"),a=v(null),g=v([]),C=v([]),q={acousticness:"piano",danceability:"nightlife",energy:"electric_bolt",happiness:"mood",instrumentalness:"mic_off",liveness:"groups_2",speechiness:"mic",loudness:"volume_up"},b=async(d=null)=>{o.value=null,a.value=null,g.value=[],o.value=await Z(k.value),window.document.title=`${o.value.title} - reAudioPlayer One`,a.value=await ee(o.value.id,!!d,d),i.value=`https://open.spotify.com/track/${a.value.spotify.id}`,g.value=await ae(o.value.id),C.value=[];for(let[t,e]of Object.entries(a.value.spotify.features))["key","mode","tempo","duration_ms","time_signature"].includes(t)||typeof e=="number"&&(t=t.replaceAll("_"," "),t=t.replace("valence","happiness"),t==="loudness"&&(e=60+e),C.value.push({key:t,value:e,icon:q[t]}))};E(b),P(_,()=>b(),{deep:!0}),P(i,()=>{var d,t,e;if(((e=(t=(d=o.value)==null?void 0:d.metadata)==null?void 0:t.spotify)==null?void 0:e.id)==M(i.value,"track")){y.value="link";return}y.value="save"});const z=()=>{if(y.value==="save"){const d=M(i.value,"track");if(!d)return;b(d);return}K(i.value)};return(d,t)=>(s(),p("div",ie,[o.value?(s(),r(se,{key:0,ref:"updatePopup",song:o.value,onUpdate:t[0]||(t[0]=()=>b())},null,8,["song"])):c("",!0),o.value?(s(),p("div",de,[l("div",ce,[l("div",pe,[x(L,{src:o.value.cover,class:"max-w-sm rounded-xl"},null,8,["src"]),l("div",{class:A([{"justify-end":a.value,"justify-center":!a.value},"track__info__details flex flex-col"])},[l("div",me,[l("h3",_e,[N(m(o.value.artist)+" ",1),l("span",ve,"â€¢ "+m(o.value.album),1)]),l("div",fe,[l("span",{class:"text-5xl cursor-pointer material-symbols-rounded ms-fill my-auto",onClick:t[1]||(t[1]=e=>w(u).loadPlaylist("track",o.value.id))}," play_circle "),l("h1",ye,m(o.value.title),1)])]),a.value&&a.value.spotify.features?(s(),p(V,{key:0},[a.value&&a.value.spotify.features?(s(),p("div",xe,[a.value?(s(),r(h,{key:0,"primary-text":a.value.spotify.features.key+" "+a.value.spotify.features.mode,class:"w-full","secondary-text":"Key"},null,8,["primary-text"])):c("",!0),a.value?(s(),r(h,{key:1,"primary-text":w(G)(a.value),class:"w-full","secondary-text":"Camelot"},null,8,["primary-text"])):c("",!0),a.value?(s(),r(h,{key:2,"primary-text":Math.round(a.value.spotify.features.tempo),class:"w-full","secondary-text":"BPM"},null,8,["primary-text"])):c("",!0),x(h,{"primary-text":o.value.duration,class:"w-full","secondary-text":"Duration"},null,8,["primary-text"]),a.value?(s(),r(h,{key:3,"primary-text":a.value.plays,class:"w-full","secondary-text":"Plays"},null,8,["primary-text"])):c("",!0),x(D,{icon:"edit",label:"Edit",onClick:t[2]||(t[2]=e=>d.$refs.updatePopup.show())}),x(D,{icon:"download",label:"Download",onClick:t[3]||(t[3]=e=>w(Y)(o.value.id))})])):c("",!0),l("div",he,[l("div",ke,[l("span",ge,m(w(X)(a.value.spotify.releaseDate)),1),a.value.spotify.explicit?(s(),p("span",be,"explicit")):c("",!0),l("span",we,[Ce,l("span",Ve,m(a.value.spotify.popularity),1)])]),x(R,{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value=e),icon:y.value,onClick:z},null,8,["modelValue","icon"])])],64)):c("",!0)],2)])]),l("div",Pe,[l("div",Se,[(s(!0),p(V,null,U(C.value,e=>(s(),r($,{class:"p-2"},{default:S(()=>[e.key==="loudness"?(s(),r(T,{key:0,modelValue:e.value,"onUpdate:modelValue":f=>e.value=f,"display-value":Math.round(-60+e.value)+"dB",class:"circle",max:"60"},null,8,["modelValue","onUpdate:modelValue","display-value"])):(s(),r(T,{key:1,modelValue:e.value,"onUpdate:modelValue":f=>e.value=f,"display-value":Math.round(e.value*100)+"%",class:"circle",max:"1"},null,8,["modelValue","onUpdate:modelValue","display-value"])),l("p",$e,[l("span",Be,m(e.icon),1),N(" "+m(e.key),1)])]),_:2},1024))),256))])]),g.value.length?(s(),r($,{key:0,class:"p-4 mt-4"},{default:S(()=>[Ie,(s(!0),p(V,null,U(g.value,(e,f)=>(s(),r(te,{key:f,index:f,song:e,"can-import":"","cannot-add":"","with-album":"","with-cover":""},null,8,["index","song"]))),128))]),_:1})):c("",!0)])):(s(),r(Q,{key:1}))]))}});const He=I(Ne,[["__scopeId","data-v-82dde780"]]);export{He as default};
