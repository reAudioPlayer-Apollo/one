import{m as M,n as p,D as I,aR as $,o,c as d,_ as E,K as L,E as H,f as v,a as e,g as f,h as R,I as q,b as N,t as n,u as P,F as S,w as y,d as w,T as z,i as B,bP as T,B as K,k as A,l as F,bH as O,L as W,bQ as Q,bR as G}from"./index-bd5ed537.js";import{j as J,k as X,l as Y}from"./song-b88cabe7.js";import{C as h}from"./Card-40721170.js";import{E as Z}from"./ExternalEntry-d97057c1.js";import"./IconButton-ad765272.js";import"./Dropdown-52c207ca.js";const ee=["aria-valuemax","aria-valuenow"],ae=M({__name:"ProgressCircle",props:{max:{type:Number,required:!1,default:100},modelValue:{type:Number,required:!1,default:0},displayValue:{type:String,required:!0}},setup(c){const _=c,i=p(null),k=()=>{if(i.value){const u=_.modelValue/_.max*100;i.value.style.setProperty("--progress",`${u}%`),i.value.innerHTML=_.displayValue}};I(_,k,{deep:!0});const t=()=>{i.value&&(i.value.style.height=i.value.offsetWidth+"px")};return $(()=>{t(),k()}),window.addEventListener("resize",t),(u,g)=>(o(),d("div",{ref_key:"radialProgress",ref:i,"aria-valuemax":c.max,"aria-valuenow":c.modelValue,"aria-valuemin":"0",class:"radialProgress",role:"progressbar"},null,8,ee))}});const U=E(ae,[["__scopeId","data-v-6e1a8d6b"]]),x=c=>(A("data-v-e75b6421"),c=c(),F(),c),se={class:"track p-4"},te={key:1,class:"wrap"},le={class:"track__data"},oe={class:"upper"},ne={class:"trac__info__details__normal"},ue={class:"text-secondary my-0 text-2xl font-bold"},ie={class:"text-muted text-base ml-2 font-light"},re={class:"flex flew-row items-center"},ce={class:"font-black text-5xl ml-4"},de={key:0,class:"features flex flex-row gap-4 mt-4"},_e={class:"mx-4"},pe=x(()=>e("p",{class:"my-0 text-muted"}," Key ",-1)),me={class:"mx-4"},ve=x(()=>e("p",{class:"my-0 text-muted"}," Camelot ",-1)),fe={class:"mx-4"},ye=x(()=>e("p",{class:"my-0 text-muted"}," BPM ",-1)),he={class:"mx-4"},xe=x(()=>e("p",{class:"my-0 text-muted"}," Duration ",-1)),ge={class:"spotify-infos mt-4"},ke={class:"meta items-center"},be={key:0,class:"material-symbols-rounded ms-fill"},we={class:"flex flex-row align-items"},Ve=x(()=>e("span",{class:"material-symbols-rounded ms-fill mr-2"},"local_fire_department",-1)),Ce={class:"font-bold"},Pe=x(()=>e("h2",{class:"!text-left"},"Similar Songs",-1)),Se={class:"spotify__features__circles mt-4"},Ie={class:"text-muted mb-0 text-center text-sm capitalize flex justify-center"},Ne={class:"material-symbols-rounded mr-2"},Be=M({__name:"Track-next",setup(c){const _=O(),i=L(),k=H(()=>_.params.hash),t=p(null),u=p(null),g=p("url"),s=p(null),b=p([]),V=p([]),j={acousticness:"piano",danceability:"nightlife",energy:"electric_bolt",happiness:"mood",instrumentalness:"mic_off",liveness:"groups_2",speechiness:"mic",loudness:"volume_up"},C=async(r=null)=>{t.value=null,s.value=null,b.value=[],t.value=await J(k.value),window.document.title=`${t.value.title} - reAudioPlayer One`,s.value=await X(t.value.id,!!r,r),u.value=`https://open.spotify.com/track/${s.value.spotify.id}`,b.value=await Y(t.value.id),V.value=[];for(let[l,a]of Object.entries(s.value.spotify.features))["key","mode","tempo","duration_ms","time_signature"].includes(l)||typeof a=="number"&&(l=l.replaceAll("_"," "),l=l.replace("valence","happiness"),l==="loudness"&&(a=60+a),V.value.push({key:l,value:a,icon:j[l]}))};$(C),I(_,C,{deep:!0}),I(u,()=>{var r,l,a;if(((a=(l=(r=t.value)==null?void 0:r.metadata)==null?void 0:l.spotify)==null?void 0:a.id)==T(u.value,"track")){g.value="link";return}g.value="save"});const D=()=>{if(g.value==="save"){const r=T(u.value,"track");if(!r)return;C(r);return}K(u.value)};return(r,l)=>(o(),d("div",se,[t.value?(o(),d("div",te,[e("div",le,[e("div",oe,[f(R,{src:t.value.cover,class:"max-w-sm rounded-xl"},null,8,["src"]),e("div",{class:q([{"justify-end":s.value,"justify-center":!s.value},"track__info__details flex flex-col"])},[e("div",ne,[e("h3",ue,[N(n(t.value.artist)+" ",1),e("span",ie,"â€¢ "+n(t.value.album),1)]),e("div",re,[e("span",{class:"text-5xl cursor-pointer material-symbols-rounded ms-fill my-auto",onClick:l[0]||(l[0]=a=>P(i).loadPlaylist("track",t.value.id))}," play_circle "),e("h1",ce,n(t.value.title),1)])]),s.value&&s.value.spotify.features?(o(),d(S,{key:0},[s.value&&s.value.spotify.features?(o(),d("div",de,[f(h,{class:"p-4 w-full"},{default:y(()=>[e("h2",_e,n(s.value.spotify.features.key)+" "+n(s.value.spotify.features.mode),1),pe]),_:1}),f(h,{class:"p-4 w-full"},{default:y(()=>[e("h2",me,n(P(Q)(s.value)),1),ve]),_:1}),f(h,{class:"p-4 w-full"},{default:y(()=>[e("h2",fe,n(Math.round(s.value.spotify.features.tempo)),1),ye]),_:1}),f(h,{class:"p-4 w-full"},{default:y(()=>[e("h2",he,n(t.value.duration),1),xe]),_:1})])):w("",!0),e("div",ge,[e("div",ke,[e("span",null,n(P(G)(s.value.spotify.releaseDate)),1),s.value.spotify.explicit?(o(),d("span",be,"explicit")):w("",!0),e("span",we,[Ve,e("span",Ce,n(s.value.spotify.popularity),1)])]),f(z,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=a=>u.value=a),icon:g.value,onClick:D},null,8,["modelValue","icon"])])],64)):w("",!0)],2)]),b.value.length?(o(),v(h,{key:0,class:"p-4 mt-8"},{default:y(()=>[Pe,(o(!0),d(S,null,B(b.value,(a,m)=>(o(),v(Z,{key:m,index:m,song:a,"can-import":"","cannot-add":"","with-album":"","with-cover":""},null,8,["index","song"]))),128))]),_:1})):w("",!0)]),e("aside",Se,[(o(!0),d(S,null,B(V.value,a=>(o(),v(h,{class:"p-2"},{default:y(()=>[a.key==="loudness"?(o(),v(U,{key:0,modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,"display-value":Math.round(-60+a.value)+"dB",class:"circle",max:"60"},null,8,["modelValue","onUpdate:modelValue","display-value"])):(o(),v(U,{key:1,modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,"display-value":Math.round(a.value*100)+"%",class:"circle",max:"1"},null,8,["modelValue","onUpdate:modelValue","display-value"])),e("p",Ie,[e("span",Ne,n(a.icon),1),N(" "+n(a.key),1)])]),_:2},1024))),256))])])):(o(),v(W,{key:0}))]))}});const De=E(Be,[["__scopeId","data-v-e75b6421"]]);export{De as default};
