import{F as v,G as k}from"./FixedPlaylistHeader.131dd058.js";import{P as b}from"./PlaylistEntry.bdb5f8fe.js";import{_ as x,s as P,o,c as n,g as c,k as w,m as S,w as H,b as N,a as e,t as u,F as C,i as I,f as T,e as d,l as D,p as V,h as B}from"./index.fc9bdca8.js";import"./SongCtx.56eb284a.js";import"./EditSong.2e047ad9.js";import"./FindSources.26858312.js";const E={components:{PlaylistEntry:b,FixedPlaylistHeader:v,GridHeader:k},data(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:"N/A"}},computed:P("player",{currentSong:t=>t.song.id}),watch:{currentSong(){this.updateIsPlaying()}},methods:{download(t){var r;const l=(r=this.playlist)==null?void 0:r[t];window.open(`/api/tracks/${l.id}/download`)},updateIsPlaying(){console.log("Updating is playing",this.currentSong),this.playlist.forEach(t=>{t.playing=t.id==this.currentSong})},headerVisibilityChanged(t){this.fixedHeaderHidden=t},updateTracks(){fetch("/api/me/liked").then(t=>t.json()).then(t=>{this.playlist=t.songs,this.playlistName=t.name,this.updateIsPlaying()})},loadPlaylist(){fetch("/api/player/load",{method:"POST",body:JSON.stringify({type:"collection"})})}}},_=t=>(V("data-v-b05a8f4f"),t=t(),B(),t),F={class:"playlist"},U={class:"padding-20"},q=_(()=>e("hr",null,null,-1)),G={class:"padding-20"},O={class:"grid"},R=_(()=>e("hr",null,null,-1)),j={class:"playlistEntries"};function z(t,l,r,A,s,i){const y=d("fixed-playlist-header"),h=d("h7"),f=d("grid-header"),g=d("playlist-entry"),m=D("observe-visibility");return o(),n("div",F,[c(y,{onClick:i.loadPlaylist,ref:"fixedHeading",class:w({hidden:s.fixedHeaderHidden}),title:s.playlistName},null,8,["onClick","class","title"]),S((o(),n("div",U,[c(h,null,{default:H(()=>[N("Playlist")]),_:1}),e("h1",null,u(s.playlistName),1),e("h5",null,"Your "+u(s.playlist.length)+" favourite tracks, auto-generated just for you",1)])),[[m,i.headerVisibilityChanged]]),q,e("div",G,[e("span",{id:"loadPlaylist",onClick:l[0]||(l[0]=(...a)=>i.loadPlaylist&&i.loadPlaylist(...a)),class:"material-icons-outlined"},"play_circle_filled"),e("div",O,[c(f,{class:"hideIfMobile"}),R,e("div",j,[(o(!0),n(C,null,I(s.playlist,(a,p)=>(o(),T(g,{key:p,index:p,source:a.source,id:a.id,title:a.title,playing:a.playing,album:a.album,artist:a.artist,cover:a.cover,favourite:a.favourite,duration:a.duration,onDownload:i.download,onRequestUpdate:i.updateTracks},null,8,["index","source","id","title","playing","album","artist","cover","favourite","duration","onDownload","onRequestUpdate"]))),128))])])])])}const W=x(E,[["render",z],["__scopeId","data-v-b05a8f4f"]]);export{W as default};
