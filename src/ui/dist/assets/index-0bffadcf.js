import{m as P,o as h,c as f,a as t,t as _,_ as k,n as V,D,d as U,y as E,z as N,C as S,E as q,bP as W,g as o,w as y,b as T,u as m,F as j,i as F,k as M,l as O}from"./index-817bd093.js";import{C as g}from"./Card-dae14a20.js";import{I as w,D as z}from"./Dropdown-88dae077.js";const A={class:"material-symbols-rounded ms-wght-300 cursor-pointer"},H={class:"checkbox__label"},J={class:"checkbox__label__title"},K={class:"checkbox__label__sublabel italic"},L=P({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},sublabel:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(n,{emit:s}){const a=n,c=p=>s("update:modelValue",p),i=()=>c(!a.modelValue);return(p,d)=>(h(),f("div",{class:"checkbox",onClick:i},[t("span",A,_(n.modelValue?"check_box":"check_box_outline_blank"),1),t("div",H,[t("div",J,_(n.label),1),t("div",K,_(n.sublabel),1)])]))}});const x=k(L,[["__scopeId","data-v-b33b1501"]]);const R={key:0,class:"material-symbols-rounded"},G=["type","placeholder","disabled"],Q={__name:"PasswordInputWithIcon",props:{icon:String,placeholder:String,modelValue:String,disabled:Boolean},emits:["update:modelValue","change","submit"],setup(n,{emit:s}){const a=n,c=V(a.modelValue);D(()=>a.modelValue,b=>{c.value=b});const i=()=>{s("update:modelValue",c.value),s("change",c.value)},p=b=>{b.key==="Enter"&&s("submit",c)},d=V(!1);return(b,v)=>(h(),f("div",{class:S(["text-input-with-icon rounded-3xl flex items-center px-4",{disabled:n.disabled}])},[n.icon?(h(),f("span",R,_(n.icon),1)):U("",!0),E(t("input",{type:d.value?"text":"password","onUpdate:modelValue":v[0]||(v[0]=C=>c.value=C),onInput:i,onKeyup:p,placeholder:n.placeholder,disabled:n.disabled},null,40,G),[[N,c.value]]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:v[1]||(v[1]=C=>d.value=!d.value)},_(d.value?"visibility":"visibility_off"),1)],2))}},$=k(Q,[["__scopeId","data-v-8326799a"]]);const X={name:"Theme",props:{name:String},methods:{selected(){return window.getCurrentTheme()==this.name},select(){window.setTheme(this.name),this.$emit("selected")}}},Y=["src"];function Z(n,s,a,c,i,p){return h(),f("div",{onClick:s[0]||(s[0]=(...d)=>p.select&&p.select(...d)),class:"wrapper"},[t("p",{class:S(["mb-4",{selected:p.selected()}])},_(a.name),3),t("img",{src:`/assets/img/themes/${this.name}.svg`,class:S({selected:p.selected()})},null,10,Y)])}const ee=k(X,[["render",Z],["__scopeId","data-v-5dea6f6a"]]),u=n=>(M("data-v-d70c20c4"),n=n(),O(),n),te={class:"p-[10px] preferences"},le=u(()=>t("summary",{class:"cursor-pointer"},"How to",-1)),se=u(()=>t("p",null,[T("1) Head over to the "),t("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1)),ae=u(()=>t("p",null,"2) Create An App",-1)),oe=u(()=>t("p",null,"3) Enter any name and any description",-1)),ne=u(()=>t("p",null,"5) Copy and enter the client id and secret into the corresponding input field",-1)),de=u(()=>t("hr",{class:"my-4"},null,-1)),ie=u(()=>t("h5",null,"Client ID: ",-1)),re=u(()=>t("h5",{class:"mt-4"},"Client Secret: ",-1)),ce=u(()=>t("h2",{class:"mt-[10px]"},"Player",-1)),ue=u(()=>t("h2",{class:"mt-[10px]"},"My Data",-1)),pe=u(()=>t("h2",{class:"mt-[10px]"},"Theme",-1)),me={class:"themes"},_e=u(()=>t("h2",{class:"mt-[10px]"},"Sidebar",-1)),be=P({__name:"index",setup(n){const s=V(!1),a=V({id:"",secret:""}),c=q(()=>s.value?Object.values(a.value).some(r=>r==="")?!1:a.value.id!==i.value.id||a.value.secret!==i.value.secret||s.value!==i.value.enabled:i.value.enabled),i=V({id:"",secret:"",enabled:!1});fetch("/api/config/spotify").then(async r=>{let e={id:"",secret:"",enabled:!1};if(r.status==200)e=await r.json();else if([204,401].includes(r.status))e={id:"restricted",secret:"restricted",enabled:!1};else throw new Error("Failed to fetch spotify config");i.value=e,i.value.enabled=![e.id,e.secret].includes("restricted"),s.value=i.value.enabled,a.value.id=e.id.replace("restricted",""),a.value.secret=e.secret.replace("restricted","")});const p=async()=>{if(!c.value)return;let r=a.value.id,e=a.value.secret;s.value||(e=r="restricted"),(await fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:r,secret:e})})).ok&&(i.value={id:r,secret:e,enabled:s.value})},d=W(),b=["dynamic","light","dark"],v=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},I=`http://${window.location.host}/api/spotify/callback`;return(r,e)=>(h(),f("div",te,[o(g,{class:"p-4 pt-0"},{default:y(()=>[o(x,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value=l),class:"h2 mb-2",label:"Spotify"},null,8,["modelValue"]),t("details",null,[le,se,ae,oe,t("p",null,[T("4) Edit the settings: set the redirect url to "),t("a",{href:I},_(I))]),ne]),de,ie,o($,{modelValue:a.value.id,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.id=l),disabled:!s.value,icon:"token"},null,8,["modelValue","disabled"]),re,o($,{modelValue:a.value.secret,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.secret=l),disabled:!s.value,icon:"lock"},null,8,["modelValue","disabled"]),o(w,{disabled:!m(c),class:"ml-auto mt-4",icon:"save",label:"Save",onClick:p},null,8,["disabled"])]),_:1}),o(g,{class:"p-4 pt-0"},{default:y(()=>[ce,o(x,{modelValue:m(d).player.pictureInPicture,"onUpdate:modelValue":e[3]||(e[3]=l=>m(d).player.pictureInPicture=l),label:"Support Picture in Picture",sublabel:"this will slightly reduce performance"},null,8,["modelValue"]),o(z,{modelValue:m(d).player.type,"onUpdate:modelValue":e[4]||(e[4]=l=>m(d).player.type=l),options:[{value:"web",label:"Native player"},{value:"web/wave",label:"Wave player"}]},null,8,["modelValue"])]),_:1}),o(g,{class:"p-4 pt-0"},{default:y(()=>[ue,o(w,{class:"mx-auto mt-4",icon:"backup",label:"Back up database",onClick:e[5]||(e[5]=l=>r.$router.push("/export"))}),o(w,{class:"mx-auto mt-4",icon:"cloud_download",label:"Import database",onClick:e[6]||(e[6]=l=>r.$router.push("/import"))}),o(w,{class:"mx-auto mt-4",icon:"delete",label:"Clean browser settings",onClick:v}),o(w,{class:"mx-auto mt-4",icon:"folder",label:"Manage files",onClick:e[7]||(e[7]=l=>r.$router.push("/preferences/my-data"))})]),_:1}),o(g,{class:"p-4 pt-0"},{default:y(()=>[pe,t("div",me,[(h(),f(j,null,F(b,(l,B)=>o(ee,{key:B,name:l},null,8,["name"])),64))])]),_:1}),o(g,{class:"p-4 pt-0"},{default:y(()=>[_e,o(x,{modelValue:m(d).sidebar.news,"onUpdate:modelValue":e[8]||(e[8]=l=>m(d).sidebar.news=l),label:"Show 'News' Tab"},null,8,["modelValue"]),o(x,{modelValue:m(d).sidebar.sports,"onUpdate:modelValue":e[9]||(e[9]=l=>m(d).sidebar.sports=l),label:"Show 'Sports' Tab"},null,8,["modelValue"])]),_:1})]))}});const ye=k(be,[["__scopeId","data-v-d70c20c4"]]);export{ye as default};
