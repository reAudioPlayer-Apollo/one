import{i as S,o,c as _,t as b,O as T,_ as V,q as y,E as X,D,f as k,d as C,a as t,b as N,F as $,m as B,n as U,ce as Z,g as v,I as x,j as I,w as G,h as ee,M as q,u as f,C as j,av as te,cr as M,cs as F,ct as Y,cu as J,cv as E,G as R,c1 as ae,bR as le,Y as se,cw as oe,B as ne,s as ie,bp as ce}from"./index-e36e5ea8.js";import{_ as re}from"./Markdown.vue_vue_type_style_index_0_lang-08d44bc4.js";import{T as W}from"./TrackCompact-2e2faa8c.js";import{G as ue}from"./gistClient-22434eb3.js";const de=S({__name:"TabButton",props:{name:{type:String,required:!0},active:{type:Boolean,default:!1}},setup(l){return(e,s)=>(o(),_("button",{class:T(["btn",{active:l.active}])},b(l.name),3))}});const pe=V(de,[["__scopeId","data-v-3f038910"]]),_e="0.11.36",z=l=>(B("data-v-6c134c33"),l=l(),U(),l),ve={class:"flex flex-col"},me={key:0,class:"text-sm flex items-center gap-2 latest"},he=z(()=>t("span",{class:"material-symbols-rounded"},"check",-1)),ye={key:1,class:"text-sm flex items-center gap-2 update"},fe=z(()=>t("span",{class:"material-symbols-rounded"},"update",-1)),H="0.11.2",be=S({__name:"About",setup(l){const e=y(""),s=y("");X(async()=>{const i=await(await fetch("https://api.github.com/repos/reAudioPlayer/one/releases/latest")).json();e.value=i.tag_name,s.value=i.body});const p=D(()=>e.value===H),n=D(()=>_e.split(".").pop()),d=y(null);return(a,i)=>(o(),_("div",ve,[s.value?(o(),k(re,{key:0,content:s.value,title:"What's new in "+e.value,ref_key:"changelog",ref:d,onClose:i[0]||(i[0]=()=>s.value="")},null,8,["content","title"])):C("",!0),t("span",null,[t("strong",null,"v"+b(H)),N(" (Build "+b(n.value)+") ",1)]),e.value?(o(),_($,{key:1},[p.value?(o(),_("span",me,[he,N(" You're on the latest version "),t("a",{class:"cursor-pointer",onClick:i[1]||(i[1]=h=>{var r;return(r=d.value)==null?void 0:r.show()})}," What's changed? ")])):(o(),_("span",ye,[fe,N(" Update available: "+b(e.value)+" ",1),t("a",{class:"cursor-pointer",onClick:i[2]||(i[2]=h=>{var r;return(r=d.value)==null?void 0:r.show()})}," What's changed? ")]))],64)):C("",!0)]))}});const ge=V(be,[["__scopeId","data-v-6c134c33"]]);const O=l=>(B("data-v-16d50c59"),l=l(),U(),l),ke={class:"wrap"},we=O(()=>t("h3",null,"Browser Data",-1)),$e=O(()=>t("h3",null,"Import / Export",-1)),xe={class:"flex gap-4 mb-4"},Se={class:"covers mb-2"},Ce=O(()=>t("h3",null,"Local covers",-1)),Ve={key:0,class:"items gap-4"},Pe={class:"flex justify-between w-full mb-4"},Ie={class:"overflow-hidden"},Ae=["onClick"],De={key:1,class:"text-muted italic"},Ne={class:"tracks"},Te=O(()=>t("h3",null,"Local tracks",-1)),Be={key:0,class:"items gap-4"},Ue={class:"flex justify-between w-full mb-4"},Ee={class:"overflow-hidden"},Oe=["onClick"],Le={class:"flex justify-center w-full mb-4"},Ge=["src"],je={key:1,class:"text-muted italic"},Re={__name:"LocalData",setup(l){const e=y([]),s=y([]),p=Z(),n=()=>{fetch("/api/config/images").then(r=>r.json()).then(r=>e.value=r),fetch("/api/config/tracks").then(r=>r.json()).then(r=>s.value=r)},d=async r=>{await fetch("/api/config/images",{method:"DELETE",body:JSON.stringify({name:r})}),n()},a=async r=>{fetch("/api/config/tracks",{method:"DELETE",body:JSON.stringify({name:r})}),n()},i=r=>{p.loadPlaylist("track",r)};n();const h=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()};return(r,w)=>(o(),_("div",ke,[we,v(x,{class:"mb-4",icon:"delete",label:"Clean browser settings",onClick:h}),$e,t("div",xe,[v(x,{icon:"backup",label:"Back up / Export",onClick:w[0]||(w[0]=m=>r.$router.push("/export"))}),v(x,{icon:"cloud_download",label:"Import",onClick:w[1]||(w[1]=m=>r.$router.push("/import"))})]),t("div",Se,[Ce,e.value.length?(o(),_("div",Ve,[(o(!0),_($,null,I(e.value,(m,P)=>(o(),k(j,{key:P,class:"cover-wrapper p-4"},{default:G(()=>[v(ee,{src:m.name,class:"rounded-xl mb-4"},null,8,["src"]),t("div",Pe,[t("p",Ie,[v(q,{text:m.name},null,8,["text"])]),t("span",{class:"ml-2 material-symbols-rounded cursor-pointer",onClick:c=>d(m.name)},"delete",8,Ae)]),(o(!0),_($,null,I(m.songs,(c,u)=>(o(),k(f(W),{id:c.id,key:u,artist:c.artist,cover:c.cover,title:c.title,onPlay:g=>i(c.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(o(),_("span",De,"No local covers"))]),t("div",Ne,[Te,s.value.length?(o(),_("div",Be,[(o(!0),_($,null,I(s.value,(m,P)=>(o(),k(j,{key:P,class:"track p-4"},{default:G(()=>[t("div",Ue,[t("p",Ee,[v(q,{text:m.name},null,8,["text"])]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:c=>a(m.name)},"delete",8,Oe)]),t("div",Le,[t("audio",{src:"/api/"+m.name.replace("local:","/src/tracks/"),controls:""},null,8,Ge)]),(o(!0),_($,null,I(m.songs,(c,u)=>(o(),k(f(W),{id:c.id,key:u,artist:c.artist,cover:c.cover,title:c.title,onPlay:g=>i(c.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(o(),_("span",je,"No local tracks"))])]))}},qe=V(Re,[["__scopeId","data-v-16d50c59"]]),Je={class:"markdown-body"},We=te("<p>By default, reAudioPlayer does not share any data with third parties.</p><p>Optionally, when entering your Spotify credentials, reAudioPlayer can access your Spotify data to offer the following features:</p><ul><li>Display your Spotify playlists and offer importing them</li><li>Search songs on Spotify without leaving reAudioPlayer and adding them to your playlists</li><li>Display song information (BPM, key, etc.) from Spotify</li><li>Search artists on Spotify without leaving reAudioPlayer to display their information and follow them on Spotify</li><li>Display artist information (genres, popularity, etc.) from Spotify</li><li>Provide the release radar</li></ul><p>Optionally, when entering your GitHub credentials, reAudioPlayer can access your GitHub data to offer the following features:</p><ul><li>Storing your library in a GitHub Gist</li><li>Importing your library from a GitHub Gist</li></ul><p>All data stays between your device and Spotify or Github, respectively.</p><p>Depending on the cache policy, reAudioPlayer stores songs locally to improve performance and reduce network traffic. The browser additionally stores the following user preferences in local storage:</p><ul><li>Theme</li><li>Selected audio player</li><li>Volume</li><li>Repeat mode</li><li>Picture in Picture mode</li><li>pre-rendered placeholder images</li></ul><p>You can manage your local data, that you manually uploaded to reAudioPlayer, in section “Local Data”. None of this data left or will leave your device.</p>",9),He=[We],Me={__name:"Privacy",setup(l,{expose:e}){return e({frontmatter:{}}),(p,n)=>(o(),_("div",Je,He))}},Fe={class:"material-symbols-rounded ms-wght-300 cursor-pointer"},Ye={class:"checkbox__label"},ze={class:"checkbox__label__title"},Ke={class:"checkbox__label__sublabel italic"},Qe=S({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},sublabel:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(l,{emit:e}){const s=l,p=e,n=a=>p("update:modelValue",a),d=()=>{s.disabled||n(!s.modelValue)};return(a,i)=>(o(),_("div",{class:T([{"opacity-50":l.disabled},"checkbox"]),onClick:d},[t("span",Fe,b(l.modelValue?"check_box":"check_box_outline_blank"),1),t("div",Ye,[t("div",ze,b(l.label),1),t("div",Ke,b(l.sublabel),1)])],2))}});const A=V(Qe,[["__scopeId","data-v-be9fa887"]]),Xe={class:"relative"},Ze=S({__name:"Cache",setup(l){const e=y(null),s=y("");M().then(d=>{e.value=d,s.value=JSON.stringify(d)});const p=D(()=>e.value?JSON.stringify(e.value)!==s.value:!1),n=async()=>{p.value&&(await Y(e.value),s.value=JSON.stringify(e.value))};return(d,a)=>(o(),_("div",Xe,[e.value?(o(),k(A,{key:0,modelValue:e.value.cache.preserve,"onUpdate:modelValue":a[0]||(a[0]=i=>e.value.cache.preserve=i),label:"Preserve cache"},null,8,["modelValue"])):C("",!0),e.value?(o(),k(A,{key:1,modelValue:e.value.cache.preserveInSession,"onUpdate:modelValue":a[1]||(a[1]=i=>e.value.cache.preserveInSession=i),disabled:e.value.cache.preserve,label:"Preserve cache in session"},null,8,["modelValue","disabled"])):C("",!0),e.value?(o(),k(F,{key:2,modelValue:e.value.cache.strategy,"onUpdate:modelValue":a[2]||(a[2]=i=>e.value.cache.strategy=i),options:[{value:"all",label:"All Songs"},{value:"playlist",label:"Current Playlist"},{value:"currentNext",label:"Current + Next Song "},{value:"current",label:"Current Song Only"}],icon:"cached"},null,8,["modelValue"])):C("",!0),v(x,{disabled:!e.value||!p.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:n},null,8,["disabled"])]))}});const et={name:"Theme",props:{name:String},methods:{selected(){return J.getCurrentTheme()==this.name},select(){J.setTheme(this.name),this.$emit("selected")}}},tt=["src"];function at(l,e,s,p,n,d){return o(),_("div",{onClick:e[0]||(e[0]=(...a)=>d.select&&d.select(...a)),class:"wrapper"},[t("p",{class:T(["mb-4",{selected:d.selected()}])},b(s.name),3),t("img",{src:`/assets/img/themes/${this.name}.svg`,class:T({selected:d.selected()})},null,10,tt)])}const lt=V(et,[["render",at],["__scopeId","data-v-74855c2d"]]),K=l=>(B("data-v-5cc6477c"),l=l(),U(),l),st=K(()=>t("h3",{class:"mt-[10px]"},"Theme",-1)),ot={class:"themes"},nt=K(()=>t("h3",{class:"mt-[10px]"},"Sidebar",-1)),it=S({__name:"Appearance",setup(l){const e=E(),s=["dynamic","light","dark"];return(p,n)=>(o(),_($,null,[st,v(A,{modelValue:f(e).ambient,"onUpdate:modelValue":n[0]||(n[0]=d=>f(e).ambient=d),disabled:!f(e).themeSupportsAmbient,label:"Ambient"},null,8,["modelValue","disabled"]),t("div",ot,[(o(),_($,null,I(s,(d,a)=>v(lt,{key:a,name:d},null,8,["name"])),64))]),nt,v(A,{modelValue:f(e).sidebar.news,"onUpdate:modelValue":n[1]||(n[1]=d=>f(e).sidebar.news=d),label:"Show 'News' Tab"},null,8,["modelValue"]),v(A,{modelValue:f(e).sidebar.sports,"onUpdate:modelValue":n[2]||(n[2]=d=>f(e).sidebar.sports=d),label:"Show 'Sports' Tab"},null,8,["modelValue"])],64))}});const ct=V(it,[["__scopeId","data-v-5cc6477c"]]),rt={class:"relative"},ut=S({__name:"Player",setup(l){const e=E();return(s,p)=>(o(),_("div",rt,[v(A,{modelValue:f(e).player.pictureInPicture,"onUpdate:modelValue":p[0]||(p[0]=n=>f(e).player.pictureInPicture=n),label:"Support Picture in Picture",sublabel:"this will slightly reduce performance"},null,8,["modelValue"]),v(F,{modelValue:f(e).player.type,"onUpdate:modelValue":p[1]||(p[1]=n=>f(e).player.type=n),options:[{value:"web",label:"Native player",icon:"horizontal_rule"},{value:"web/wave",label:"Wave player",icon:"graphic_eq"}],icon:"music_note"},null,8,["modelValue"])]))}});const dt={key:0,class:"material-symbols-rounded"},pt=["disabled","placeholder","type"],_t={__name:"PasswordInputWithIcon",props:{icon:String,placeholder:String,modelValue:String,disabled:Boolean},emits:["update:modelValue","change","submit"],setup(l,{emit:e}){const s=l,p=y(s.modelValue);R(()=>s.modelValue,h=>{p.value=h});const n=e,d=()=>{n("update:modelValue",p.value),n("change",p.value)},a=h=>{h.key==="Enter"&&n("submit",p)},i=y(!1);return(h,r)=>(o(),_("div",{class:T([{disabled:l.disabled},"text-input-with-icon rounded-3xl flex items-center px-4"])},[l.icon?(o(),_("span",dt,b(l.icon),1)):C("",!0),ae(t("input",{"onUpdate:modelValue":r[0]||(r[0]=w=>p.value=w),disabled:l.disabled,placeholder:l.placeholder,type:i.value?"text":"password",onInput:d,onKeyup:a},null,40,pt),[[le,p.value]]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:r[1]||(r[1]=w=>i.value=!i.value)},b(i.value?"visibility":"visibility_off"),1)],2))}},L=V(_t,[["__scopeId","data-v-5e026540"]]),Q="reAudioPlayer One",vt=`https://audius.co/oauth/auth?scope=read&app_name=${Q}&redirect_uri=`,mt="/audius/callback",ht=()=>{const l=encodeURIComponent(`${window.location.origin}${mt}`),e=`${vt}${l}`;window.open(e,Q,"width=500,height=800")},yt=t("summary",{class:"cursor-pointer"},"How to",-1),ft=t("p",null,[N(" 1) Head over to the "),t("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1),bt=t("p",null,"2) Create An App",-1),gt=t("p",null,"3) Enter any name and any description",-1),kt=t("p",null," 5) Copy and enter the client id and secret into the corresponding input field ",-1),wt=t("hr",{class:"my-4"},null,-1),$t=t("h5",null,"Client ID:",-1),xt=t("h5",{class:"mt-4"},"Client Secret:",-1),St=t("h3",{class:"mt-[10px]"},"Github",-1),Ct=t("h5",{class:"mt-4"},"PAT:",-1),Vt=t("h5",{class:"mt-4"},"Gist ID:",-1),Pt={class:"flex gap-4 justify-end mt-4"},It=t("h3",{class:"mt-[10px]"},"Audius",-1),At=S({__name:"Integration",setup(l){const e=y(!1),s=y({id:"",secret:""}),p=D(()=>e.value?Object.values(s.value).some(c=>c==="")?!1:s.value.id!==n.value.id||s.value.secret!==n.value.secret||e.value!==n.value.enabled:n.value.enabled),n=y({id:"",secret:"",enabled:!1});fetch("/api/config/spotify").then(async c=>{let u={id:"",secret:"",enabled:!1};if(c.status==200)u=await c.json();else if([204,401].includes(c.status))u={id:"restricted",secret:"restricted",enabled:!1};else throw new Error("Failed to fetch spotify config");n.value=u,n.value.enabled=![u.id,u.secret].includes("restricted"),e.value=n.value.enabled,s.value.id=u.id.replace("restricted",""),s.value.secret=u.secret.replace("restricted","")});const d=async()=>{if(!p.value)return;let c=s.value.id,u=s.value.secret;e.value||(u=c="restricted"),(await fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:c,secret:u})})).ok&&(n.value={id:c,secret:u,enabled:e.value})},a=y(null),i=y("");M().then(c=>{a.value=c,i.value=JSON.stringify(c)});const h=D(()=>a.value?JSON.stringify(a.value)!==i.value:!1),r=async()=>{h.value&&(await Y(a.value),i.value=JSON.stringify(a.value))},m=`http://${window.location.host}/api/spotify/callback`,P=async()=>{var c,u;(u=(c=a.value)==null?void 0:c.github)!=null&&u.githubPat&&(a.value.github.gistId||(a.value.github.gistId=await ue.search(a.value.github.githubPat),a.value.github.gistId||oe.addError("Failed to find gist","You can start syncing directly in 'Local Data' (a Gist will be created for you) or enter the gist id manually")))};return R(()=>{var c,u;return(u=(c=a.value)==null?void 0:c.github)==null?void 0:u.githubPat},P),(c,u)=>(o(),_($,null,[v(A,{modelValue:e.value,"onUpdate:modelValue":u[0]||(u[0]=g=>e.value=g),class:"h3 mb-2",label:"Spotify"},null,8,["modelValue"]),t("details",null,[yt,ft,bt,gt,t("p",null,[N(" 4) Edit the settings: set the redirect url to "),t("a",{href:m},b(m))]),kt]),wt,$t,v(L,{modelValue:s.value.id,"onUpdate:modelValue":u[1]||(u[1]=g=>s.value.id=g),disabled:!e.value,icon:"token"},null,8,["modelValue","disabled"]),xt,v(L,{modelValue:s.value.secret,"onUpdate:modelValue":u[2]||(u[2]=g=>s.value.secret=g),disabled:!e.value,icon:"lock"},null,8,["modelValue","disabled"]),v(x,{disabled:!p.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:d},null,8,["disabled"]),St,Ct,a.value?(o(),k(L,{key:0,modelValue:a.value.github.githubPat,"onUpdate:modelValue":u[3]||(u[3]=g=>a.value.github.githubPat=g),icon:"lock"},null,8,["modelValue"])):C("",!0),Vt,a.value?(o(),k(se,{key:1,modelValue:a.value.github.gistId,"onUpdate:modelValue":u[4]||(u[4]=g=>a.value.github.gistId=g),icon:"numbers"},null,8,["modelValue"])):C("",!0),t("div",Pt,[v(x,{disabled:!a.value||!a.value.github.githubPat||!!a.value.github.gistId,icon:"search",label:"Search",onClick:P},null,8,["disabled"]),v(x,{disabled:!a.value||!h.value,icon:"save",label:"Save",onClick:r},null,8,["disabled"])]),It,v(x,{icon:"link",label:"Connect",onClick:f(ht)},null,8,["onClick"])],64))}}),Dt={class:"flex items-center gap-2"},Nt=S({__name:"Developer",setup(l){E();const e=()=>{fetch("/api/system/kill")},s=()=>{fetch("/api/system/restart/nginx")};return(p,n)=>(o(),_("div",Dt,[v(x,{icon:"refresh",label:"Restart",onClick:e,type:"danger"}),v(x,{icon:"refresh",label:"Restart Nginx",onClick:s})]))}}),Tt=l=>(B("data-v-2a5c5e34"),l=l(),U(),l),Bt={class:"p-[10px] preferences"},Ut=Tt(()=>t("h1",{class:"w-full"},"Preferences",-1)),Et={class:"wrapper"},Ot={class:"sections flex flex-col"},Lt={class:"section p-2"},Gt={class:"h5 text-sm"},jt=S({__name:"index",setup(l){const e=E(),s={About:ge,Privacy:Me,"Local Data":qe,Integrations:At,"Cache Policy":Ze,Appearance:ct,Player:ut,Developer:Nt},p=D(()=>{const h=[{name:"General",items:["About"]},{name:"My Data",items:["Privacy","Local Data","Integrations"]},{name:"Player",items:["Player","Cache Policy"]},{name:"Appearance",items:["Appearance"]}];return e.mode.dev&&h.push({name:"Developer",items:["Developer"]}),h}),n=ne(),d=ie();let a=n.query.tab;const i=y("About");return Object.keys(s).includes(a)&&(i.value=a),R(i,h=>{const r={tab:h};d.replace({query:r})}),(h,r)=>(o(),_("div",Bt,[Ut,t("div",Et,[t("div",Ot,[(o(!0),_($,null,I(p.value,w=>(o(),_("div",Lt,[t("span",Gt,b(w.name),1),(o(!0),_($,null,I(w.items,m=>(o(),k(pe,{key:m,name:m,active:i.value===m,onClick:P=>i.value=m},null,8,["name","active","onClick"]))),128))]))),256))]),v(j,{class:"content h-max p-4 pt-0"},{default:G(()=>[t("h2",null,b(i.value),1),(o(),k(ce(s[i.value])))]),_:1})])]))}});const Ht=V(jt,[["__scopeId","data-v-2a5c5e34"]]);export{Ht as default};
