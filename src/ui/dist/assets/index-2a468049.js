import{i as S,o as s,c as d,t as g,aS as T,_ as V,q as v,J as X,B as D,f as w,d as $,a as t,b as A,F as k,m as N,n as B,c0 as Z,g as m,j as C,w as O,h as ee,M as G,u as b,C as U,ag as te,cd as H,ce as M,cf as L,cg as R,G as F,bQ as ae,bE as le,T as j,E as se,bc as oe}from"./index-6037c2e6.js";import{_ as ne}from"./Markdown.vue_vue_type_style_index_0_lang-ab6f98f5.js";import{T as q}from"./TrackCompact-031fa8cf.js";import{I}from"./IconButton-494923f5.js";import{D as z}from"./Form-7562a847.js";import{G as ie}from"./gistClient-5acc6fac.js";import"./Template-1ba334d1.js";import"./ImportSpotifyAlbum.vue_vue_type_script_setup_true_lang-1d59b769.js";import"./Playlist-d536005f.js";import"./PlaylistHeader-b8b11008.js";import"./ExternalEntry-2514f2ea.js";const re=S({__name:"TabButton",props:{name:{type:String,required:!0},active:{type:Boolean,default:!1}},setup(l){return(e,o)=>(s(),d("button",{class:T(["btn",{active:l.active}])},g(l.name),3))}});const ce=V(re,[["__scopeId","data-v-3f038910"]]),ue="0.11.9",K=l=>(N("data-v-0f054692"),l=l(),B(),l),de={class:"flex flex-col"},pe={key:0,class:"text-sm flex items-center gap-2 latest"},_e=K(()=>t("span",{class:"material-symbols-rounded"},"check",-1)),me={key:1,class:"text-sm flex items-center gap-2 update"},ve=K(()=>t("span",{class:"material-symbols-rounded"},"update",-1)),J="0.11.1",he=S({__name:"About",setup(l){const e=v(""),o=v("");X(async()=>{const u=await(await fetch("https://api.github.com/repos/reAudioPlayer/one/releases/latest")).json();e.value=u.tag_name,o.value=u.body});const p=D(()=>e.value===J),i=D(()=>ue.split(".").pop()),r=v(null);return(n,u)=>(s(),d("div",de,[o.value?(s(),w(ne,{key:0,content:o.value,title:"What's new in "+e.value,ref_key:"changelog",ref:r,onClose:u[0]||(u[0]=()=>o.value="")},null,8,["content","title"])):$("",!0),t("span",null,[t("strong",null,"v"+g(J)),A(" (Build "+g(i.value)+") ",1)]),e.value?(s(),d(k,{key:1},[p.value?(s(),d("span",pe,[_e,A(" You're on the latest version "),t("a",{class:"cursor-pointer",onClick:u[1]||(u[1]=h=>{var c;return(c=r.value)==null?void 0:c.show()})}," What's changed? ")])):(s(),d("span",me,[ve,A(" Update available: "+g(e.value)+" ",1),t("a",{class:"cursor-pointer",onClick:u[2]||(u[2]=h=>{var c;return(c=r.value)==null?void 0:c.show()})}," What's changed? ")]))],64)):$("",!0)]))}});const ye=V(he,[["__scopeId","data-v-0f054692"]]);const E=l=>(N("data-v-16d50c59"),l=l(),B(),l),fe={class:"wrap"},be=E(()=>t("h3",null,"Browser Data",-1)),ge=E(()=>t("h3",null,"Import / Export",-1)),we={class:"flex gap-4 mb-4"},ke={class:"covers mb-2"},xe=E(()=>t("h3",null,"Local covers",-1)),$e={key:0,class:"items gap-4"},Se={class:"flex justify-between w-full mb-4"},Ve={class:"overflow-hidden"},Ce=["onClick"],Pe={key:1,class:"text-muted italic"},Ie={class:"tracks"},Ae=E(()=>t("h3",null,"Local tracks",-1)),Te={key:0,class:"items gap-4"},De={class:"flex justify-between w-full mb-4"},Ne={class:"overflow-hidden"},Be=["onClick"],Ee={class:"flex justify-center w-full mb-4"},Oe=["src"],Ue={key:1,class:"text-muted italic"},Ge={__name:"LocalData",setup(l){const e=v([]),o=v([]),p=Z(),i=()=>{fetch("/api/config/images").then(c=>c.json()).then(c=>e.value=c),fetch("/api/config/tracks").then(c=>c.json()).then(c=>o.value=c)},r=async c=>{await fetch("/api/config/images",{method:"DELETE",body:JSON.stringify({name:c})}),i()},n=async c=>{fetch("/api/config/tracks",{method:"DELETE",body:JSON.stringify({name:c})}),i()},u=c=>{p.loadPlaylist("track",c)};i();const h=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()};return(c,x)=>(s(),d("div",fe,[be,m(I,{class:"mb-4",icon:"delete",label:"Clean browser settings",onClick:h}),ge,t("div",we,[m(I,{icon:"backup",label:"Back up / Export",onClick:x[0]||(x[0]=y=>c.$router.push("/export"))}),m(I,{icon:"cloud_download",label:"Import",onClick:x[1]||(x[1]=y=>c.$router.push("/import"))})]),t("div",ke,[xe,e.value.length?(s(),d("div",$e,[(s(!0),d(k,null,C(e.value,(y,_)=>(s(),w(U,{key:_,class:"cover-wrapper p-4"},{default:O(()=>[m(ee,{src:y.name,class:"rounded-xl mb-4"},null,8,["src"]),t("div",Se,[t("p",Ve,[m(G,{text:y.name},null,8,["text"])]),t("span",{class:"ml-2 material-symbols-rounded cursor-pointer",onClick:a=>r(y.name)},"delete",8,Ce)]),(s(!0),d(k,null,C(y.songs,(a,f)=>(s(),w(b(q),{id:a.id,key:f,artist:a.artist,cover:a.cover,title:a.title,onPlay:Q=>u(a.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(s(),d("span",Pe,"No local covers"))]),t("div",Ie,[Ae,o.value.length?(s(),d("div",Te,[(s(!0),d(k,null,C(o.value,(y,_)=>(s(),w(U,{key:_,class:"track p-4"},{default:O(()=>[t("div",De,[t("p",Ne,[m(G,{text:y.name},null,8,["text"])]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:a=>n(y.name)},"delete",8,Be)]),t("div",Ee,[t("audio",{src:"/api/"+y.name.replace("local:","/src/tracks/"),controls:""},null,8,Oe)]),(s(!0),d(k,null,C(y.songs,(a,f)=>(s(),w(b(q),{id:a.id,key:f,artist:a.artist,cover:a.cover,title:a.title,onPlay:Q=>u(a.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(s(),d("span",Ue,"No local tracks"))])]))}},Le=V(Ge,[["__scopeId","data-v-16d50c59"]]),je={class:"markdown-body"},qe=te("<p>By default, reAudioPlayer does not share any data with third parties.</p><p>Optionally, when entering your Spotify credentials, reAudioPlayer can access your Spotify data to offer the following features:</p><ul><li>Display your Spotify playlists and offer importing them</li><li>Search songs on Spotify without leaving reAudioPlayer and adding them to your playlists</li><li>Display song information (BPM, key, etc.) from Spotify</li><li>Search artists on Spotify without leaving reAudioPlayer to display their information and follow them on Spotify</li><li>Display artist information (genres, popularity, etc.) from Spotify</li><li>Provide the release radar</li></ul><p>Optionally, when entering your GitHub credentials, reAudioPlayer can access your GitHub data to offer the following features:</p><ul><li>Storing your library in a GitHub Gist</li><li>Importing your library from a GitHub Gist</li></ul><p>All data stays between your device and Spotify or Github, respectively.</p><p>Depending on the cache policy, reAudioPlayer stores songs locally to improve performance and reduce network traffic. The browser additionally stores the following user preferences in local storage:</p><ul><li>Theme</li><li>Selected audio player</li><li>Volume</li><li>Repeat mode</li><li>Picture in Picture mode</li><li>pre-rendered placeholder images</li></ul><p>You can manage your local data, that you manually uploaded to reAudioPlayer, in section “Local Data”. None of this data left or will leave your device.</p>",9),Je=[qe],We={__name:"Privacy",setup(l,{expose:e}){return e({frontmatter:{}}),(p,i)=>(s(),d("div",je,Je))}},He={class:"material-symbols-rounded ms-wght-300 cursor-pointer"},Me={class:"checkbox__label"},Re={class:"checkbox__label__title"},Fe={class:"checkbox__label__sublabel italic"},ze=S({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},sublabel:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(l,{emit:e}){const o=l,p=e,i=n=>p("update:modelValue",n),r=()=>{o.disabled||i(!o.modelValue)};return(n,u)=>(s(),d("div",{class:T([{"opacity-50":l.disabled},"checkbox"]),onClick:r},[t("span",He,g(l.modelValue?"check_box":"check_box_outline_blank"),1),t("div",Me,[t("div",Re,g(l.label),1),t("div",Fe,g(l.sublabel),1)])],2))}});const P=V(ze,[["__scopeId","data-v-be9fa887"]]),Ke={class:"relative"},Ye=S({__name:"Cache",setup(l){const e=v(null),o=v("");H().then(r=>{e.value=r,o.value=JSON.stringify(r)});const p=D(()=>e.value?JSON.stringify(e.value)!==o.value:!1),i=async()=>{p.value&&(await M(e.value),o.value=JSON.stringify(e.value))};return(r,n)=>(s(),d("div",Ke,[e.value?(s(),w(P,{key:0,modelValue:e.value.cache.preserve,"onUpdate:modelValue":n[0]||(n[0]=u=>e.value.cache.preserve=u),label:"Preserve cache"},null,8,["modelValue"])):$("",!0),e.value?(s(),w(P,{key:1,modelValue:e.value.cache.preserveInSession,"onUpdate:modelValue":n[1]||(n[1]=u=>e.value.cache.preserveInSession=u),disabled:e.value.cache.preserve,label:"Preserve cache in session"},null,8,["modelValue","disabled"])):$("",!0),e.value?(s(),w(z,{key:2,modelValue:e.value.cache.strategy,"onUpdate:modelValue":n[2]||(n[2]=u=>e.value.cache.strategy=u),options:[{value:"all",label:"All Songs"},{value:"playlist",label:"Current Playlist"},{value:"currentNext",label:"Current + Next Song "},{value:"current",label:"Current Song Only"}],icon:"cached"},null,8,["modelValue"])):$("",!0),m(I,{disabled:!e.value||!p.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:i},null,8,["disabled"])]))}});const Qe={name:"Theme",props:{name:String},methods:{selected(){return L.getCurrentTheme()==this.name},select(){L.setTheme(this.name),this.$emit("selected")}}},Xe=["src"];function Ze(l,e,o,p,i,r){return s(),d("div",{onClick:e[0]||(e[0]=(...n)=>r.select&&r.select(...n)),class:"wrapper"},[t("p",{class:T(["mb-4",{selected:r.selected()}])},g(o.name),3),t("img",{src:`/assets/img/themes/${this.name}.svg`,class:T({selected:r.selected()})},null,10,Xe)])}const et=V(Qe,[["render",Ze],["__scopeId","data-v-74855c2d"]]),Y=l=>(N("data-v-5cc6477c"),l=l(),B(),l),tt=Y(()=>t("h3",{class:"mt-[10px]"},"Theme",-1)),at={class:"themes"},lt=Y(()=>t("h3",{class:"mt-[10px]"},"Sidebar",-1)),st=S({__name:"Appearance",setup(l){const e=R(),o=["dynamic","light","dark"];return(p,i)=>(s(),d(k,null,[tt,m(P,{modelValue:b(e).ambient,"onUpdate:modelValue":i[0]||(i[0]=r=>b(e).ambient=r),disabled:!b(e).themeSupportsAmbient,label:"Ambient"},null,8,["modelValue","disabled"]),t("div",at,[(s(),d(k,null,C(o,(r,n)=>m(et,{key:n,name:r},null,8,["name"])),64))]),lt,m(P,{modelValue:b(e).sidebar.news,"onUpdate:modelValue":i[1]||(i[1]=r=>b(e).sidebar.news=r),label:"Show 'News' Tab"},null,8,["modelValue"]),m(P,{modelValue:b(e).sidebar.sports,"onUpdate:modelValue":i[2]||(i[2]=r=>b(e).sidebar.sports=r),label:"Show 'Sports' Tab"},null,8,["modelValue"])],64))}});const ot=V(st,[["__scopeId","data-v-5cc6477c"]]),nt={class:"relative"},it=S({__name:"Player",setup(l){const e=R();return(o,p)=>(s(),d("div",nt,[m(P,{modelValue:b(e).player.pictureInPicture,"onUpdate:modelValue":p[0]||(p[0]=i=>b(e).player.pictureInPicture=i),label:"Support Picture in Picture",sublabel:"this will slightly reduce performance"},null,8,["modelValue"]),m(z,{modelValue:b(e).player.type,"onUpdate:modelValue":p[1]||(p[1]=i=>b(e).player.type=i),options:[{value:"web",label:"Native player",icon:"horizontal_rule"},{value:"web/wave",label:"Wave player",icon:"graphic_eq"}],icon:"music_note"},null,8,["modelValue"])]))}});const rt={key:0,class:"material-symbols-rounded"},ct=["disabled","placeholder","type"],ut={__name:"PasswordInputWithIcon",props:{icon:String,placeholder:String,modelValue:String,disabled:Boolean},emits:["update:modelValue","change","submit"],setup(l,{emit:e}){const o=l,p=v(o.modelValue);F(()=>o.modelValue,h=>{p.value=h});const i=e,r=()=>{i("update:modelValue",p.value),i("change",p.value)},n=h=>{h.key==="Enter"&&i("submit",p)},u=v(!1);return(h,c)=>(s(),d("div",{class:T([{disabled:l.disabled},"text-input-with-icon rounded-3xl flex items-center px-4"])},[l.icon?(s(),d("span",rt,g(l.icon),1)):$("",!0),ae(t("input",{"onUpdate:modelValue":c[0]||(c[0]=x=>p.value=x),disabled:l.disabled,placeholder:l.placeholder,type:u.value?"text":"password",onInput:r,onKeyup:n},null,40,ct),[[le,p.value]]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:c[1]||(c[1]=x=>u.value=!u.value)},g(u.value?"visibility":"visibility_off"),1)],2))}},W=V(ut,[["__scopeId","data-v-5e026540"]]),dt=t("summary",{class:"cursor-pointer"},"How to",-1),pt=t("p",null,[A(" 1) Head over to the "),t("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1),_t=t("p",null,"2) Create An App",-1),mt=t("p",null,"3) Enter any name and any description",-1),vt=t("p",null," 5) Copy and enter the client id and secret into the corresponding input field ",-1),ht=t("hr",{class:"my-4"},null,-1),yt=t("h5",null,"Client ID:",-1),ft=t("h5",{class:"mt-4"},"Client Secret:",-1),bt=t("h3",{class:"mt-[10px]"},"Github",-1),gt=t("h5",{class:"mt-4"},"PAT:",-1),wt=t("h5",{class:"mt-4"},"Gist ID:",-1),kt=S({__name:"Integration",setup(l){const e=v(!1),o=v({id:"",secret:""}),p=D(()=>e.value?Object.values(o.value).some(_=>_==="")?!1:o.value.id!==i.value.id||o.value.secret!==i.value.secret||e.value!==i.value.enabled:i.value.enabled),i=v({id:"",secret:"",enabled:!1});fetch("/api/config/spotify").then(async _=>{let a={id:"",secret:"",enabled:!1};if(_.status==200)a=await _.json();else if([204,401].includes(_.status))a={id:"restricted",secret:"restricted",enabled:!1};else throw new Error("Failed to fetch spotify config");i.value=a,i.value.enabled=![a.id,a.secret].includes("restricted"),e.value=i.value.enabled,o.value.id=a.id.replace("restricted",""),o.value.secret=a.secret.replace("restricted","")});const r=async()=>{if(!p.value)return;let _=o.value.id,a=o.value.secret;e.value||(a=_="restricted"),(await fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:_,secret:a})})).ok&&(i.value={id:_,secret:a,enabled:e.value})},n=v(null),u=v("");H().then(_=>{n.value=_,u.value=JSON.stringify(_)});const h=D(()=>n.value?JSON.stringify(n.value)!==u.value:!1),c=async()=>{h.value&&(await M(n.value),u.value=JSON.stringify(n.value))},y=`http://${window.location.host}/api/spotify/callback`;return F(()=>{var _,a;return(a=(_=n.value)==null?void 0:_.github)==null?void 0:a.githubPat},async()=>{var _,a;(a=(_=n.value)==null?void 0:_.github)!=null&&a.githubPat&&(n.value.github.gistId||(n.value.github.gistId=await ie.search(n.value.github.githubPat),console.log(n.value.github.gistId)))}),(_,a)=>(s(),d(k,null,[m(P,{modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=f=>e.value=f),class:"h3 mb-2",label:"Spotify"},null,8,["modelValue"]),t("details",null,[dt,pt,_t,mt,t("p",null,[A(" 4) Edit the settings: set the redirect url to "),t("a",{href:y},g(y))]),vt]),ht,yt,m(W,{modelValue:o.value.id,"onUpdate:modelValue":a[1]||(a[1]=f=>o.value.id=f),disabled:!e.value,icon:"token"},null,8,["modelValue","disabled"]),ft,m(W,{modelValue:o.value.secret,"onUpdate:modelValue":a[2]||(a[2]=f=>o.value.secret=f),disabled:!e.value,icon:"lock"},null,8,["modelValue","disabled"]),m(I,{disabled:!p.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:r},null,8,["disabled"]),bt,gt,n.value?(s(),w(j,{key:0,modelValue:n.value.github.githubPat,"onUpdate:modelValue":a[3]||(a[3]=f=>n.value.github.githubPat=f),icon:"lock"},null,8,["modelValue"])):$("",!0),wt,n.value?(s(),w(j,{key:1,modelValue:n.value.github.gistId,"onUpdate:modelValue":a[4]||(a[4]=f=>n.value.github.gistId=f),icon:"numbers"},null,8,["modelValue"])):$("",!0),m(I,{disabled:!n.value||!h.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:c},null,8,["disabled"])],64))}}),xt=l=>(N("data-v-0ec4be20"),l=l(),B(),l),$t={class:"p-[10px] preferences"},St=xt(()=>t("h1",{class:"w-full"},"Preferences",-1)),Vt={class:"wrapper"},Ct={class:"sections flex flex-col"},Pt={class:"section p-2"},It={class:"h5 text-sm"},At=S({__name:"index",setup(l){const e={About:ye,Privacy:We,"Local Data":Le,Integrations:kt,"Cache Policy":Ye,Appearance:ot,Player:it},o=v([{name:"General",items:["About"]},{name:"My Data",items:["Privacy","Local Data","Integrations"]},{name:"Player",items:["Player","Cache Policy"]},{name:"Appearance",items:["Appearance"]}]);let i=se().query.tab;const r=v("About");return Object.keys(e).includes(i)&&(r.value=i),(n,u)=>(s(),d("div",$t,[St,t("div",Vt,[t("div",Ct,[(s(!0),d(k,null,C(o.value,h=>(s(),d("div",Pt,[t("span",It,g(h.name),1),(s(!0),d(k,null,C(h.items,c=>(s(),w(ce,{key:c,name:c,active:r.value===c,onClick:x=>r.value=c},null,8,["name","active","onClick"]))),128))]))),256))]),m(U,{class:"content h-max p-4 pt-0"},{default:O(()=>[t("h2",null,g(r.value),1),(s(),w(oe(e[r.value])))]),_:1})])]))}});const Jt=V(At,[["__scopeId","data-v-0ec4be20"]]);export{Jt as default};
