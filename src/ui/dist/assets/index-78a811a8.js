import{n as H,B as K,c as g,g as W,u as d,H as $,t as x,f as A,d as C,a as I,F as j,i as F,o as f,I as B,b as G,bK as N,L as O,_ as q}from"./index-65db2c2c.js";import{I as V}from"./IconButton-4d0597f4.js";var S={d:(t,a)=>{for(var e in a)S.o(a,e)&&!S.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:a[e]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a)},y={};function Y(t){let a=[],e=0;for(let o=0;o<t.length;o++){let i=t.charCodeAt(o);128>i?a[e++]=i:(2048>i?a[e++]=i>>6|192:((64512&i)==55296&&o+1<t.length&&(64512&t.charCodeAt(o+1))==56320?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++o)),a[e++]=i>>18|240,a[e++]=i>>12&63|128):a[e++]=i>>12|224,a[e++]=i>>6&63|128),a[e++]=63&i|128)}let n=0;for(e=0;e<a.length;e++)n+=a[e],n=z(n,"+-a^+6");return n=z(n,"+-3^+b+-f"),n^=0,0>n&&(n=2147483648+(2147483647&n)),n%=1e6,n.toString()+"."+n.toString()}S.d(y,{ZP:()=>Q,j1:()=>L,Gb:()=>X,e6:()=>P,XU:()=>J,Iu:()=>M});const z=function(t,a){for(let e=0;e<a.length-2;e+=3){let n=a.charAt(e+2);n="a"<=n?n.charCodeAt(0)-87:Number(n),n=a.charAt(e+1)=="+"?t>>>n:t<<n,t=a.charAt(e)=="+"?t+n:t^n}return t},R={client:"gtx",from:"auto",to:"en",hl:"en",tld:"com"};function L(t,a){const e=Object.assign(Object.assign({},R),a),n={client:e.client,sl:e.from,tl:e.to,hl:e.hl,ie:"UTF-8",oe:"UTF-8",otf:"1",ssel:"0",tsel:"0",kc:"7",q:t,tk:Y(t)},o=new URLSearchParams(n);return["at","bd","ex","ld","md","qca","rw","rm","ss","t"].forEach(i=>o.append("dt",i)),`https://translate.google.${e.tld}/translate_a/single?${o}`}const D={auto:"Automatic",af:"Afrikaans",sq:"Albanian",am:"Amharic",ar:"Arabic",hy:"Armenian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",bg:"Bulgarian",ca:"Catalan",ceb:"Cebuano",ny:"Chichewa",zh:"Chinese Simplified","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",co:"Corsican",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",eo:"Esperanto",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",fy:"Frisian",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gu:"Gujarati",ht:"Haitian Creole",ha:"Hausa",haw:"Hawaiian",he:"Hebrew",iw:"Hebrew",hi:"Hindi",hmn:"Hmong",hu:"Hungarian",is:"Icelandic",ig:"Igbo",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",jw:"Javanese",kn:"Kannada",kk:"Kazakh",km:"Khmer",rw:"Kinyarwanda",ko:"Korean",ku:"Kurdish (Kurmanji)",ky:"Kyrgyz",lo:"Lao",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mn:"Mongolian",my:"Myanmar (Burmese)",ne:"Nepali",no:"Norwegian",or:"Odia (Oriya)",ps:"Pashto",fa:"Persian",pl:"Polish",pt:"Portuguese",pa:"Punjabi",ro:"Romanian",ru:"Russian",sm:"Samoan",gd:"Scots Gaelic",sr:"Serbian",st:"Sesotho",sn:"Shona",sd:"Sindhi",si:"Sinhala",sk:"Slovak",sl:"Slovenian",so:"Somali",es:"Spanish",su:"Sundanese",sw:"Swahili",sv:"Swedish",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",ur:"Urdu",ug:"Uyghur",uz:"Uzbek",vi:"Vietnamese",cy:"Welsh",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu"},X=t=>Boolean(D[t]);function P(t,a=!1){const e={text:"",pronunciation:"",from:{language:{didYouMean:!1,iso:""},text:{autoCorrected:!1,value:"",didYouMean:!1}}};if(t[0].forEach(n=>{n[0]?e.text+=n[0]:n[2]&&(e.pronunciation+=n[2])}),t[2]===t[8][0][0]?e.from.language.iso=t[2]:(e.from.language.didYouMean=!0,e.from.language.iso=t[8][0][0]),t[7]&&t[7][0]){let n=t[7][0];n=n.replace(/<b><i>/g,"["),n=n.replace(/<\/i><\/b>/g,"]"),e.from.text.value=n,t[7][5]===!0?e.from.text.autoCorrected=!0:e.from.text.didYouMean=!0}return a&&(e.raw=t),e}var Z=function(t,a,e,n){return new(e||(e=Promise))(function(o,i){function w(u){try{p(n.next(u))}catch(r){i(r)}}function v(u){try{p(n.throw(u))}catch(r){i(r)}}function p(u){var r;u.done?o(u.value):(r=u.value,r instanceof e?r:new e(function(s){s(r)})).then(w,v)}p((n=n.apply(t,a||[])).next())})};let U="";const J=t=>(U=t,M);function M(t,a={}){return Z(this,void 0,void 0,function*(){const e=L(t,a),n=yield fetch(`${U}${e}`);if(!n.ok)throw new Error("Request failed");return P(yield n.json(),a.raw)})}const Q=M;y.ZP;y.j1;y.Gb;y.e6;var ee=y.XU;y.Iu;const ne={key:0,class:"fill-page"},te={key:0},ae={class:"w-full flex flex-row justify-end"},re={key:1,class:"lyrics"},se=["onClick"],ie=["onClick"],oe=H({__name:"index",setup(t){const a=ee("http://localhost:1234/api/cors/"),e=K(),n=r=>{var m,k;if(!((m=e.lyrics)!=null&&m.lyrics))return!1;const s=e.progress*1e3,l=e.lyrics.lyrics[r],c=parseInt(l.startTimeMs),h=parseInt(l.endTimeMs)?parseInt(l.endTimeMs):parseInt((k=e.lyrics.lyrics[r+1])==null?void 0:k.startTimeMs);if(s>=c&&s<h){const b=document.querySelector(`.line:nth-child(${r+1})`);return b&&b.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),"current"}return s>=h?"past":"future"},o=r=>{e.lyrics.lyrics[r].originalWorlds?w(r):i(r)},i=async r=>{const s=e.lyrics.lyrics[r];if(s.originalWorlds)return;const l=await a(s.words,{to:"en"});s.originalWorlds=s.words,s.words=l.text},w=r=>{const s=e.lyrics.lyrics[r];s.originalWorlds&&(s.words=s.originalWorlds,s.originalWorlds=null)},v=()=>{var r,s;(s=(r=e.lyrics)==null?void 0:r.lyrics)==null||s.forEach((l,c)=>{i(c)})},p=()=>{var r,s;(s=(r=e.lyrics)==null?void 0:r.lyrics)==null||s.forEach((l,c)=>{w(c)})},u=()=>{var s,l,c,h;const r=(l=(s=e.lyrics)==null?void 0:s.lyrics)==null?void 0:l.filter(m=>m.originalWorlds).length;return r&&r>((h=(c=e.lyrics)==null?void 0:c.lyrics)==null?void 0:h.length)/2};return(r,s)=>{var l,c,h,m,k,b;return f(),g(j,null,[W($,{src:d(e).song.cover},null,8,["src"]),!d(e).lyrics||(l=d(e).lyrics)!=null&&l.error?(f(),g("div",ne,[(c=d(e).lyrics)!=null&&c.error?(f(),g("h1",te,x((h=d(e).lyrics)==null?void 0:h.error),1)):(f(),A(O,{key:1}))])):C("",!0),I("div",ae,[(m=d(e).lyrics)!=null&&m.lyrics?(f(),A(V,{key:0,icon:"translate",label:u()?"Show original":"Translate all",class:"mr-2",onClick:s[0]||(s[0]=_=>u()?p():v())},null,8,["label"])):C("",!0)]),(k=d(e).lyrics)!=null&&k.lyrics?(f(),g("div",re,[(f(!0),g(j,null,F((b=d(e).lyrics)==null?void 0:b.lyrics,(_,T)=>(f(),g("div",{class:B(["line",n(T)]),onClick:E=>d(e).seek(parseInt(_.startTimeMs)/1e3)},[G(x(_.words)+" ",1),I("span",{class:B(["material-symbols-rounded translate",{translated:_.originalWorlds}]),onClick:N(E=>o(T),["stop"])}," translate ",10,ie)],10,se))),256))])):C("",!0)],64)}}});const ue=q(oe,[["__scopeId","data-v-56ae1f29"]]);export{ue as default};
