import{i as C,o as s,c as _,t as g,O as D,_ as V,q as v,E as X,D as N,f as w,d as S,a as t,b as T,F as $,m as B,n as U,c9 as Z,g as m,I as x,j as P,w as L,h as ee,M as j,u as f,C as G,aq as te,cm as M,cn as H,co as F,cp as J,cq as Y,G as q,bY as ae,bM as le,Y as se,cr as oe,B as ne,s as ie,bk as ce}from"./index-a6d58c15.js";import{_ as re}from"./Markdown.vue_vue_type_style_index_0_lang-2f3b772e.js";import{T as R}from"./TrackCompact-e249381d.js";import{G as ue}from"./gistClient-78364842.js";const de=C({__name:"TabButton",props:{name:{type:String,required:!0},active:{type:Boolean,default:!1}},setup(l){return(e,o)=>(s(),_("button",{class:D(["btn",{active:l.active}])},g(l.name),3))}});const pe=V(de,[["__scopeId","data-v-3f038910"]]),_e="0.11.20",z=l=>(B("data-v-6c134c33"),l=l(),U(),l),me={class:"flex flex-col"},ve={key:0,class:"text-sm flex items-center gap-2 latest"},he=z(()=>t("span",{class:"material-symbols-rounded"},"check",-1)),ye={key:1,class:"text-sm flex items-center gap-2 update"},fe=z(()=>t("span",{class:"material-symbols-rounded"},"update",-1)),W="0.11.2",be=C({__name:"About",setup(l){const e=v(""),o=v("");X(async()=>{const d=await(await fetch("https://api.github.com/repos/reAudioPlayer/one/releases/latest")).json();e.value=d.tag_name,o.value=d.body});const p=N(()=>e.value===W),n=N(()=>_e.split(".").pop()),u=v(null);return(a,d)=>(s(),_("div",me,[o.value?(s(),w(re,{key:0,content:o.value,title:"What's new in "+e.value,ref_key:"changelog",ref:u,onClose:d[0]||(d[0]=()=>o.value="")},null,8,["content","title"])):S("",!0),t("span",null,[t("strong",null,"v"+g(W)),T(" (Build "+g(n.value)+") ",1)]),e.value?(s(),_($,{key:1},[p.value?(s(),_("span",ve,[he,T(" You're on the latest version "),t("a",{class:"cursor-pointer",onClick:d[1]||(d[1]=y=>{var c;return(c=u.value)==null?void 0:c.show()})}," What's changed? ")])):(s(),_("span",ye,[fe,T(" Update available: "+g(e.value)+" ",1),t("a",{class:"cursor-pointer",onClick:d[2]||(d[2]=y=>{var c;return(c=u.value)==null?void 0:c.show()})}," What's changed? ")]))],64)):S("",!0)]))}});const ge=V(be,[["__scopeId","data-v-6c134c33"]]);const E=l=>(B("data-v-16d50c59"),l=l(),U(),l),ke={class:"wrap"},we=E(()=>t("h3",null,"Browser Data",-1)),$e=E(()=>t("h3",null,"Import / Export",-1)),xe={class:"flex gap-4 mb-4"},Se={class:"covers mb-2"},Ce=E(()=>t("h3",null,"Local covers",-1)),Ve={key:0,class:"items gap-4"},Pe={class:"flex justify-between w-full mb-4"},Ie={class:"overflow-hidden"},Ae=["onClick"],Te={key:1,class:"text-muted italic"},De={class:"tracks"},Ne=E(()=>t("h3",null,"Local tracks",-1)),Be={key:0,class:"items gap-4"},Ue={class:"flex justify-between w-full mb-4"},Ee={class:"overflow-hidden"},Oe=["onClick"],Le={class:"flex justify-center w-full mb-4"},Ge=["src"],qe={key:1,class:"text-muted italic"},je={__name:"LocalData",setup(l){const e=v([]),o=v([]),p=Z(),n=()=>{fetch("/api/config/images").then(c=>c.json()).then(c=>e.value=c),fetch("/api/config/tracks").then(c=>c.json()).then(c=>o.value=c)},u=async c=>{await fetch("/api/config/images",{method:"DELETE",body:JSON.stringify({name:c})}),n()},a=async c=>{fetch("/api/config/tracks",{method:"DELETE",body:JSON.stringify({name:c})}),n()},d=c=>{p.loadPlaylist("track",c)};n();const y=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()};return(c,b)=>(s(),_("div",ke,[we,m(x,{class:"mb-4",icon:"delete",label:"Clean browser settings",onClick:y}),$e,t("div",xe,[m(x,{icon:"backup",label:"Back up / Export",onClick:b[0]||(b[0]=h=>c.$router.push("/export"))}),m(x,{icon:"cloud_download",label:"Import",onClick:b[1]||(b[1]=h=>c.$router.push("/import"))})]),t("div",Se,[Ce,e.value.length?(s(),_("div",Ve,[(s(!0),_($,null,P(e.value,(h,A)=>(s(),w(G,{key:A,class:"cover-wrapper p-4"},{default:L(()=>[m(ee,{src:h.name,class:"rounded-xl mb-4"},null,8,["src"]),t("div",Pe,[t("p",Ie,[m(j,{text:h.name},null,8,["text"])]),t("span",{class:"ml-2 material-symbols-rounded cursor-pointer",onClick:i=>u(h.name)},"delete",8,Ae)]),(s(!0),_($,null,P(h.songs,(i,r)=>(s(),w(f(R),{id:i.id,key:r,artist:i.artist,cover:i.cover,title:i.title,onPlay:k=>d(i.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(s(),_("span",Te,"No local covers"))]),t("div",De,[Ne,o.value.length?(s(),_("div",Be,[(s(!0),_($,null,P(o.value,(h,A)=>(s(),w(G,{key:A,class:"track p-4"},{default:L(()=>[t("div",Ue,[t("p",Ee,[m(j,{text:h.name},null,8,["text"])]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:i=>a(h.name)},"delete",8,Oe)]),t("div",Le,[t("audio",{src:"/api/"+h.name.replace("local:","/src/tracks/"),controls:""},null,8,Ge)]),(s(!0),_($,null,P(h.songs,(i,r)=>(s(),w(f(R),{id:i.id,key:r,artist:i.artist,cover:i.cover,title:i.title,onPlay:k=>d(i.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(s(),_("span",qe,"No local tracks"))])]))}},Je=V(je,[["__scopeId","data-v-16d50c59"]]),Re={class:"markdown-body"},We=te("<p>By default, reAudioPlayer does not share any data with third parties.</p><p>Optionally, when entering your Spotify credentials, reAudioPlayer can access your Spotify data to offer the following features:</p><ul><li>Display your Spotify playlists and offer importing them</li><li>Search songs on Spotify without leaving reAudioPlayer and adding them to your playlists</li><li>Display song information (BPM, key, etc.) from Spotify</li><li>Search artists on Spotify without leaving reAudioPlayer to display their information and follow them on Spotify</li><li>Display artist information (genres, popularity, etc.) from Spotify</li><li>Provide the release radar</li></ul><p>Optionally, when entering your GitHub credentials, reAudioPlayer can access your GitHub data to offer the following features:</p><ul><li>Storing your library in a GitHub Gist</li><li>Importing your library from a GitHub Gist</li></ul><p>All data stays between your device and Spotify or Github, respectively.</p><p>Depending on the cache policy, reAudioPlayer stores songs locally to improve performance and reduce network traffic. The browser additionally stores the following user preferences in local storage:</p><ul><li>Theme</li><li>Selected audio player</li><li>Volume</li><li>Repeat mode</li><li>Picture in Picture mode</li><li>pre-rendered placeholder images</li></ul><p>You can manage your local data, that you manually uploaded to reAudioPlayer, in section “Local Data”. None of this data left or will leave your device.</p>",9),Me=[We],He={__name:"Privacy",setup(l,{expose:e}){return e({frontmatter:{}}),(p,n)=>(s(),_("div",Re,Me))}},Fe={class:"material-symbols-rounded ms-wght-300 cursor-pointer"},Ye={class:"checkbox__label"},ze={class:"checkbox__label__title"},Ke={class:"checkbox__label__sublabel italic"},Qe=C({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},sublabel:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(l,{emit:e}){const o=l,p=e,n=a=>p("update:modelValue",a),u=()=>{o.disabled||n(!o.modelValue)};return(a,d)=>(s(),_("div",{class:D([{"opacity-50":l.disabled},"checkbox"]),onClick:u},[t("span",Fe,g(l.modelValue?"check_box":"check_box_outline_blank"),1),t("div",Ye,[t("div",ze,g(l.label),1),t("div",Ke,g(l.sublabel),1)])],2))}});const I=V(Qe,[["__scopeId","data-v-be9fa887"]]),Xe={class:"relative"},Ze=C({__name:"Cache",setup(l){const e=v(null),o=v("");M().then(u=>{e.value=u,o.value=JSON.stringify(u)});const p=N(()=>e.value?JSON.stringify(e.value)!==o.value:!1),n=async()=>{p.value&&(await F(e.value),o.value=JSON.stringify(e.value))};return(u,a)=>(s(),_("div",Xe,[e.value?(s(),w(I,{key:0,modelValue:e.value.cache.preserve,"onUpdate:modelValue":a[0]||(a[0]=d=>e.value.cache.preserve=d),label:"Preserve cache"},null,8,["modelValue"])):S("",!0),e.value?(s(),w(I,{key:1,modelValue:e.value.cache.preserveInSession,"onUpdate:modelValue":a[1]||(a[1]=d=>e.value.cache.preserveInSession=d),disabled:e.value.cache.preserve,label:"Preserve cache in session"},null,8,["modelValue","disabled"])):S("",!0),e.value?(s(),w(H,{key:2,modelValue:e.value.cache.strategy,"onUpdate:modelValue":a[2]||(a[2]=d=>e.value.cache.strategy=d),options:[{value:"all",label:"All Songs"},{value:"playlist",label:"Current Playlist"},{value:"currentNext",label:"Current + Next Song "},{value:"current",label:"Current Song Only"}],icon:"cached"},null,8,["modelValue"])):S("",!0),m(x,{disabled:!e.value||!p.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:n},null,8,["disabled"])]))}});const et={name:"Theme",props:{name:String},methods:{selected(){return J.getCurrentTheme()==this.name},select(){J.setTheme(this.name),this.$emit("selected")}}},tt=["src"];function at(l,e,o,p,n,u){return s(),_("div",{onClick:e[0]||(e[0]=(...a)=>u.select&&u.select(...a)),class:"wrapper"},[t("p",{class:D(["mb-4",{selected:u.selected()}])},g(o.name),3),t("img",{src:`/assets/img/themes/${this.name}.svg`,class:D({selected:u.selected()})},null,10,tt)])}const lt=V(et,[["render",at],["__scopeId","data-v-74855c2d"]]),K=l=>(B("data-v-5cc6477c"),l=l(),U(),l),st=K(()=>t("h3",{class:"mt-[10px]"},"Theme",-1)),ot={class:"themes"},nt=K(()=>t("h3",{class:"mt-[10px]"},"Sidebar",-1)),it=C({__name:"Appearance",setup(l){const e=Y(),o=["dynamic","light","dark"];return(p,n)=>(s(),_($,null,[st,m(I,{modelValue:f(e).ambient,"onUpdate:modelValue":n[0]||(n[0]=u=>f(e).ambient=u),disabled:!f(e).themeSupportsAmbient,label:"Ambient"},null,8,["modelValue","disabled"]),t("div",ot,[(s(),_($,null,P(o,(u,a)=>m(lt,{key:a,name:u},null,8,["name"])),64))]),nt,m(I,{modelValue:f(e).sidebar.news,"onUpdate:modelValue":n[1]||(n[1]=u=>f(e).sidebar.news=u),label:"Show 'News' Tab"},null,8,["modelValue"]),m(I,{modelValue:f(e).sidebar.sports,"onUpdate:modelValue":n[2]||(n[2]=u=>f(e).sidebar.sports=u),label:"Show 'Sports' Tab"},null,8,["modelValue"])],64))}});const ct=V(it,[["__scopeId","data-v-5cc6477c"]]),rt={class:"relative"},ut=C({__name:"Player",setup(l){const e=Y();return(o,p)=>(s(),_("div",rt,[m(I,{modelValue:f(e).player.pictureInPicture,"onUpdate:modelValue":p[0]||(p[0]=n=>f(e).player.pictureInPicture=n),label:"Support Picture in Picture",sublabel:"this will slightly reduce performance"},null,8,["modelValue"]),m(H,{modelValue:f(e).player.type,"onUpdate:modelValue":p[1]||(p[1]=n=>f(e).player.type=n),options:[{value:"web",label:"Native player",icon:"horizontal_rule"},{value:"web/wave",label:"Wave player",icon:"graphic_eq"}],icon:"music_note"},null,8,["modelValue"])]))}});const dt={key:0,class:"material-symbols-rounded"},pt=["disabled","placeholder","type"],_t={__name:"PasswordInputWithIcon",props:{icon:String,placeholder:String,modelValue:String,disabled:Boolean},emits:["update:modelValue","change","submit"],setup(l,{emit:e}){const o=l,p=v(o.modelValue);q(()=>o.modelValue,y=>{p.value=y});const n=e,u=()=>{n("update:modelValue",p.value),n("change",p.value)},a=y=>{y.key==="Enter"&&n("submit",p)},d=v(!1);return(y,c)=>(s(),_("div",{class:D([{disabled:l.disabled},"text-input-with-icon rounded-3xl flex items-center px-4"])},[l.icon?(s(),_("span",dt,g(l.icon),1)):S("",!0),ae(t("input",{"onUpdate:modelValue":c[0]||(c[0]=b=>p.value=b),disabled:l.disabled,placeholder:l.placeholder,type:d.value?"text":"password",onInput:u,onKeyup:a},null,40,pt),[[le,p.value]]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:c[1]||(c[1]=b=>d.value=!d.value)},g(d.value?"visibility":"visibility_off"),1)],2))}},O=V(_t,[["__scopeId","data-v-5e026540"]]),Q="reAudioPlayer One",mt=`https://audius.co/oauth/auth?scope=read&app_name=${Q}&redirect_uri=`,vt="/audius/callback",ht=()=>{const l=encodeURIComponent(`${window.location.origin}${vt}`),e=`${mt}${l}`;window.open(e,Q,"width=500,height=800")},yt=t("summary",{class:"cursor-pointer"},"How to",-1),ft=t("p",null,[T(" 1) Head over to the "),t("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1),bt=t("p",null,"2) Create An App",-1),gt=t("p",null,"3) Enter any name and any description",-1),kt=t("p",null," 5) Copy and enter the client id and secret into the corresponding input field ",-1),wt=t("hr",{class:"my-4"},null,-1),$t=t("h5",null,"Client ID:",-1),xt=t("h5",{class:"mt-4"},"Client Secret:",-1),St=t("h3",{class:"mt-[10px]"},"Github",-1),Ct=t("h5",{class:"mt-4"},"PAT:",-1),Vt=t("h5",{class:"mt-4"},"Gist ID:",-1),Pt={class:"flex gap-4 justify-end mt-4"},It=t("h3",{class:"mt-[10px]"},"Audius",-1),At=C({__name:"Integration",setup(l){const e=v(!1),o=v({id:"",secret:""}),p=N(()=>e.value?Object.values(o.value).some(i=>i==="")?!1:o.value.id!==n.value.id||o.value.secret!==n.value.secret||e.value!==n.value.enabled:n.value.enabled),n=v({id:"",secret:"",enabled:!1});fetch("/api/config/spotify").then(async i=>{let r={id:"",secret:"",enabled:!1};if(i.status==200)r=await i.json();else if([204,401].includes(i.status))r={id:"restricted",secret:"restricted",enabled:!1};else throw new Error("Failed to fetch spotify config");n.value=r,n.value.enabled=![r.id,r.secret].includes("restricted"),e.value=n.value.enabled,o.value.id=r.id.replace("restricted",""),o.value.secret=r.secret.replace("restricted","")});const u=async()=>{if(!p.value)return;let i=o.value.id,r=o.value.secret;e.value||(r=i="restricted"),(await fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:i,secret:r})})).ok&&(n.value={id:i,secret:r,enabled:e.value})},a=v(null),d=v("");M().then(i=>{a.value=i,d.value=JSON.stringify(i)});const y=N(()=>a.value?JSON.stringify(a.value)!==d.value:!1),c=async()=>{y.value&&(await F(a.value),d.value=JSON.stringify(a.value))},h=`http://${window.location.host}/api/spotify/callback`,A=async()=>{var i,r;(r=(i=a.value)==null?void 0:i.github)!=null&&r.githubPat&&(a.value.github.gistId||(a.value.github.gistId=await ue.search(a.value.github.githubPat),a.value.github.gistId||oe.addError("Failed to find gist","You can start syncing directly in 'Local Data' (a Gist will be created for you) or enter the gist id manually")))};return q(()=>{var i,r;return(r=(i=a.value)==null?void 0:i.github)==null?void 0:r.githubPat},A),(i,r)=>(s(),_($,null,[m(I,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=k=>e.value=k),class:"h3 mb-2",label:"Spotify"},null,8,["modelValue"]),t("details",null,[yt,ft,bt,gt,t("p",null,[T(" 4) Edit the settings: set the redirect url to "),t("a",{href:h},g(h))]),kt]),wt,$t,m(O,{modelValue:o.value.id,"onUpdate:modelValue":r[1]||(r[1]=k=>o.value.id=k),disabled:!e.value,icon:"token"},null,8,["modelValue","disabled"]),xt,m(O,{modelValue:o.value.secret,"onUpdate:modelValue":r[2]||(r[2]=k=>o.value.secret=k),disabled:!e.value,icon:"lock"},null,8,["modelValue","disabled"]),m(x,{disabled:!p.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:u},null,8,["disabled"]),St,Ct,a.value?(s(),w(O,{key:0,modelValue:a.value.github.githubPat,"onUpdate:modelValue":r[3]||(r[3]=k=>a.value.github.githubPat=k),icon:"lock"},null,8,["modelValue"])):S("",!0),Vt,a.value?(s(),w(se,{key:1,modelValue:a.value.github.gistId,"onUpdate:modelValue":r[4]||(r[4]=k=>a.value.github.gistId=k),icon:"numbers"},null,8,["modelValue"])):S("",!0),t("div",Pt,[m(x,{disabled:!a.value||!a.value.github.githubPat||!!a.value.github.gistId,icon:"search",label:"Search",onClick:A},null,8,["disabled"]),m(x,{disabled:!a.value||!y.value,icon:"save",label:"Save",onClick:c},null,8,["disabled"])]),It,m(x,{icon:"link",label:"Connect",onClick:f(ht)},null,8,["onClick"])],64))}}),Tt=l=>(B("data-v-ae954c76"),l=l(),U(),l),Dt={class:"p-[10px] preferences"},Nt=Tt(()=>t("h1",{class:"w-full"},"Preferences",-1)),Bt={class:"wrapper"},Ut={class:"sections flex flex-col"},Et={class:"section p-2"},Ot={class:"h5 text-sm"},Lt=C({__name:"index",setup(l){const e={About:ge,Privacy:He,"Local Data":Je,Integrations:At,"Cache Policy":Ze,Appearance:ct,Player:ut},o=v([{name:"General",items:["About"]},{name:"My Data",items:["Privacy","Local Data","Integrations"]},{name:"Player",items:["Player","Cache Policy"]},{name:"Appearance",items:["Appearance"]}]),p=ne(),n=ie();let u=p.query.tab;const a=v("About");return Object.keys(e).includes(u)&&(a.value=u),q(a,d=>{const y={tab:d};n.replace({query:y})}),(d,y)=>(s(),_("div",Dt,[Nt,t("div",Bt,[t("div",Ut,[(s(!0),_($,null,P(o.value,c=>(s(),_("div",Et,[t("span",Ot,g(c.name),1),(s(!0),_($,null,P(c.items,b=>(s(),w(pe,{key:b,name:b,active:a.value===b,onClick:h=>a.value=b},null,8,["name","active","onClick"]))),128))]))),256))]),m(G,{class:"content h-max p-4 pt-0"},{default:L(()=>[t("h2",null,g(a.value),1),(s(),w(ce(e[a.value])))]),_:1})])]))}});const Rt=V(Lt,[["__scopeId","data-v-ae954c76"]]);export{Rt as default};
