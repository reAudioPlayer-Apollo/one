import{e as U,a5 as W,o as p,c as w,g as K,u as f,a6 as H,t as B,i as I,d as C,a as x,I as N,F as j,h as G,K as P,b as $,J as F,L as V,_ as q}from"./index-BpNZikfW.js";var T={d:(s,r)=>{for(var t in r)T.o(r,t)&&!T.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})},o:(s,r)=>Object.prototype.hasOwnProperty.call(s,r)},v={};T.d(v,{Ce:()=>L,ZP:()=>Z,j1:()=>z,Eb:()=>J,e6:()=>E,Iu:()=>A});var g={from:"auto",to:"en",hl:"en",tld:"com",rpcids:"MkEWBc"};function z(s){var r=s===void 0?{}:s,t=r.rpcids,a=t===void 0?g.rpcids:t,n=r.hl,l=n===void 0?g.hl:n,i=r.tld,c=i===void 0?g.tld:i;if(!function(o){return!!o.match(/^[a-zA-Z]{2,63}$/)}(c))throw new Error("Invalid TLD: Must be 2-63 letters only");var d=new URLSearchParams({rpcids:a,"source-path":"/",hl:l,"soc-app":"1","soc-platform":"1","soc-device":"1",rt:"c"});return"https://translate.google.".concat(c,"/_/TranslateWebserverUi/data/batchexecute?").concat(d)}const D={auto:"Automatic",af:"Afrikaans",sq:"Albanian",am:"Amharic",ar:"Arabic",hy:"Armenian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",bg:"Bulgarian",ca:"Catalan",ceb:"Cebuano",ny:"Chichewa",zh:"Chinese Simplified","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",co:"Corsican",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",eo:"Esperanto",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",fy:"Frisian",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gu:"Gujarati",ht:"Haitian Creole",ha:"Hausa",haw:"Hawaiian",he:"Hebrew",iw:"Hebrew",hi:"Hindi",hmn:"Hmong",hu:"Hungarian",is:"Icelandic",ig:"Igbo",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",jw:"Javanese",kn:"Kannada",kk:"Kazakh",km:"Khmer",rw:"Kinyarwanda",ko:"Korean",ku:"Kurdish (Kurmanji)",ky:"Kyrgyz",lo:"Lao",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mn:"Mongolian",my:"Myanmar (Burmese)",ne:"Nepali",no:"Norwegian",or:"Odia (Oriya)",ps:"Pashto",fa:"Persian",pl:"Polish",pt:"Portuguese",pa:"Punjabi",ro:"Romanian",ru:"Russian",sm:"Samoan",gd:"Scots Gaelic",sr:"Serbian",st:"Sesotho",sn:"Shona",sd:"Sindhi",si:"Sinhala",sk:"Slovak",sl:"Slovenian",so:"Somali",es:"Spanish",su:"Sundanese",sw:"Swahili",sv:"Swedish",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",ur:"Urdu",ug:"Uyghur",uz:"Uzbek",vi:"Vietnamese",cy:"Welsh",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu"};var J=function(s){return!!D[s]};function E(s,r){r===void 0&&(r=!1);var t=s.match(/"\[.*]"/),a=null;if(t){var n=t[0];a=JSON.parse(JSON.parse(n))}if(!a)throw new Error("Data is either empty or corrupted");var l={text:a[1][0][0][5].reduce(function(i,c){return i?"".concat(i," ").concat(c[0]):c[0]},""),pronunciation:a[1][0][0][1],from:{language:{didYouMean:!!a[0][1],iso:a[2]},text:{autoCorrected:!!a[1][0][0][3],value:a[0][1]?a[0][1][0][4]:a[0][6][0],didYouMean:!!a[0][1]}}};return r&&(l.raw=s),l}function L(s,r){var t=r===void 0?{}:r,a=t.rpcids,n=a===void 0?g.rpcids:a,l=t.from,i=l===void 0?g.from:l,c=t.to,d=c===void 0?g.to:c,o=s.trim().replace(/["]/g,"\\\\\\$&").replace(/\r\n|\r|\n/g,"\\\\n"),e=encodeURIComponent('[[["'.concat(n,'","[[\\"').concat(o,'\\",\\"').concat(i,'\\",\\"').concat(d,'\\",1],[]]",null,"generic"]]]'));return"f.req=".concat(e,"&")}var S=function(){return S=Object.assign||function(s){for(var r,t=1,a=arguments.length;t<a;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n]);return s},S.apply(this,arguments)},R=function(s,r,t,a){return new(t||(t=Promise))(function(n,l){function i(o){try{d(a.next(o))}catch(e){l(e)}}function c(o){try{d(a.throw(o))}catch(e){l(e)}}function d(o){var e;o.done?n(o.value):(e=o.value,e instanceof t?e:new t(function(u){u(e)})).then(i,c)}d((a=a.apply(s,[])).next())})},Y=function(s,r){var t,a,n,l,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(d){return function(o){return function(e){if(t)throw new TypeError("Generator is already executing.");for(;l&&(l=0,e[0]&&(i=0)),i;)try{if(t=1,a&&(n=2&e[0]?a.return:e[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,e[1])).done)return n;switch(a=0,n&&(e=[2&e[0],n.value]),e[0]){case 0:case 1:n=e;break;case 4:return i.label++,{value:e[1],done:!1};case 5:i.label++,a=e[1],e=[0];continue;case 7:e=i.ops.pop(),i.trys.pop();continue;default:if(!((n=(n=i.trys).length>0&&n[n.length-1])||e[0]!==6&&e[0]!==2)){i=0;continue}if(e[0]===3&&(!n||e[1]>n[0]&&e[1]<n[3])){i.label=e[1];break}if(e[0]===6&&i.label<n[1]){i.label=n[1],n=e;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(e);break}n[2]&&i.ops.pop(),i.trys.pop();continue}e=r.call(s,i)}catch(u){e=[6,u],a=0}finally{t=n=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([d,o])}}};function A(s,r){return r===void 0&&(r={}),R(this,void 0,void 0,function(){var t,a,n,l,i;return Y(this,function(c){switch(c.label){case 0:return t=S(S({raw:!1,corsUrl:""},g),r),a=L(s,t),n=z(t),[4,fetch("".concat(r.corsUrl).concat(n),{method:"POST",headers:S({"Content-Type":"application/x-www-form-urlencoded"},t.headers),body:a})];case 1:if(!(l=c.sent()).ok)throw new Error("Request failed");return i=E,[4,l.text()];case 2:return[2,i.apply(void 0,[c.sent(),t.raw])]}})})}const Z=A;v.Ce;v.ZP;v.j1;v.Eb;v.e6;var X=v.Iu;const Q={key:0,class:"fill-page"},ee={key:0},re={class:"w-full flex flex-row justify-end"},ne={key:1,class:"lyrics"},ae=["onClick"],te=["onClick"],oe=U({__name:"index",setup(s){const r=W(),t=o=>{var m,b;if(!((m=r.lyrics)!=null&&m.lyrics))return!1;const e=r.progress*1e3,u=r.lyrics.lyrics[o],h=parseInt(u.startTimeMs),y=parseInt(u.endTimeMs)?parseInt(u.endTimeMs):parseInt((b=r.lyrics.lyrics[o+1])==null?void 0:b.startTimeMs);if(e>=h&&e<y){const k=document.querySelector(`.line:nth-child(${o+1})`);return k&&k.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),"current"}return e>=y?"past":"future"},a=o=>{r.lyrics.lyrics[o].originalWorlds?l(o):n(o)},n=async o=>{const e=r.lyrics.lyrics[o];if(e.originalWorlds)return;const u=await X(e.words,{to:"en",corsUrl:"/api/cors/"});e.originalWorlds=e.words,e.words=u.text},l=o=>{const e=r.lyrics.lyrics[o];e.originalWorlds&&(e.words=e.originalWorlds,e.originalWorlds=null)},i=()=>{var o,e;(e=(o=r.lyrics)==null?void 0:o.lyrics)==null||e.forEach((u,h)=>{n(h)})},c=()=>{var o,e;(e=(o=r.lyrics)==null?void 0:o.lyrics)==null||e.forEach((u,h)=>{l(h)})},d=()=>{var e,u,h,y;const o=(u=(e=r.lyrics)==null?void 0:e.lyrics)==null?void 0:u.filter(m=>m.originalWorlds).length;return o&&o>((y=(h=r.lyrics)==null?void 0:h.lyrics)==null?void 0:y.length)/2};return(o,e)=>{var u,h,y,m,b,k;return p(),w(j,null,[K(H,{src:f(r).song.cover},null,8,["src"]),!f(r).lyrics||(u=f(r).lyrics)!=null&&u.error?(p(),w("div",Q,[(h=f(r).lyrics)!=null&&h.error?(p(),w("h1",ee,B((y=f(r).lyrics)==null?void 0:y.error),1)):(p(),I(V,{key:1}))])):C("",!0),x("div",re,[(m=f(r).lyrics)!=null&&m.lyrics?(p(),I(N,{key:0,icon:"translate",label:d()?"Show original":"Translate all",class:"mr-2",onClick:e[0]||(e[0]=_=>d()?c():i())},null,8,["label"])):C("",!0)]),(b=f(r).lyrics)!=null&&b.lyrics?(p(),w("div",ne,[(p(!0),w(j,null,G((k=f(r).lyrics)==null?void 0:k.lyrics,(_,M)=>(p(),w("div",{class:P(["line",t(M)]),onClick:O=>f(r).seek(parseInt(_.startTimeMs)/1e3)},[$(B(_.words)+" ",1),x("span",{class:P(["material-symbols-rounded translate",{translated:_.originalWorlds}]),onClick:F(O=>a(M),["stop"])}," translate ",10,te)],10,ae))),256))])):C("",!0)],64)}}}),se=q(oe,[["__scopeId","data-v-896d6a6d"]]);export{se as default};
