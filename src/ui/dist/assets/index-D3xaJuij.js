import{e as S,o as n,c,t as w,K as B,_ as A,l as b,v as W,A as N,i as k,d as P,a as l,b as D,F as C,a5 as Y,g as p,I as x,h as $,w as E,E as z,M as L,C as O,aq as K,ar as R,as as J,at as H,au as G,av as U,u as _,B as F,Y as T,N as Q,z as X,m as Z,Q as ee}from"./index-CTxjSbok.js";import{_ as te}from"./Markdown.vue_vue_type_style_index_0_lang-Dj9oziRW.js";import{T as j}from"./TrackCompact--_V4px52.js";import{G as le}from"./gistClient-DbxNDpvo.js";const ae=S({__name:"TabButton",props:{name:{type:String,required:!0},active:{type:Boolean,default:!1}},setup(v){return(e,o)=>(n(),c("button",{class:B(["btn",{active:v.active}])},w(v.name),3))}}),se=A(ae,[["__scopeId","data-v-3f038910"]]),oe="1.1.5",ne={class:"flex flex-col"},ie={key:0,class:"text-sm flex items-center gap-2 latest"},re={key:1,class:"text-sm flex items-center gap-2 update"},q="1.1.0",ue=S({__name:"About",setup(v){const e=b(""),o=b("");W(async()=>{const i=await(await fetch("https://api.github.com/repos/reAudioPlayer/one/releases/latest")).json();e.value=i.tag_name,o.value=i.body});const m=N(()=>e.value===q),s=N(()=>oe.split(".").pop()),d=b(null);return(a,i)=>(n(),c("div",ne,[o.value?(n(),k(te,{key:0,content:o.value,title:"What's new in "+e.value,ref_key:"changelog",ref:d,onClose:i[0]||(i[0]=()=>o.value="")},null,8,["content","title"])):P("",!0),l("span",null,[l("strong",null,"v"+w(q)),D(" (Build "+w(s.value)+") ",1)]),e.value?(n(),c(C,{key:1},[m.value?(n(),c("span",ie,[i[3]||(i[3]=l("span",{class:"material-symbols-rounded"},"check",-1)),i[4]||(i[4]=D(" You're on the latest version ")),l("a",{class:"cursor-pointer",onClick:i[1]||(i[1]=h=>{var u;return(u=d.value)==null?void 0:u.show()})}," What's changed? ")])):(n(),c("span",re,[i[5]||(i[5]=l("span",{class:"material-symbols-rounded"},"update",-1)),D(" Update available: "+w(e.value)+" ",1),l("a",{class:"cursor-pointer",onClick:i[2]||(i[2]=h=>{var u;return(u=d.value)==null?void 0:u.show()})}," What's changed? ")]))],64)):P("",!0)]))}}),de=A(ue,[["__scopeId","data-v-5c362a3b"]]),ce={class:"wrap"},pe={class:"flex gap-4 mb-4"},me={class:"covers mb-2"},ve={key:0,class:"items gap-4"},fe={class:"flex justify-between w-full mb-4"},ye={class:"overflow-hidden"},be=["onClick"],he={key:1,class:"text-muted italic"},ge={class:"tracks"},_e={key:0,class:"items gap-4"},ke={class:"flex justify-between w-full mb-4"},we={class:"overflow-hidden"},Ce=["onClick"],xe={class:"flex justify-center w-full mb-4"},Se=["src"],Ve={key:1,class:"text-muted italic"},$e={__name:"LocalData",setup(v){const e=b([]),o=b([]),m=Y(),s=()=>{fetch("/api/config/images").then(u=>u.json()).then(u=>e.value=u),fetch("/api/config/tracks").then(u=>u.json()).then(u=>o.value=u)},d=async u=>{await fetch("/api/config/images",{method:"DELETE",body:JSON.stringify({name:u})}),s()},a=async u=>{fetch("/api/config/tracks",{method:"DELETE",body:JSON.stringify({name:u})}),s()},i=u=>{m.loadPlaylist("track",u)};s();const h=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()};return(u,y)=>(n(),c("div",ce,[y[4]||(y[4]=l("h3",null,"Browser Data",-1)),p(x,{class:"mb-4",icon:"delete",label:"Clean browser settings",onClick:h}),y[5]||(y[5]=l("h3",null,"Import / Export",-1)),l("div",pe,[p(x,{icon:"backup",label:"Back up / Export",onClick:y[0]||(y[0]=f=>u.$router.push("/export"))}),p(x,{icon:"cloud_download",label:"Import",onClick:y[1]||(y[1]=f=>u.$router.push("/import"))})]),l("div",me,[y[2]||(y[2]=l("h3",null,"Local covers",-1)),e.value.length?(n(),c("div",ve,[(n(!0),c(C,null,$(e.value,(f,V)=>(n(),k(O,{key:V,class:"cover-wrapper p-4"},{default:E(()=>[p(z,{src:f.name,class:"rounded-xl mb-4"},null,8,["src"]),l("div",fe,[l("p",ye,[p(L,{text:f.name},null,8,["text"])]),l("span",{class:"ml-2 material-symbols-rounded cursor-pointer",onClick:r=>d(f.name)},"delete",8,be)]),(n(!0),c(C,null,$(f.songs,(r,t)=>(n(),k(j,{id:r.id,key:t,artist:r.artist,cover:r.cover,title:r.title,onPlay:g=>i(r.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(n(),c("span",he,"No local covers"))]),l("div",ge,[y[3]||(y[3]=l("h3",null,"Local tracks",-1)),o.value.length?(n(),c("div",_e,[(n(!0),c(C,null,$(o.value,(f,V)=>(n(),k(O,{key:V,class:"track p-4"},{default:E(()=>[l("div",ke,[l("p",we,[p(L,{text:f.name},null,8,["text"])]),l("span",{class:"material-symbols-rounded cursor-pointer",onClick:r=>a(f.name)},"delete",8,Ce)]),l("div",xe,[l("audio",{src:"/api/"+f.name.replace("local:","/src/tracks/"),controls:""},null,8,Se)]),(n(!0),c(C,null,$(f.songs,(r,t)=>(n(),k(j,{id:r.id,key:t,artist:r.artist,cover:r.cover,title:r.title,onPlay:g=>i(r.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(n(),c("span",Ve,"No local tracks"))])]))}},Pe=A($e,[["__scopeId","data-v-4062735d"]]),Ie={class:"markdown-body"},Ae={__name:"Privacy",setup(v,{expose:e}){return e({frontmatter:{}}),(m,s)=>(n(),c("div",Ie,s[0]||(s[0]=[K("<p>By default, reAudioPlayer does not share any data with third parties.</p><p>Optionally, when entering your Spotify credentials, reAudioPlayer can access your Spotify data to offer the following features:</p><ul><li>Display your Spotify playlists and offer importing them</li><li>Search songs on Spotify without leaving reAudioPlayer and adding them to your playlists</li><li>Display song information (BPM, key, etc.) from Spotify</li><li>Search artists on Spotify without leaving reAudioPlayer to display their information and follow them on Spotify</li><li>Display artist information (genres, popularity, etc.) from Spotify</li><li>Provide the release radar</li></ul><p>Optionally, when entering your GitHub credentials, reAudioPlayer can access your GitHub data to offer the following features:</p><ul><li>Storing your library in a GitHub Gist</li><li>Importing your library from a GitHub Gist</li></ul><p>All data stays between your device and Spotify or Github, respectively.</p><p>Depending on the cache policy, reAudioPlayer stores songs locally to improve performance and reduce network traffic. The browser additionally stores the following user preferences in local storage:</p><ul><li>Theme</li><li>Selected audio player</li><li>Volume</li><li>Repeat mode</li><li>Picture in Picture mode</li><li>pre-rendered placeholder images</li></ul><p>You can manage your local data, that you manually uploaded to reAudioPlayer, in section “Local Data”. None of this data left or will leave your device.</p>",9)])))}},Ne={class:"material-symbols-rounded ms-wght-300 cursor-pointer"},De={class:"checkbox__label"},Te={class:"checkbox__label__title"},Be={class:"checkbox__label__sublabel italic"},Ue=S({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},sublabel:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(v,{emit:e}){const o=v,m=e,s=a=>m("update:modelValue",a),d=()=>{o.disabled||s(!o.modelValue)};return(a,i)=>(n(),c("div",{class:B([{"opacity-50":v.disabled},"checkbox"]),onClick:d},[l("span",Ne,w(v.modelValue?"check_box":"check_box_outline_blank"),1),l("div",De,[l("div",Te,w(v.label),1),l("div",Be,w(v.sublabel),1)])],2))}}),I=A(Ue,[["__scopeId","data-v-be9fa887"]]),Ee={class:"relative"},Oe=S({__name:"Cache",setup(v){const e=b(null),o=b("");R().then(d=>{e.value=d,o.value=JSON.stringify(d)});const m=N(()=>e.value?JSON.stringify(e.value)!==o.value:!1),s=async()=>{m.value&&(await H(e.value),o.value=JSON.stringify(e.value))};return(d,a)=>(n(),c("div",Ee,[e.value?(n(),k(I,{key:0,modelValue:e.value.cache.preserve,"onUpdate:modelValue":a[0]||(a[0]=i=>e.value.cache.preserve=i),label:"Preserve cache"},null,8,["modelValue"])):P("",!0),e.value?(n(),k(I,{key:1,modelValue:e.value.cache.preserveInSession,"onUpdate:modelValue":a[1]||(a[1]=i=>e.value.cache.preserveInSession=i),disabled:e.value.cache.preserve,label:"Preserve cache in session"},null,8,["modelValue","disabled"])):P("",!0),e.value?(n(),k(J,{key:2,modelValue:e.value.cache.strategy,"onUpdate:modelValue":a[2]||(a[2]=i=>e.value.cache.strategy=i),options:[{value:"all",label:"All Songs"},{value:"playlist",label:"Current Playlist"},{value:"currentNext",label:"Current + Next Song "},{value:"current",label:"Current Song Only"}],icon:"cached"},null,8,["modelValue"])):P("",!0),p(x,{disabled:!e.value||!m.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:s},null,8,["disabled"])]))}}),Le={name:"Theme",props:{name:String},methods:{selected(){return G.getCurrentTheme()==this.name},select(){G.setTheme(this.name),this.$emit("selected")}}},Ge=["src"];function je(v,e,o,m,s,d){return n(),c("div",{onClick:e[0]||(e[0]=(...a)=>d.select&&d.select(...a)),class:"wrapper"},[l("p",{class:B(["mb-4",{selected:d.selected()}])},w(o.name),3),l("img",{src:`/assets/img/themes/${this.name}.svg`,class:B({selected:d.selected()})},null,10,Ge)])}const qe=A(Le,[["render",je],["__scopeId","data-v-74855c2d"]]),Re={class:"themes"},Je=S({__name:"Appearance",setup(v){const e=U(),o=["dynamic","light","dark"];return(m,s)=>(n(),c(C,null,[s[3]||(s[3]=l("h3",{class:"mt-[10px]"},"Theme",-1)),p(I,{modelValue:_(e).ambient,"onUpdate:modelValue":s[0]||(s[0]=d=>_(e).ambient=d),disabled:!_(e).themeSupportsAmbient,label:"Ambient"},null,8,["modelValue","disabled"]),l("div",Re,[(n(),c(C,null,$(o,(d,a)=>p(qe,{key:a,name:d},null,8,["name"])),64))]),s[4]||(s[4]=l("h3",{class:"mt-[10px]"},"Sidebar",-1)),p(I,{modelValue:_(e).sidebar.news,"onUpdate:modelValue":s[1]||(s[1]=d=>_(e).sidebar.news=d),label:"Show 'News' Tab"},null,8,["modelValue"]),p(I,{modelValue:_(e).sidebar.sports,"onUpdate:modelValue":s[2]||(s[2]=d=>_(e).sidebar.sports=d),label:"Show 'Sports' Tab"},null,8,["modelValue"])],64))}}),He=A(Je,[["__scopeId","data-v-5cc6477c"]]),Fe={class:"relative"},Me=S({__name:"Player",setup(v){const e=U();return(o,m)=>(n(),c("div",Fe,[p(I,{modelValue:_(e).player.pictureInPicture,"onUpdate:modelValue":m[0]||(m[0]=s=>_(e).player.pictureInPicture=s),label:"Support Picture in Picture",sublabel:"this will slightly reduce performance"},null,8,["modelValue"]),p(J,{modelValue:_(e).player.type,"onUpdate:modelValue":m[1]||(m[1]=s=>_(e).player.type=s),options:[{value:"web",label:"Native player",icon:"horizontal_rule"},{value:"web/wave",label:"Wave player",icon:"graphic_eq"}],icon:"music_note"},null,8,["modelValue"])]))}}),M="reAudioPlayer One",We=`https://audius.co/oauth/auth?scope=read&app_name=${M}&redirect_uri=`,Ye="/audius/callback",ze=()=>{const v=encodeURIComponent(`${window.location.origin}${Ye}`),e=`${We}${v}`;window.open(e,M,"width=500,height=800")},Ke={class:"flex gap-4 justify-end mt-4"},Qe=S({__name:"Integration",setup(v){const e=b(!1),o=b({id:"",secret:""}),m=N(()=>e.value?Object.values(o.value).some(r=>r==="")?!1:o.value.id!==s.value.id||o.value.secret!==s.value.secret||e.value!==s.value.enabled:s.value.enabled),s=b({id:"",secret:"",enabled:!1});fetch("/api/config/spotify").then(async r=>{let t={id:"",secret:"",enabled:!1};if(r.status==200)t=await r.json();else if([204,401].includes(r.status))t={id:"restricted",secret:"restricted",enabled:!1};else throw new Error("Failed to fetch spotify config");s.value=t,s.value.enabled=![t.id,t.secret].includes("restricted"),e.value=s.value.enabled,o.value.id=t.id.replace("restricted",""),o.value.secret=t.secret.replace("restricted","")});const d=async()=>{if(!m.value)return;let r=o.value.id,t=o.value.secret;e.value||(t=r="restricted"),(await fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:r,secret:t})})).ok&&(s.value={id:r,secret:t,enabled:e.value})},a=b(null),i=b("");R().then(r=>{a.value=r,i.value=JSON.stringify(r)});const h=N(()=>a.value?JSON.stringify(a.value)!==i.value:!1),u=async()=>{h.value&&(await H(a.value),i.value=JSON.stringify(a.value))},f=`http://${window.location.host}/api/spotify/callback`,V=async()=>{var r,t;(t=(r=a.value)==null?void 0:r.github)!=null&&t.githubPat&&(a.value.github.gistId||(a.value.github.gistId=await le.search(a.value.github.githubPat),a.value.github.gistId||Q.addError("Failed to find gist","You can start syncing directly in 'Local Data' (a Gist will be created for you) or enter the gist id manually")))};return F(()=>{var r,t;return(t=(r=a.value)==null?void 0:r.github)==null?void 0:t.githubPat},V),(r,t)=>(n(),c(C,null,[p(I,{modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=g=>e.value=g),class:"h3 mb-2",label:"Spotify"},null,8,["modelValue"]),l("details",null,[t[6]||(t[6]=l("summary",{class:"cursor-pointer"},"How to",-1)),t[7]||(t[7]=l("p",null,[D(" 1) Head over to the "),l("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1)),t[8]||(t[8]=l("p",null,"2) Create An App",-1)),t[9]||(t[9]=l("p",null,"3) Enter any name and any description",-1)),l("p",null,[t[5]||(t[5]=D(" 4) Edit the settings: set the redirect url to ")),l("a",{href:f},w(f))]),t[10]||(t[10]=l("p",null," 5) Copy and enter the client id and secret into the corresponding input field ",-1))]),t[11]||(t[11]=l("hr",{class:"my-4"},null,-1)),t[12]||(t[12]=l("h5",null,"Client ID:",-1)),p(T,{modelValue:o.value.id,"onUpdate:modelValue":t[1]||(t[1]=g=>o.value.id=g),disabled:!e.value,type:"password",icon:"token"},null,8,["modelValue","disabled"]),t[13]||(t[13]=l("h5",{class:"mt-4"},"Client Secret:",-1)),p(T,{modelValue:o.value.secret,"onUpdate:modelValue":t[2]||(t[2]=g=>o.value.secret=g),disabled:!e.value,type:"password",icon:"lock"},null,8,["modelValue","disabled"]),p(x,{disabled:!m.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:d},null,8,["disabled"]),t[14]||(t[14]=l("h3",{class:"mt-[10px]"},"Github",-1)),t[15]||(t[15]=l("h5",{class:"mt-4"},"PAT:",-1)),a.value?(n(),k(T,{key:0,modelValue:a.value.github.githubPat,"onUpdate:modelValue":t[3]||(t[3]=g=>a.value.github.githubPat=g),icon:"lock",type:"password"},null,8,["modelValue"])):P("",!0),t[16]||(t[16]=l("h5",{class:"mt-4"},"Gist ID:",-1)),a.value?(n(),k(T,{key:1,modelValue:a.value.github.gistId,"onUpdate:modelValue":t[4]||(t[4]=g=>a.value.github.gistId=g),icon:"numbers"},null,8,["modelValue"])):P("",!0),l("div",Ke,[p(x,{disabled:!a.value||!a.value.github.githubPat||!!a.value.github.gistId,icon:"search",label:"Search",onClick:V},null,8,["disabled"]),p(x,{disabled:!a.value||!h.value,icon:"save",label:"Save",onClick:u},null,8,["disabled"])]),t[17]||(t[17]=l("h3",{class:"mt-[10px]"},"Audius",-1)),p(x,{icon:"link",label:"Connect",onClick:_(ze)},null,8,["onClick"])],64))}}),Xe={class:"flex items-center gap-2"},Ze=S({__name:"Developer",setup(v){U();const e=()=>{fetch("/api/system/kill")},o=()=>{fetch("/api/system/restart/nginx")};return(m,s)=>(n(),c("div",Xe,[p(x,{icon:"refresh",label:"Restart",onClick:e,type:"danger"}),p(x,{icon:"refresh",label:"Restart Nginx",onClick:o})]))}}),et={class:"p-[10px] preferences"},tt={class:"wrapper"},lt={class:"sections flex flex-col"},at={class:"section p-2"},st={class:"h5 text-sm"},ot=S({__name:"index",setup(v){const e=U(),o={About:de,Privacy:Ae,"Local Data":Pe,Integrations:Qe,"Cache Policy":Oe,Appearance:He,Player:Me,Developer:Ze},m=N(()=>{const h=[{name:"General",items:["About"]},{name:"My Data",items:["Privacy","Local Data","Integrations"]},{name:"Player",items:["Player","Cache Policy"]},{name:"Appearance",items:["Appearance"]}];return e.mode.dev&&h.push({name:"Developer",items:["Developer"]}),h}),s=X(),d=Z();let a=s.query.tab;const i=b("About");return Object.keys(o).includes(a)&&(i.value=a),F(i,h=>{const u={tab:h};d.replace({query:u})}),(h,u)=>(n(),c("div",et,[u[0]||(u[0]=l("h1",{class:"w-full"},"Preferences",-1)),l("div",tt,[l("div",lt,[(n(!0),c(C,null,$(m.value,y=>(n(),c("div",at,[l("span",st,w(y.name),1),(n(!0),c(C,null,$(y.items,f=>(n(),k(se,{key:f,name:f,active:i.value===f,onClick:V=>i.value=f},null,8,["name","active","onClick"]))),128))]))),256))]),p(O,{class:"content h-max p-4 pt-0"},{default:E(()=>[l("h2",null,w(i.value),1),(n(),k(ee(o[i.value])))]),_:1})])]))}}),dt=A(ot,[["__scopeId","data-v-2a5c5e34"]]);export{dt as default};
