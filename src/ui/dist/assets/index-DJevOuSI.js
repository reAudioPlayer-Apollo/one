import{e as L,a7 as F,j as R,D as r,n as u,E as B,W as j,o as g,i as M,a as s,z as T,g as _,Q as I,H as z,t as i,u as t,aM as q,a6 as H,d as A,aN as W,l as O,m as Q,_ as U,y as G,f as J,c as S,F as D,w as K,h as X}from"./index-CHcGmgsV.js";import{_ as Y}from"./Playlist.vue_vue_type_script_setup_true_lang-B4Hn_KPB.js";import{P as Z}from"./PlaylistCard-C4hL3adL.js";import"./PlaylistEntry-CruVM5vU.js";import"./EditSong.vue_vue_type_script_setup_true_lang-BUMwCx2d.js";import"./playerInPicture-Dfp9IAsf.js";import"./vuedraggable.umd-fyxPpD2k.js";const ee=c=>(O("data-v-99098188"),c=c(),Q(),c),se={class:"fullscreen"},te={class:"now"},le={class:"details"},oe={class:"playlist"},ae={class:"title text-5xl mb-4"},ne={class:"artist text-xl"},ie={class:"progress"},re={class:"text-xs text-muted text-right cursor-pointer"},ce={class:"text-xs text-muted text-left"},ue={class:"lower"},de=ee(()=>s("div",null,null,-1)),me={class:"actions"},pe={class:"volume"},ve=L({__name:"BiggerPlayer",emits:["close"],setup(c,{expose:N,emit:a}){const e=F(),C=R(),f=r(()=>e.playing),w=r(()=>e.song.cover),y=r(()=>e.loaded?`${e.song.title} • ${e.song.artist}`:"reAudioPlayer One");r(()=>C.playlists);const $=r(()=>{var v;return(v=e.playlist)==null?void 0:v.name}),h=u(!1),m=u(!1),x=u(0),V=u(null);document.title=y.value,B(y,v=>{document.title=v}),B(()=>e.song.cover,async()=>{V.value=await W(e.song.cover,y.value,1e3)}),B(()=>e.progressPercent,v=>{x.value=v});const k=a,p=()=>{h.value=!0,document.addEventListener("fullscreenchange",b),document.addEventListener("mousemove",P),document.fullscreenEnabled&&document.documentElement.requestFullscreen()},n=()=>{console.log("hiding..."),h.value=!1,document.addEventListener("fullscreenchange",b),document.removeEventListener("mousemove",P),k("close")};N({show:p,hide:n});const d=j.debounce(()=>{m.value=!1},1e3),P=()=>{m.value=!0,d()},b=()=>{document.fullscreenElement||n()};return(v,l)=>h.value?(g(),M(H,{key:0,to:"#fullscreen-target"},[s("div",se,[s("div",{class:"bg-img",style:T({backgroundImage:`url(${w.value})`})},null,4),s("div",te,[_(z,{src:w.value,alt:y.value,class:I(["cover",{playing:f.value}])},null,8,["src","alt","class"]),s("div",le,[s("p",oe," playing from "+i($.value),1),s("h1",ae,i(t(e).song.title),1),s("h3",ne,i(t(e).song.artist),1)])]),s("div",{class:I(["controls",{showControls:m.value||!f.value}])},[s("div",ie,[s("span",re,i(t(e).displayProgress),1),_(q,{modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=o=>x.value=o),max:1e3,onChange:l[1]||(l[1]=o=>t(e).seekPercent(o/10))},null,8,["modelValue"]),s("span",ce,i(t(e).displayDuration),1)]),s("div",ue,[de,s("div",me,[s("span",{class:"icon cursor-pointer material-symbols-rounded ms-wght-300",onClick:l[2]||(l[2]=(...o)=>t(e).toggleShuffle&&t(e).toggleShuffle(...o))},i(t(e).shuffleIcon),1),s("span",{class:"icon cursor-pointer material-symbols-rounded ms-fill",onClick:l[3]||(l[3]=(...o)=>t(e).previous&&t(e).previous(...o))}," skip_previous "),s("span",{class:"cursor-pointer material-symbols-rounded ms-fill text-5xl",onClick:l[4]||(l[4]=(...o)=>t(e).playPause&&t(e).playPause(...o))},i(t(e).playing?"pause_circle":"play_circle"),1),s("span",{class:"icon cursor-pointer material-symbols-rounded ms-fill",onClick:l[5]||(l[5]=(...o)=>t(e).next&&t(e).next(...o))}," skip_next "),s("span",{class:"icon cursor-pointer material-symbols-rounded ms-wght-300",onClick:l[6]||(l[6]=(...o)=>t(e).toggleRepeat&&t(e).toggleRepeat(...o))},i(t(e).repeat),1)]),s("div",pe,[s("span",{class:"icon cursor-pointer material-symbols-rounded ms-fill select-none",onClick:l[7]||(l[7]=(...o)=>t(e).toggleMute&&t(e).toggleMute(...o))},i(t(e).muteIcon),1),_(q,{modelValue:t(e).volume,"onUpdate:modelValue":l[8]||(l[8]=o=>t(e).volume=o),max:100,onChange:l[9]||(l[9]=o=>t(e).setVolume(o))},null,8,["modelValue"])])])],2)])])):A("",!0)}}),ge=U(ve,[["__scopeId","data-v-99098188"]]),E=c=>(O("data-v-03c3dfcb"),c=c(),Q(),c),ye={class:"bigPlayer"},_e={class:"upNow"},fe=E(()=>s("div",{style:{"animation-delay":"0s"},class:"block"},null,-1)),he=E(()=>s("div",{style:{"animation-delay":".25s"},class:"block"},null,-1)),xe=E(()=>s("div",{style:{"animation-delay":".5s"},class:"block"},null,-1)),ke=[fe,he,xe],be={class:"settings"},Ce={key:1,class:"no-playlist-selected"},we={class:"wrapper"},$e=E(()=>s("h2",null,"Nothing playing yet...",-1)),Pe={class:"playlists"},Se=L({__name:"index",emits:["maximise"],setup(c,{emit:N}){const a=F(),e=R(),C=u(),f=r(()=>a.playing),w=r(()=>a.song.cover),y=r(()=>a.song.id),$=r(()=>a.loaded?`${a.song.title} • ${a.song.artist}`:"reAudioPlayer One"),h=r(()=>e.playlists),m=u(null);document.title=$.value,B($,n=>{document.title=n}),G(()=>{window.setTimeout(()=>{var n;(n=m.value)!=null&&n.scrollTop||m.value.scrollToSong(y.value)},1e3)});let x=u(!1);const V=()=>{var n;(n=C.value)==null||n.show()},k=u(!1),p=u(!1);return(n,d)=>{const P=J("Card");return g(),S("div",ye,[_(ge,{ref_key:"biggerPlayer",ref:C},null,512),t(a).loaded?(g(),S(D,{key:0},[s("div",_e,[_(z,{class:I([{playing:f.value,animate:p.value},"drop-shadow-2xl"]),src:w.value,type:"track","with-ambient":"",name:t(a).song.title},null,8,["class","src","name"]),s("div",{class:I([{playing:f.value,animate:p.value},"blocks"])},ke,2)]),t(a).queue&&t(a).playlist?(g(),M(P,{class:"playlist-overflow drop-shadow-2xl relative",key:t(a).playlist.id},{default:K(()=>[_(Y,{ref_key:"playlistScroll",ref:m,playlist:{...t(a).playlist,queue:t(a).queue},"use-queue":"",draggable:"",onRearrange:t(a).rearrangeQueue},null,8,["playlist","onRearrange"])]),_:1})):A("",!0),s("div",be,[s("span",{class:"iconButton material-symbols-rounded",onClick:V},i(t(x)?"fullscreen_exit":"fullscreen"),1),s("span",{style:T({transform:`rotate(${k.value?0:180}deg)`}),class:"iconButton material-symbols-rounded",onClick:d[0]||(d[0]=()=>k.value=!k.value)},"menu_open",4),s("span",{class:"iconButton material-symbols-rounded",onClick:d[1]||(d[1]=()=>p.value=!p.value)},i(p.value?"motion_photos_off":"animation"),1),s("span",{class:"iconButton material-symbols-rounded",onClick:d[2]||(d[2]=b=>n.$router.push("/player/insights"))}," insights ")])],64)):(g(),S("div",Ce,[s("div",we,[$e,s("div",Pe,[(g(!0),S(D,null,X(h.value,b=>(g(),M(Z,{playlist:b},null,8,["playlist"]))),256))])])]))])}}}),De=U(Se,[["__scopeId","data-v-03c3dfcb"]]);export{De as default};
