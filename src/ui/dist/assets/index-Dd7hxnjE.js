import{e as L,a7 as F,j as R,D as r,n as c,E as B,W as j,o as g,i as M,a as t,z as T,g as f,u as s,Q as I,H as z,t as i,aM as q,a6 as H,d as A,aN as W,l as O,m as Q,_ as U,y as G,f as J,c as S,F as D,w as K,h as X}from"./index-DwIIj2B2.js";import{_ as Y}from"./Playlist.vue_vue_type_script_setup_true_lang-Dtg6molU.js";import{P as Z}from"./PlaylistCard-CLiKXXKR.js";import"./PlaylistEntry-oyklgbh5.js";import"./EditSong.vue_vue_type_script_setup_true_lang-rwov98jA.js";import"./playerInPicture-Dfp9IAsf.js";import"./vuedraggable.umd-CFJncbti.js";const ee=u=>(O("data-v-4dbd10b1"),u=u(),Q(),u),se={class:"fullscreen"},te={class:"now"},le={class:"details"},oe={class:"playlist"},ae={class:"title text-6xl mb-4"},ne={class:"artist text-3xl"},ie={class:"progress"},re={class:"text-xs text-muted text-right cursor-pointer"},ue={class:"text-xs text-muted text-left"},ce={class:"lower"},de=ee(()=>t("div",null,null,-1)),me={class:"actions"},pe={class:"volume"},ve=L({__name:"BiggerPlayer",emits:["close"],setup(u,{expose:N,emit:a}){const e=F(),C=R(),h=r(()=>e.playing),w=r(()=>e.song.cover),y=r(()=>e.loaded?`${e.song.title} • ${e.song.artist}`:"reAudioPlayer One");r(()=>C.playlists);const $=r(()=>{var v;return(v=e.playlist)==null?void 0:v.name}),x=c(!1),m=c(!1),b=c(0),V=c(null);document.title=y.value,B(y,v=>{document.title=v}),B(()=>e.song.cover,async()=>{V.value=await W(e.song.cover,y.value,1e3)}),B(()=>e.progressPercent,v=>{b.value=v});const _=a,p=()=>{x.value=!0,document.addEventListener("fullscreenchange",k),document.addEventListener("mousemove",P),document.fullscreenEnabled&&document.documentElement.requestFullscreen()},n=()=>{console.log("hiding..."),x.value=!1,document.addEventListener("fullscreenchange",k),document.removeEventListener("mousemove",P),_("close")};N({show:p,hide:n});const d=j.debounce(()=>{m.value=!1},1e3),P=()=>{m.value=!0,d()},k=()=>{document.fullscreenElement||n()};return(v,l)=>x.value?(g(),M(H,{key:0,to:"#fullscreen-target"},[t("div",se,[t("div",{class:"bg-img",style:T({backgroundImage:`url(${w.value})`})},null,4),t("div",te,[f(z,{name:s(e).song.title,src:w.value,alt:y.value,class:I(["cover",{playing:h.value}])},null,8,["name","src","alt","class"]),t("div",le,[t("p",oe," playing from "+i($.value),1),t("h1",ae,i(s(e).song.title),1),t("h3",ne,i(s(e).song.artist),1)])]),t("div",{class:I(["controls",{showControls:m.value||!h.value}])},[t("div",ie,[t("span",re,i(s(e).displayProgress),1),f(q,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=o=>b.value=o),max:1e3,onChange:l[1]||(l[1]=o=>s(e).seekPercent(o/10))},null,8,["modelValue"]),t("span",ue,i(s(e).displayDuration),1)]),t("div",ce,[de,t("div",me,[t("span",{class:"icon cursor-pointer material-symbols-rounded ms-wght-300",onClick:l[2]||(l[2]=(...o)=>s(e).toggleShuffle&&s(e).toggleShuffle(...o))},i(s(e).shuffleIcon),1),t("span",{class:"icon cursor-pointer material-symbols-rounded ms-fill",onClick:l[3]||(l[3]=(...o)=>s(e).previous&&s(e).previous(...o))}," skip_previous "),t("span",{class:"cursor-pointer material-symbols-rounded ms-fill text-5xl",onClick:l[4]||(l[4]=(...o)=>s(e).playPause&&s(e).playPause(...o))},i(s(e).playing?"pause_circle":"play_circle"),1),t("span",{class:"icon cursor-pointer material-symbols-rounded ms-fill",onClick:l[5]||(l[5]=(...o)=>s(e).next&&s(e).next(...o))}," skip_next "),t("span",{class:"icon cursor-pointer material-symbols-rounded ms-wght-300",onClick:l[6]||(l[6]=(...o)=>s(e).toggleRepeat&&s(e).toggleRepeat(...o))},i(s(e).repeat),1)]),t("div",pe,[t("span",{class:"icon cursor-pointer material-symbols-rounded ms-fill select-none",onClick:l[7]||(l[7]=(...o)=>s(e).toggleMute&&s(e).toggleMute(...o))},i(s(e).muteIcon),1),f(q,{modelValue:s(e).volume,"onUpdate:modelValue":l[8]||(l[8]=o=>s(e).volume=o),max:100,onChange:l[9]||(l[9]=o=>s(e).setVolume(o))},null,8,["modelValue"])])])],2)])])):A("",!0)}}),ge=U(ve,[["__scopeId","data-v-4dbd10b1"]]),E=u=>(O("data-v-40f8527c"),u=u(),Q(),u),ye={class:"bigPlayer"},_e={class:"upNow"},fe=E(()=>t("div",{style:{"animation-delay":"0s"},class:"block"},null,-1)),he=E(()=>t("div",{style:{"animation-delay":".25s"},class:"block"},null,-1)),xe=E(()=>t("div",{style:{"animation-delay":".5s"},class:"block"},null,-1)),be=[fe,he,xe],ke={class:"settings"},Ce={key:1,class:"no-playlist-selected"},we={class:"wrapper"},$e=E(()=>t("h2",null,"Nothing playing yet...",-1)),Pe={class:"playlists"},Se=L({__name:"index",emits:["maximise"],setup(u,{emit:N}){const a=F(),e=R(),C=c(),h=r(()=>a.playing),w=r(()=>a.song.cover),y=r(()=>a.song.id),$=r(()=>a.loaded?`${a.song.title} • ${a.song.artist}`:"reAudioPlayer One"),x=r(()=>e.playlists),m=c(null);document.title=$.value,B($,n=>{document.title=n}),G(()=>{window.setTimeout(()=>{var n;(n=m.value)!=null&&n.scrollTop||m.value.scrollToSong(y.value)},1e3)});let b=c(!1);const V=()=>{var n;(n=C.value)==null||n.show()},_=c(!1),p=c(!1);return(n,d)=>{const P=J("Card");return g(),S("div",ye,[f(ge,{ref_key:"biggerPlayer",ref:C},null,512),s(a).loaded?(g(),S(D,{key:0},[t("div",_e,[f(z,{class:I([{playing:h.value,animate:p.value},"drop-shadow-2xl"]),src:w.value,type:"track","with-ambient":"",name:s(a).song.title},null,8,["class","src","name"]),t("div",{class:I([{playing:h.value,animate:p.value},"blocks"])},be,2)]),s(a).queue&&s(a).playlist&&!_.value?(g(),M(P,{class:"playlist-overflow drop-shadow-2xl relative",key:s(a).playlist.id},{default:K(()=>[f(Y,{ref_key:"playlistScroll",ref:m,playlist:{...s(a).playlist,queue:s(a).queue},"use-queue":"",draggable:"",onRearrange:s(a).rearrangeQueue},null,8,["playlist","onRearrange"])]),_:1})):A("",!0),t("div",ke,[t("span",{class:"iconButton material-symbols-rounded",onClick:V},i(s(b)?"fullscreen_exit":"fullscreen"),1),t("span",{style:T({transform:`rotate(${_.value?0:180}deg)`}),class:"iconButton material-symbols-rounded",onClick:d[0]||(d[0]=()=>_.value=!_.value)},"menu_open",4),t("span",{class:"iconButton material-symbols-rounded",onClick:d[1]||(d[1]=()=>p.value=!p.value)},i(p.value?"motion_photos_off":"animation"),1),t("span",{class:"iconButton material-symbols-rounded",onClick:d[2]||(d[2]=k=>n.$router.push("/player/insights"))}," insights ")])],64)):(g(),S("div",Ce,[t("div",we,[$e,t("div",Pe,[(g(!0),S(D,null,X(x.value,k=>(g(),M(Z,{playlist:k},null,8,["playlist"]))),256))])])]))])}}}),De=U(Se,[["__scopeId","data-v-40f8527c"]]);export{De as default};
