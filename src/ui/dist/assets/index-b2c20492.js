import{i as C,B as E,q as m,D as o,S as N,T as P,E as T,G as A,o as s,c as a,g as B,L,a as n,t as I,F as c,H as d,d as _,j as f,f as y,m as O,n as V,_ as D}from"./index-b9041c20.js";const i=v=>(O("data-v-28db7468"),v=v(),V(),v),F={class:"search"},$={key:0,class:"fill-page"},G={key:1,class:"fill-page"},H=i(()=>n("h1",null,"Something went wrong",-1)),J={class:"top flex gap-8"},M={class:"top min-w-max"},Y=i(()=>n("h2",null,"Top Result",-1)),z={key:0,class:"list songs flex-1"},K={class:"flex justify-between items-center"},Q=i(()=>n("h2",null,"Songs",-1)),U={class:"flex flex-wrap flexibleSearchResults"},W={key:0,class:"list flex-1 min-w-[40vw] artists"},X=i(()=>n("h2",null,"Artists",-1)),Z={key:1,class:"list flex-1 min-w-[40vw] playlists"},ee=i(()=>n("h2",null,"Playlists",-1)),te={key:2,class:"list flex-1 min-w-[40vw] albums"},se=i(()=>n("h2",null,"Albums",-1)),le=C({__name:"index",setup(v){const R=E(),g=m(!0),p=m(null),h=m(!1),u=m(null),j=o(()=>{var e,t;return(t=(e=u.value)==null?void 0:e.items)==null?void 0:t[0]}),r=o(()=>{var e,t;return(t=(e=u.value)==null?void 0:e.items)==null?void 0:t.filter(l=>l.type==="song")}),x=o(()=>{var e,t;return(t=(e=u.value)==null?void 0:e.items)==null?void 0:t.filter(l=>l.type==="artist")}),w=o(()=>{var e,t;return(t=(e=u.value)==null?void 0:e.items)==null?void 0:t.filter(l=>l.type==="playlist")}),S=o(()=>{var e,t;return(t=(e=u.value)==null?void 0:e.items)==null?void 0:t.filter(l=>l.type==="album")}),k=o(()=>R.params.query),q=o(()=>[...N,...P]),b=async()=>{g.value=!0,p.value=null;const e=await fetch("/api/search",{method:"POST",body:JSON.stringify({query:k.value,scope:q.value})});if(g.value=!1,!e.ok){p.value=await e.text();return}const t=await e.json();u.value=t};return T(b),A(k,b),(e,t)=>(s(),a("div",F,[g.value?(s(),a("div",$,[B(L)])):p.value?(s(),a("div",G,[H,n("p",null,I(p.value),1)])):(s(),a(c,{key:2},[n("div",J,[n("div",M,[Y,B(d,{item:j.value,large:""},null,8,["item"])]),r.value.length?(s(),a("div",z,[n("div",K,[Q,r.value.length>4?(s(),a("span",{key:0,class:"more cursor-pointer text-muted hover:text-primary text-sm uppercase",onClick:t[0]||(t[0]=l=>h.value=!h.value)},I(h.value?"Show less":`Show all ${r.value.length} songs`),1)):_("",!0)]),(s(!0),a(c,null,f(h.value?r.value:r.value.slice(0,4),l=>(s(),y(d,{item:l},null,8,["item"]))),256))])):_("",!0)]),n("div",U,[x.value.length?(s(),a("div",W,[X,(s(!0),a(c,null,f(x.value,l=>(s(),y(d,{item:l},null,8,["item"]))),256))])):_("",!0),w.value.length?(s(),a("div",Z,[ee,(s(!0),a(c,null,f(w.value,l=>(s(),y(d,{item:l},null,8,["item"]))),256))])):_("",!0),S.value.length?(s(),a("div",te,[se,(s(!0),a(c,null,f(S.value,l=>(s(),y(d,{item:l},null,8,["item"]))),256))])):_("",!0)])],64))]))}});const ne=D(le,[["__scopeId","data-v-28db7468"]]);export{ne as default};
