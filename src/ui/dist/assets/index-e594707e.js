import{i as S,o as s,c as _,t as g,O as D,_ as V,q as m,E as Q,D as N,f as w,d as $,a as t,b as T,F as x,m as B,n as E,c9 as X,g as v,I,j as C,w as U,h as Z,M as j,u as b,C as q,aq as ee,cm as H,cn as F,co as R,cp as J,cq as Y,G as L,bY as te,bM as ae,Y as le,cr as se,B as oe,s as ne,bk as ie}from"./index-e4efca28.js";import{_ as ce}from"./Markdown.vue_vue_type_style_index_0_lang-46c4b158.js";import{T as W}from"./TrackCompact-ceaa84f2.js";import{G as re}from"./gistClient-b47e942f.js";const ue=S({__name:"TabButton",props:{name:{type:String,required:!0},active:{type:Boolean,default:!1}},setup(l){return(e,o)=>(s(),_("button",{class:D(["btn",{active:l.active}])},g(l.name),3))}});const de=V(ue,[["__scopeId","data-v-3f038910"]]),pe="0.11.15",z=l=>(B("data-v-0f054692"),l=l(),E(),l),_e={class:"flex flex-col"},ve={key:0,class:"text-sm flex items-center gap-2 latest"},me=z(()=>t("span",{class:"material-symbols-rounded"},"check",-1)),he={key:1,class:"text-sm flex items-center gap-2 update"},ye=z(()=>t("span",{class:"material-symbols-rounded"},"update",-1)),M="0.11.1",fe=S({__name:"About",setup(l){const e=m(""),o=m("");Q(async()=>{const d=await(await fetch("https://api.github.com/repos/reAudioPlayer/one/releases/latest")).json();e.value=d.tag_name,o.value=d.body});const p=N(()=>e.value===M),n=N(()=>pe.split(".").pop()),u=m(null);return(a,d)=>(s(),_("div",_e,[o.value?(s(),w(ce,{key:0,content:o.value,title:"What's new in "+e.value,ref_key:"changelog",ref:u,onClose:d[0]||(d[0]=()=>o.value="")},null,8,["content","title"])):$("",!0),t("span",null,[t("strong",null,"v"+g(M)),T(" (Build "+g(n.value)+") ",1)]),e.value?(s(),_(x,{key:1},[p.value?(s(),_("span",ve,[me,T(" You're on the latest version "),t("a",{class:"cursor-pointer",onClick:d[1]||(d[1]=y=>{var c;return(c=u.value)==null?void 0:c.show()})}," What's changed? ")])):(s(),_("span",he,[ye,T(" Update available: "+g(e.value)+" ",1),t("a",{class:"cursor-pointer",onClick:d[2]||(d[2]=y=>{var c;return(c=u.value)==null?void 0:c.show()})}," What's changed? ")]))],64)):$("",!0)]))}});const be=V(fe,[["__scopeId","data-v-0f054692"]]);const O=l=>(B("data-v-16d50c59"),l=l(),E(),l),ge={class:"wrap"},ke=O(()=>t("h3",null,"Browser Data",-1)),we=O(()=>t("h3",null,"Import / Export",-1)),xe={class:"flex gap-4 mb-4"},$e={class:"covers mb-2"},Se=O(()=>t("h3",null,"Local covers",-1)),Ve={key:0,class:"items gap-4"},Ce={class:"flex justify-between w-full mb-4"},Ie={class:"overflow-hidden"},Pe=["onClick"],Ae={key:1,class:"text-muted italic"},Te={class:"tracks"},De=O(()=>t("h3",null,"Local tracks",-1)),Ne={key:0,class:"items gap-4"},Be={class:"flex justify-between w-full mb-4"},Ee={class:"overflow-hidden"},Oe=["onClick"],Ge={class:"flex justify-center w-full mb-4"},Ue=["src"],qe={key:1,class:"text-muted italic"},Le={__name:"LocalData",setup(l){const e=m([]),o=m([]),p=X(),n=()=>{fetch("/api/config/images").then(c=>c.json()).then(c=>e.value=c),fetch("/api/config/tracks").then(c=>c.json()).then(c=>o.value=c)},u=async c=>{await fetch("/api/config/images",{method:"DELETE",body:JSON.stringify({name:c})}),n()},a=async c=>{fetch("/api/config/tracks",{method:"DELETE",body:JSON.stringify({name:c})}),n()},d=c=>{p.loadPlaylist("track",c)};n();const y=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()};return(c,f)=>(s(),_("div",ge,[ke,v(I,{class:"mb-4",icon:"delete",label:"Clean browser settings",onClick:y}),we,t("div",xe,[v(I,{icon:"backup",label:"Back up / Export",onClick:f[0]||(f[0]=h=>c.$router.push("/export"))}),v(I,{icon:"cloud_download",label:"Import",onClick:f[1]||(f[1]=h=>c.$router.push("/import"))})]),t("div",$e,[Se,e.value.length?(s(),_("div",Ve,[(s(!0),_(x,null,C(e.value,(h,A)=>(s(),w(q,{key:A,class:"cover-wrapper p-4"},{default:U(()=>[v(Z,{src:h.name,class:"rounded-xl mb-4"},null,8,["src"]),t("div",Ce,[t("p",Ie,[v(j,{text:h.name},null,8,["text"])]),t("span",{class:"ml-2 material-symbols-rounded cursor-pointer",onClick:i=>u(h.name)},"delete",8,Pe)]),(s(!0),_(x,null,C(h.songs,(i,r)=>(s(),w(b(W),{id:i.id,key:r,artist:i.artist,cover:i.cover,title:i.title,onPlay:k=>d(i.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(s(),_("span",Ae,"No local covers"))]),t("div",Te,[De,o.value.length?(s(),_("div",Ne,[(s(!0),_(x,null,C(o.value,(h,A)=>(s(),w(q,{key:A,class:"track p-4"},{default:U(()=>[t("div",Be,[t("p",Ee,[v(j,{text:h.name},null,8,["text"])]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:i=>a(h.name)},"delete",8,Oe)]),t("div",Ge,[t("audio",{src:"/api/"+h.name.replace("local:","/src/tracks/"),controls:""},null,8,Ue)]),(s(!0),_(x,null,C(h.songs,(i,r)=>(s(),w(b(W),{id:i.id,key:r,artist:i.artist,cover:i.cover,title:i.title,onPlay:k=>d(i.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(s(),_("span",qe,"No local tracks"))])]))}},je=V(Le,[["__scopeId","data-v-16d50c59"]]),Je={class:"markdown-body"},We=ee("<p>By default, reAudioPlayer does not share any data with third parties.</p><p>Optionally, when entering your Spotify credentials, reAudioPlayer can access your Spotify data to offer the following features:</p><ul><li>Display your Spotify playlists and offer importing them</li><li>Search songs on Spotify without leaving reAudioPlayer and adding them to your playlists</li><li>Display song information (BPM, key, etc.) from Spotify</li><li>Search artists on Spotify without leaving reAudioPlayer to display their information and follow them on Spotify</li><li>Display artist information (genres, popularity, etc.) from Spotify</li><li>Provide the release radar</li></ul><p>Optionally, when entering your GitHub credentials, reAudioPlayer can access your GitHub data to offer the following features:</p><ul><li>Storing your library in a GitHub Gist</li><li>Importing your library from a GitHub Gist</li></ul><p>All data stays between your device and Spotify or Github, respectively.</p><p>Depending on the cache policy, reAudioPlayer stores songs locally to improve performance and reduce network traffic. The browser additionally stores the following user preferences in local storage:</p><ul><li>Theme</li><li>Selected audio player</li><li>Volume</li><li>Repeat mode</li><li>Picture in Picture mode</li><li>pre-rendered placeholder images</li></ul><p>You can manage your local data, that you manually uploaded to reAudioPlayer, in section “Local Data”. None of this data left or will leave your device.</p>",9),Me=[We],He={__name:"Privacy",setup(l,{expose:e}){return e({frontmatter:{}}),(p,n)=>(s(),_("div",Je,Me))}},Fe={class:"material-symbols-rounded ms-wght-300 cursor-pointer"},Re={class:"checkbox__label"},Ye={class:"checkbox__label__title"},ze={class:"checkbox__label__sublabel italic"},Ke=S({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},sublabel:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(l,{emit:e}){const o=l,p=e,n=a=>p("update:modelValue",a),u=()=>{o.disabled||n(!o.modelValue)};return(a,d)=>(s(),_("div",{class:D([{"opacity-50":l.disabled},"checkbox"]),onClick:u},[t("span",Fe,g(l.modelValue?"check_box":"check_box_outline_blank"),1),t("div",Re,[t("div",Ye,g(l.label),1),t("div",ze,g(l.sublabel),1)])],2))}});const P=V(Ke,[["__scopeId","data-v-982c4110"]]),Qe={class:"relative"},Xe=S({__name:"Cache",setup(l){const e=m(null),o=m("");H().then(u=>{e.value=u,o.value=JSON.stringify(u)});const p=N(()=>e.value?JSON.stringify(e.value)!==o.value:!1),n=async()=>{p.value&&(await R(e.value),o.value=JSON.stringify(e.value))};return(u,a)=>(s(),_("div",Qe,[e.value?(s(),w(P,{key:0,modelValue:e.value.cache.preserve,"onUpdate:modelValue":a[0]||(a[0]=d=>e.value.cache.preserve=d),label:"Preserve cache"},null,8,["modelValue"])):$("",!0),e.value?(s(),w(P,{key:1,modelValue:e.value.cache.preserveInSession,"onUpdate:modelValue":a[1]||(a[1]=d=>e.value.cache.preserveInSession=d),disabled:e.value.cache.preserve,label:"Preserve cache in session"},null,8,["modelValue","disabled"])):$("",!0),e.value?(s(),w(F,{key:2,modelValue:e.value.cache.strategy,"onUpdate:modelValue":a[2]||(a[2]=d=>e.value.cache.strategy=d),options:[{value:"all",label:"All Songs"},{value:"playlist",label:"Current Playlist"},{value:"currentNext",label:"Current + Next Song "},{value:"current",label:"Current Song Only"}],icon:"cached"},null,8,["modelValue"])):$("",!0),v(I,{disabled:!e.value||!p.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:n},null,8,["disabled"])]))}});const Ze={name:"Theme",props:{name:String},methods:{selected(){return J.getCurrentTheme()==this.name},select(){J.setTheme(this.name),this.$emit("selected")}}},et=["src"];function tt(l,e,o,p,n,u){return s(),_("div",{onClick:e[0]||(e[0]=(...a)=>u.select&&u.select(...a)),class:"wrapper"},[t("p",{class:D(["mb-4",{selected:u.selected()}])},g(o.name),3),t("img",{src:`/assets/img/themes/${this.name}.svg`,class:D({selected:u.selected()})},null,10,et)])}const at=V(Ze,[["render",tt],["__scopeId","data-v-74855c2d"]]),K=l=>(B("data-v-5cc6477c"),l=l(),E(),l),lt=K(()=>t("h3",{class:"mt-[10px]"},"Theme",-1)),st={class:"themes"},ot=K(()=>t("h3",{class:"mt-[10px]"},"Sidebar",-1)),nt=S({__name:"Appearance",setup(l){const e=Y(),o=["dynamic","light","dark"];return(p,n)=>(s(),_(x,null,[lt,v(P,{modelValue:b(e).ambient,"onUpdate:modelValue":n[0]||(n[0]=u=>b(e).ambient=u),disabled:!b(e).themeSupportsAmbient,label:"Ambient"},null,8,["modelValue","disabled"]),t("div",st,[(s(),_(x,null,C(o,(u,a)=>v(at,{key:a,name:u},null,8,["name"])),64))]),ot,v(P,{modelValue:b(e).sidebar.news,"onUpdate:modelValue":n[1]||(n[1]=u=>b(e).sidebar.news=u),label:"Show 'News' Tab"},null,8,["modelValue"]),v(P,{modelValue:b(e).sidebar.sports,"onUpdate:modelValue":n[2]||(n[2]=u=>b(e).sidebar.sports=u),label:"Show 'Sports' Tab"},null,8,["modelValue"])],64))}});const it=V(nt,[["__scopeId","data-v-5cc6477c"]]),ct={class:"relative"},rt=S({__name:"Player",setup(l){const e=Y();return(o,p)=>(s(),_("div",ct,[v(P,{modelValue:b(e).player.pictureInPicture,"onUpdate:modelValue":p[0]||(p[0]=n=>b(e).player.pictureInPicture=n),label:"Support Picture in Picture",sublabel:"this will slightly reduce performance"},null,8,["modelValue"]),v(F,{modelValue:b(e).player.type,"onUpdate:modelValue":p[1]||(p[1]=n=>b(e).player.type=n),options:[{value:"web",label:"Native player",icon:"horizontal_rule"},{value:"web/wave",label:"Wave player",icon:"graphic_eq"}],icon:"music_note"},null,8,["modelValue"])]))}});const ut={key:0,class:"material-symbols-rounded"},dt=["disabled","placeholder","type"],pt={__name:"PasswordInputWithIcon",props:{icon:String,placeholder:String,modelValue:String,disabled:Boolean},emits:["update:modelValue","change","submit"],setup(l,{emit:e}){const o=l,p=m(o.modelValue);L(()=>o.modelValue,y=>{p.value=y});const n=e,u=()=>{n("update:modelValue",p.value),n("change",p.value)},a=y=>{y.key==="Enter"&&n("submit",p)},d=m(!1);return(y,c)=>(s(),_("div",{class:D([{disabled:l.disabled},"text-input-with-icon rounded-3xl flex items-center px-4"])},[l.icon?(s(),_("span",ut,g(l.icon),1)):$("",!0),te(t("input",{"onUpdate:modelValue":c[0]||(c[0]=f=>p.value=f),disabled:l.disabled,placeholder:l.placeholder,type:d.value?"text":"password",onInput:u,onKeyup:a},null,40,dt),[[ae,p.value]]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:c[1]||(c[1]=f=>d.value=!d.value)},g(d.value?"visibility":"visibility_off"),1)],2))}},G=V(pt,[["__scopeId","data-v-5e026540"]]),_t=t("summary",{class:"cursor-pointer"},"How to",-1),vt=t("p",null,[T(" 1) Head over to the "),t("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1),mt=t("p",null,"2) Create An App",-1),ht=t("p",null,"3) Enter any name and any description",-1),yt=t("p",null," 5) Copy and enter the client id and secret into the corresponding input field ",-1),ft=t("hr",{class:"my-4"},null,-1),bt=t("h5",null,"Client ID:",-1),gt=t("h5",{class:"mt-4"},"Client Secret:",-1),kt=t("h3",{class:"mt-[10px]"},"Github",-1),wt=t("h5",{class:"mt-4"},"PAT:",-1),xt=t("h5",{class:"mt-4"},"Gist ID:",-1),$t={class:"flex gap-4 justify-end mt-4"},St=S({__name:"Integration",setup(l){const e=m(!1),o=m({id:"",secret:""}),p=N(()=>e.value?Object.values(o.value).some(i=>i==="")?!1:o.value.id!==n.value.id||o.value.secret!==n.value.secret||e.value!==n.value.enabled:n.value.enabled),n=m({id:"",secret:"",enabled:!1});fetch("/api/config/spotify").then(async i=>{let r={id:"",secret:"",enabled:!1};if(i.status==200)r=await i.json();else if([204,401].includes(i.status))r={id:"restricted",secret:"restricted",enabled:!1};else throw new Error("Failed to fetch spotify config");n.value=r,n.value.enabled=![r.id,r.secret].includes("restricted"),e.value=n.value.enabled,o.value.id=r.id.replace("restricted",""),o.value.secret=r.secret.replace("restricted","")});const u=async()=>{if(!p.value)return;let i=o.value.id,r=o.value.secret;e.value||(r=i="restricted"),(await fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:i,secret:r})})).ok&&(n.value={id:i,secret:r,enabled:e.value})},a=m(null),d=m("");H().then(i=>{a.value=i,d.value=JSON.stringify(i)});const y=N(()=>a.value?JSON.stringify(a.value)!==d.value:!1),c=async()=>{y.value&&(await R(a.value),d.value=JSON.stringify(a.value))},h=`http://${window.location.host}/api/spotify/callback`,A=async()=>{var i,r;(r=(i=a.value)==null?void 0:i.github)!=null&&r.githubPat&&(a.value.github.gistId||(a.value.github.gistId=await re.search(a.value.github.githubPat),a.value.github.gistId||se.addError("Failed to find gist","You can start syncing directly in 'Local Data' (a Gist will be created for you) or enter the gist id manually")))};return L(()=>{var i,r;return(r=(i=a.value)==null?void 0:i.github)==null?void 0:r.githubPat},A),(i,r)=>(s(),_(x,null,[v(P,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=k=>e.value=k),class:"h3 mb-2",label:"Spotify"},null,8,["modelValue"]),t("details",null,[_t,vt,mt,ht,t("p",null,[T(" 4) Edit the settings: set the redirect url to "),t("a",{href:h},g(h))]),yt]),ft,bt,v(G,{modelValue:o.value.id,"onUpdate:modelValue":r[1]||(r[1]=k=>o.value.id=k),disabled:!e.value,icon:"token"},null,8,["modelValue","disabled"]),gt,v(G,{modelValue:o.value.secret,"onUpdate:modelValue":r[2]||(r[2]=k=>o.value.secret=k),disabled:!e.value,icon:"lock"},null,8,["modelValue","disabled"]),v(I,{disabled:!p.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:u},null,8,["disabled"]),kt,wt,a.value?(s(),w(G,{key:0,modelValue:a.value.github.githubPat,"onUpdate:modelValue":r[3]||(r[3]=k=>a.value.github.githubPat=k),icon:"lock"},null,8,["modelValue"])):$("",!0),xt,a.value?(s(),w(le,{key:1,modelValue:a.value.github.gistId,"onUpdate:modelValue":r[4]||(r[4]=k=>a.value.github.gistId=k),icon:"numbers"},null,8,["modelValue"])):$("",!0),t("div",$t,[v(I,{disabled:!a.value||!a.value.github.githubPat||!!a.value.github.gistId,icon:"search",label:"Search",onClick:A},null,8,["disabled"]),v(I,{disabled:!a.value||!y.value,icon:"save",label:"Save",onClick:c},null,8,["disabled"])])],64))}}),Vt=l=>(B("data-v-ae954c76"),l=l(),E(),l),Ct={class:"p-[10px] preferences"},It=Vt(()=>t("h1",{class:"w-full"},"Preferences",-1)),Pt={class:"wrapper"},At={class:"sections flex flex-col"},Tt={class:"section p-2"},Dt={class:"h5 text-sm"},Nt=S({__name:"index",setup(l){const e={About:be,Privacy:He,"Local Data":je,Integrations:St,"Cache Policy":Xe,Appearance:it,Player:rt},o=m([{name:"General",items:["About"]},{name:"My Data",items:["Privacy","Local Data","Integrations"]},{name:"Player",items:["Player","Cache Policy"]},{name:"Appearance",items:["Appearance"]}]),p=oe(),n=ne();let u=p.query.tab;const a=m("About");return Object.keys(e).includes(u)&&(a.value=u),L(a,d=>{const y={tab:d};n.replace({query:y})}),(d,y)=>(s(),_("div",Ct,[It,t("div",Pt,[t("div",At,[(s(!0),_(x,null,C(o.value,c=>(s(),_("div",Tt,[t("span",Dt,g(c.name),1),(s(!0),_(x,null,C(c.items,f=>(s(),w(de,{key:f,name:f,active:a.value===f,onClick:h=>a.value=f},null,8,["name","active","onClick"]))),128))]))),256))]),v(q,{class:"content h-max p-4 pt-0"},{default:U(()=>[t("h2",null,g(a.value),1),(s(),w(ie(e[a.value])))]),_:1})])]))}});const Ut=V(Nt,[["__scopeId","data-v-ae954c76"]]);export{Ut as default};
