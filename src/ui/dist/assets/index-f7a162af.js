import{i as S,o,c as _,t as g,O as T,_ as V,q as h,E as X,D,f as w,d as C,a as t,b as N,F as $,m as B,n as U,c9 as Z,g as m,I as x,j as P,w as L,h as ee,M as R,u as f,C as G,aq as te,cm as H,cn as F,co as Y,cp as J,cq as q,G as j,bY as ae,bM as le,Y as se,cr as oe,B as ne,s as ie,bk as ce}from"./index-926884cb.js";import{_ as re}from"./Markdown.vue_vue_type_style_index_0_lang-863128c2.js";import{T as W}from"./TrackCompact-9f5e6d25.js";import{G as ue}from"./gistClient-c2987d49.js";const de=S({__name:"TabButton",props:{name:{type:String,required:!0},active:{type:Boolean,default:!1}},setup(l){return(e,s)=>(o(),_("button",{class:T(["btn",{active:l.active}])},g(l.name),3))}});const pe=V(de,[["__scopeId","data-v-3f038910"]]),_e="0.11.26",z=l=>(B("data-v-6c134c33"),l=l(),U(),l),me={class:"flex flex-col"},ve={key:0,class:"text-sm flex items-center gap-2 latest"},he=z(()=>t("span",{class:"material-symbols-rounded"},"check",-1)),ye={key:1,class:"text-sm flex items-center gap-2 update"},fe=z(()=>t("span",{class:"material-symbols-rounded"},"update",-1)),M="0.11.2",be=S({__name:"About",setup(l){const e=h(""),s=h("");X(async()=>{const c=await(await fetch("https://api.github.com/repos/reAudioPlayer/one/releases/latest")).json();e.value=c.tag_name,s.value=c.body});const p=D(()=>e.value===M),n=D(()=>_e.split(".").pop()),d=h(null);return(a,c)=>(o(),_("div",me,[s.value?(o(),w(re,{key:0,content:s.value,title:"What's new in "+e.value,ref_key:"changelog",ref:d,onClose:c[0]||(c[0]=()=>s.value="")},null,8,["content","title"])):C("",!0),t("span",null,[t("strong",null,"v"+g(M)),N(" (Build "+g(n.value)+") ",1)]),e.value?(o(),_($,{key:1},[p.value?(o(),_("span",ve,[he,N(" You're on the latest version "),t("a",{class:"cursor-pointer",onClick:c[1]||(c[1]=y=>{var r;return(r=d.value)==null?void 0:r.show()})}," What's changed? ")])):(o(),_("span",ye,[fe,N(" Update available: "+g(e.value)+" ",1),t("a",{class:"cursor-pointer",onClick:c[2]||(c[2]=y=>{var r;return(r=d.value)==null?void 0:r.show()})}," What's changed? ")]))],64)):C("",!0)]))}});const ge=V(be,[["__scopeId","data-v-6c134c33"]]);const E=l=>(B("data-v-16d50c59"),l=l(),U(),l),ke={class:"wrap"},we=E(()=>t("h3",null,"Browser Data",-1)),$e=E(()=>t("h3",null,"Import / Export",-1)),xe={class:"flex gap-4 mb-4"},Se={class:"covers mb-2"},Ce=E(()=>t("h3",null,"Local covers",-1)),Ve={key:0,class:"items gap-4"},Pe={class:"flex justify-between w-full mb-4"},Ie={class:"overflow-hidden"},Ae=["onClick"],De={key:1,class:"text-muted italic"},Ne={class:"tracks"},Te=E(()=>t("h3",null,"Local tracks",-1)),Be={key:0,class:"items gap-4"},Ue={class:"flex justify-between w-full mb-4"},Ee={class:"overflow-hidden"},Oe=["onClick"],Le={class:"flex justify-center w-full mb-4"},Ge=["src"],qe={key:1,class:"text-muted italic"},je={__name:"LocalData",setup(l){const e=h([]),s=h([]),p=Z(),n=()=>{fetch("/api/config/images").then(r=>r.json()).then(r=>e.value=r),fetch("/api/config/tracks").then(r=>r.json()).then(r=>s.value=r)},d=async r=>{await fetch("/api/config/images",{method:"DELETE",body:JSON.stringify({name:r})}),n()},a=async r=>{fetch("/api/config/tracks",{method:"DELETE",body:JSON.stringify({name:r})}),n()},c=r=>{p.loadPlaylist("track",r)};n();const y=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()};return(r,b)=>(o(),_("div",ke,[we,m(x,{class:"mb-4",icon:"delete",label:"Clean browser settings",onClick:y}),$e,t("div",xe,[m(x,{icon:"backup",label:"Back up / Export",onClick:b[0]||(b[0]=v=>r.$router.push("/export"))}),m(x,{icon:"cloud_download",label:"Import",onClick:b[1]||(b[1]=v=>r.$router.push("/import"))})]),t("div",Se,[Ce,e.value.length?(o(),_("div",Ve,[(o(!0),_($,null,P(e.value,(v,A)=>(o(),w(G,{key:A,class:"cover-wrapper p-4"},{default:L(()=>[m(ee,{src:v.name,class:"rounded-xl mb-4"},null,8,["src"]),t("div",Pe,[t("p",Ie,[m(R,{text:v.name},null,8,["text"])]),t("span",{class:"ml-2 material-symbols-rounded cursor-pointer",onClick:i=>d(v.name)},"delete",8,Ae)]),(o(!0),_($,null,P(v.songs,(i,u)=>(o(),w(f(W),{id:i.id,key:u,artist:i.artist,cover:i.cover,title:i.title,onPlay:k=>c(i.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(o(),_("span",De,"No local covers"))]),t("div",Ne,[Te,s.value.length?(o(),_("div",Be,[(o(!0),_($,null,P(s.value,(v,A)=>(o(),w(G,{key:A,class:"track p-4"},{default:L(()=>[t("div",Ue,[t("p",Ee,[m(R,{text:v.name},null,8,["text"])]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:i=>a(v.name)},"delete",8,Oe)]),t("div",Le,[t("audio",{src:"/api/"+v.name.replace("local:","/src/tracks/"),controls:""},null,8,Ge)]),(o(!0),_($,null,P(v.songs,(i,u)=>(o(),w(f(W),{id:i.id,key:u,artist:i.artist,cover:i.cover,title:i.title,onPlay:k=>c(i.id)},null,8,["id","artist","cover","title","onPlay"]))),128))]),_:2},1024))),128))])):(o(),_("span",qe,"No local tracks"))])]))}},Re=V(je,[["__scopeId","data-v-16d50c59"]]),Je={class:"markdown-body"},We=te("<p>By default, reAudioPlayer does not share any data with third parties.</p><p>Optionally, when entering your Spotify credentials, reAudioPlayer can access your Spotify data to offer the following features:</p><ul><li>Display your Spotify playlists and offer importing them</li><li>Search songs on Spotify without leaving reAudioPlayer and adding them to your playlists</li><li>Display song information (BPM, key, etc.) from Spotify</li><li>Search artists on Spotify without leaving reAudioPlayer to display their information and follow them on Spotify</li><li>Display artist information (genres, popularity, etc.) from Spotify</li><li>Provide the release radar</li></ul><p>Optionally, when entering your GitHub credentials, reAudioPlayer can access your GitHub data to offer the following features:</p><ul><li>Storing your library in a GitHub Gist</li><li>Importing your library from a GitHub Gist</li></ul><p>All data stays between your device and Spotify or Github, respectively.</p><p>Depending on the cache policy, reAudioPlayer stores songs locally to improve performance and reduce network traffic. The browser additionally stores the following user preferences in local storage:</p><ul><li>Theme</li><li>Selected audio player</li><li>Volume</li><li>Repeat mode</li><li>Picture in Picture mode</li><li>pre-rendered placeholder images</li></ul><p>You can manage your local data, that you manually uploaded to reAudioPlayer, in section “Local Data”. None of this data left or will leave your device.</p>",9),Me=[We],He={__name:"Privacy",setup(l,{expose:e}){return e({frontmatter:{}}),(p,n)=>(o(),_("div",Je,Me))}},Fe={class:"material-symbols-rounded ms-wght-300 cursor-pointer"},Ye={class:"checkbox__label"},ze={class:"checkbox__label__title"},Ke={class:"checkbox__label__sublabel italic"},Qe=S({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},sublabel:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(l,{emit:e}){const s=l,p=e,n=a=>p("update:modelValue",a),d=()=>{s.disabled||n(!s.modelValue)};return(a,c)=>(o(),_("div",{class:T([{"opacity-50":l.disabled},"checkbox"]),onClick:d},[t("span",Fe,g(l.modelValue?"check_box":"check_box_outline_blank"),1),t("div",Ye,[t("div",ze,g(l.label),1),t("div",Ke,g(l.sublabel),1)])],2))}});const I=V(Qe,[["__scopeId","data-v-be9fa887"]]),Xe={class:"relative"},Ze=S({__name:"Cache",setup(l){const e=h(null),s=h("");H().then(d=>{e.value=d,s.value=JSON.stringify(d)});const p=D(()=>e.value?JSON.stringify(e.value)!==s.value:!1),n=async()=>{p.value&&(await Y(e.value),s.value=JSON.stringify(e.value))};return(d,a)=>(o(),_("div",Xe,[e.value?(o(),w(I,{key:0,modelValue:e.value.cache.preserve,"onUpdate:modelValue":a[0]||(a[0]=c=>e.value.cache.preserve=c),label:"Preserve cache"},null,8,["modelValue"])):C("",!0),e.value?(o(),w(I,{key:1,modelValue:e.value.cache.preserveInSession,"onUpdate:modelValue":a[1]||(a[1]=c=>e.value.cache.preserveInSession=c),disabled:e.value.cache.preserve,label:"Preserve cache in session"},null,8,["modelValue","disabled"])):C("",!0),e.value?(o(),w(F,{key:2,modelValue:e.value.cache.strategy,"onUpdate:modelValue":a[2]||(a[2]=c=>e.value.cache.strategy=c),options:[{value:"all",label:"All Songs"},{value:"playlist",label:"Current Playlist"},{value:"currentNext",label:"Current + Next Song "},{value:"current",label:"Current Song Only"}],icon:"cached"},null,8,["modelValue"])):C("",!0),m(x,{disabled:!e.value||!p.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:n},null,8,["disabled"])]))}});const et={name:"Theme",props:{name:String},methods:{selected(){return J.getCurrentTheme()==this.name},select(){J.setTheme(this.name),this.$emit("selected")}}},tt=["src"];function at(l,e,s,p,n,d){return o(),_("div",{onClick:e[0]||(e[0]=(...a)=>d.select&&d.select(...a)),class:"wrapper"},[t("p",{class:T(["mb-4",{selected:d.selected()}])},g(s.name),3),t("img",{src:`/assets/img/themes/${this.name}.svg`,class:T({selected:d.selected()})},null,10,tt)])}const lt=V(et,[["render",at],["__scopeId","data-v-74855c2d"]]),K=l=>(B("data-v-5cc6477c"),l=l(),U(),l),st=K(()=>t("h3",{class:"mt-[10px]"},"Theme",-1)),ot={class:"themes"},nt=K(()=>t("h3",{class:"mt-[10px]"},"Sidebar",-1)),it=S({__name:"Appearance",setup(l){const e=q(),s=["dynamic","light","dark"];return(p,n)=>(o(),_($,null,[st,m(I,{modelValue:f(e).ambient,"onUpdate:modelValue":n[0]||(n[0]=d=>f(e).ambient=d),disabled:!f(e).themeSupportsAmbient,label:"Ambient"},null,8,["modelValue","disabled"]),t("div",ot,[(o(),_($,null,P(s,(d,a)=>m(lt,{key:a,name:d},null,8,["name"])),64))]),nt,m(I,{modelValue:f(e).sidebar.news,"onUpdate:modelValue":n[1]||(n[1]=d=>f(e).sidebar.news=d),label:"Show 'News' Tab"},null,8,["modelValue"]),m(I,{modelValue:f(e).sidebar.sports,"onUpdate:modelValue":n[2]||(n[2]=d=>f(e).sidebar.sports=d),label:"Show 'Sports' Tab"},null,8,["modelValue"])],64))}});const ct=V(it,[["__scopeId","data-v-5cc6477c"]]),rt={class:"relative"},ut=S({__name:"Player",setup(l){const e=q();return(s,p)=>(o(),_("div",rt,[m(I,{modelValue:f(e).player.pictureInPicture,"onUpdate:modelValue":p[0]||(p[0]=n=>f(e).player.pictureInPicture=n),label:"Support Picture in Picture",sublabel:"this will slightly reduce performance"},null,8,["modelValue"]),m(F,{modelValue:f(e).player.type,"onUpdate:modelValue":p[1]||(p[1]=n=>f(e).player.type=n),options:[{value:"web",label:"Native player",icon:"horizontal_rule"},{value:"web/wave",label:"Wave player",icon:"graphic_eq"}],icon:"music_note"},null,8,["modelValue"])]))}});const dt={key:0,class:"material-symbols-rounded"},pt=["disabled","placeholder","type"],_t={__name:"PasswordInputWithIcon",props:{icon:String,placeholder:String,modelValue:String,disabled:Boolean},emits:["update:modelValue","change","submit"],setup(l,{emit:e}){const s=l,p=h(s.modelValue);j(()=>s.modelValue,y=>{p.value=y});const n=e,d=()=>{n("update:modelValue",p.value),n("change",p.value)},a=y=>{y.key==="Enter"&&n("submit",p)},c=h(!1);return(y,r)=>(o(),_("div",{class:T([{disabled:l.disabled},"text-input-with-icon rounded-3xl flex items-center px-4"])},[l.icon?(o(),_("span",dt,g(l.icon),1)):C("",!0),ae(t("input",{"onUpdate:modelValue":r[0]||(r[0]=b=>p.value=b),disabled:l.disabled,placeholder:l.placeholder,type:c.value?"text":"password",onInput:d,onKeyup:a},null,40,pt),[[le,p.value]]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:r[1]||(r[1]=b=>c.value=!c.value)},g(c.value?"visibility":"visibility_off"),1)],2))}},O=V(_t,[["__scopeId","data-v-5e026540"]]),Q="reAudioPlayer One",mt=`https://audius.co/oauth/auth?scope=read&app_name=${Q}&redirect_uri=`,vt="/audius/callback",ht=()=>{const l=encodeURIComponent(`${window.location.origin}${vt}`),e=`${mt}${l}`;window.open(e,Q,"width=500,height=800")},yt=t("summary",{class:"cursor-pointer"},"How to",-1),ft=t("p",null,[N(" 1) Head over to the "),t("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1),bt=t("p",null,"2) Create An App",-1),gt=t("p",null,"3) Enter any name and any description",-1),kt=t("p",null," 5) Copy and enter the client id and secret into the corresponding input field ",-1),wt=t("hr",{class:"my-4"},null,-1),$t=t("h5",null,"Client ID:",-1),xt=t("h5",{class:"mt-4"},"Client Secret:",-1),St=t("h3",{class:"mt-[10px]"},"Github",-1),Ct=t("h5",{class:"mt-4"},"PAT:",-1),Vt=t("h5",{class:"mt-4"},"Gist ID:",-1),Pt={class:"flex gap-4 justify-end mt-4"},It=t("h3",{class:"mt-[10px]"},"Audius",-1),At=S({__name:"Integration",setup(l){const e=h(!1),s=h({id:"",secret:""}),p=D(()=>e.value?Object.values(s.value).some(i=>i==="")?!1:s.value.id!==n.value.id||s.value.secret!==n.value.secret||e.value!==n.value.enabled:n.value.enabled),n=h({id:"",secret:"",enabled:!1});fetch("/api/config/spotify").then(async i=>{let u={id:"",secret:"",enabled:!1};if(i.status==200)u=await i.json();else if([204,401].includes(i.status))u={id:"restricted",secret:"restricted",enabled:!1};else throw new Error("Failed to fetch spotify config");n.value=u,n.value.enabled=![u.id,u.secret].includes("restricted"),e.value=n.value.enabled,s.value.id=u.id.replace("restricted",""),s.value.secret=u.secret.replace("restricted","")});const d=async()=>{if(!p.value)return;let i=s.value.id,u=s.value.secret;e.value||(u=i="restricted"),(await fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:i,secret:u})})).ok&&(n.value={id:i,secret:u,enabled:e.value})},a=h(null),c=h("");H().then(i=>{a.value=i,c.value=JSON.stringify(i)});const y=D(()=>a.value?JSON.stringify(a.value)!==c.value:!1),r=async()=>{y.value&&(await Y(a.value),c.value=JSON.stringify(a.value))},v=`http://${window.location.host}/api/spotify/callback`,A=async()=>{var i,u;(u=(i=a.value)==null?void 0:i.github)!=null&&u.githubPat&&(a.value.github.gistId||(a.value.github.gistId=await ue.search(a.value.github.githubPat),a.value.github.gistId||oe.addError("Failed to find gist","You can start syncing directly in 'Local Data' (a Gist will be created for you) or enter the gist id manually")))};return j(()=>{var i,u;return(u=(i=a.value)==null?void 0:i.github)==null?void 0:u.githubPat},A),(i,u)=>(o(),_($,null,[m(I,{modelValue:e.value,"onUpdate:modelValue":u[0]||(u[0]=k=>e.value=k),class:"h3 mb-2",label:"Spotify"},null,8,["modelValue"]),t("details",null,[yt,ft,bt,gt,t("p",null,[N(" 4) Edit the settings: set the redirect url to "),t("a",{href:v},g(v))]),kt]),wt,$t,m(O,{modelValue:s.value.id,"onUpdate:modelValue":u[1]||(u[1]=k=>s.value.id=k),disabled:!e.value,icon:"token"},null,8,["modelValue","disabled"]),xt,m(O,{modelValue:s.value.secret,"onUpdate:modelValue":u[2]||(u[2]=k=>s.value.secret=k),disabled:!e.value,icon:"lock"},null,8,["modelValue","disabled"]),m(x,{disabled:!p.value,class:"ml-auto mt-4",icon:"save",label:"Save",onClick:d},null,8,["disabled"]),St,Ct,a.value?(o(),w(O,{key:0,modelValue:a.value.github.githubPat,"onUpdate:modelValue":u[3]||(u[3]=k=>a.value.github.githubPat=k),icon:"lock"},null,8,["modelValue"])):C("",!0),Vt,a.value?(o(),w(se,{key:1,modelValue:a.value.github.gistId,"onUpdate:modelValue":u[4]||(u[4]=k=>a.value.github.gistId=k),icon:"numbers"},null,8,["modelValue"])):C("",!0),t("div",Pt,[m(x,{disabled:!a.value||!a.value.github.githubPat||!!a.value.github.gistId,icon:"search",label:"Search",onClick:A},null,8,["disabled"]),m(x,{disabled:!a.value||!y.value,icon:"save",label:"Save",onClick:r},null,8,["disabled"])]),It,m(x,{icon:"link",label:"Connect",onClick:f(ht)},null,8,["onClick"])],64))}}),Dt={class:"flex items-center gap-2"},Nt=S({__name:"Developer",setup(l){q();const e=()=>{fetch("/api/system/kill")},s=()=>{fetch("/api/system/restart/nginx")};return(p,n)=>(o(),_("div",Dt,[m(x,{icon:"refresh",label:"Restart",onClick:e,type:"danger"}),m(x,{icon:"refresh",label:"Restart Nginx",onClick:s})]))}}),Tt=l=>(B("data-v-4ad07a26"),l=l(),U(),l),Bt={class:"p-[10px] preferences"},Ut=Tt(()=>t("h1",{class:"w-full"},"Preferences",-1)),Et={class:"wrapper"},Ot={class:"sections flex flex-col"},Lt={class:"section p-2"},Gt={class:"h5 text-sm"},qt=S({__name:"index",setup(l){const e={About:ge,Privacy:He,"Local Data":Re,Integrations:At,"Cache Policy":Ze,Appearance:ct,Player:ut,Developer:Nt},s=D(()=>[{name:"General",items:["About"]},{name:"My Data",items:["Privacy","Local Data","Integrations"]},{name:"Player",items:["Player","Cache Policy"]},{name:"Appearance",items:["Appearance"]}]),p=ne(),n=ie();let d=p.query.tab;const a=h("About");return Object.keys(e).includes(d)&&(a.value=d),j(a,c=>{const y={tab:c};n.replace({query:y})}),(c,y)=>(o(),_("div",Bt,[Ut,t("div",Et,[t("div",Ot,[(o(!0),_($,null,P(s.value,r=>(o(),_("div",Lt,[t("span",Gt,g(r.name),1),(o(!0),_($,null,P(r.items,b=>(o(),w(pe,{key:b,name:b,active:a.value===b,onClick:v=>a.value=b},null,8,["name","active","onClick"]))),128))]))),256))]),m(G,{class:"content h-max p-4 pt-0"},{default:L(()=>[t("h2",null,g(a.value),1),(o(),w(ce(e[a.value])))]),_:1})])]))}});const Mt=V(qt,[["__scopeId","data-v-4ad07a26"]]);export{Mt as default};
