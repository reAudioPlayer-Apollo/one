import{e as C,z as N,l as p,A as o,S as P,T,v as j,B as q,o as t,c as a,g as k,L as E,a as n,t as b,F as i,D as d,d as v,h,i as f,_ as L}from"./index-BpNZikfW.js";const O={class:"search"},V={key:0,class:"fill-page"},D={key:1,class:"fill-page"},F={class:"top flex gap-8"},I={class:"top min-w-max"},$={key:0,class:"list songs flex-1"},z={class:"flex justify-between items-center"},J={class:"flex flex-wrap flexibleSearchResults"},M={key:0,class:"list flex-1 min-w-[40vw] artists"},Y={key:1,class:"list flex-1 min-w-[40vw] playlists"},G={key:2,class:"list flex-1 min-w-[40vw] albums"},H=C({__name:"index",setup(K){const B=N(),w=p(!0),c=p(null),m=p(!1),u=p(null),R=o(()=>{var s,e;return(e=(s=u.value)==null?void 0:s.items)==null?void 0:e[0]}),r=o(()=>{var s,e;return(e=(s=u.value)==null?void 0:s.items)==null?void 0:e.filter(l=>l.type==="song")}),y=o(()=>{var s,e;return(e=(s=u.value)==null?void 0:s.items)==null?void 0:e.filter(l=>l.type==="artist")}),g=o(()=>{var s,e;return(e=(s=u.value)==null?void 0:s.items)==null?void 0:e.filter(l=>l.type==="playlist")}),_=o(()=>{var s,e;return(e=(s=u.value)==null?void 0:s.items)==null?void 0:e.filter(l=>l.type==="album")}),x=o(()=>B.params.query),A=o(()=>[...P,...T]),S=async()=>{w.value=!0,c.value=null;const s=await fetch("/api/search",{method:"POST",body:JSON.stringify({query:x.value,scope:A.value})});if(w.value=!1,!s.ok){c.value=await s.text();return}const e=await s.json();u.value=e};return j(S),q(x,S),(s,e)=>(t(),a("div",O,[w.value?(t(),a("div",V,[k(E)])):c.value?(t(),a("div",D,[e[1]||(e[1]=n("h1",null,"Something went wrong",-1)),n("p",null,b(c.value),1)])):(t(),a(i,{key:2},[n("div",F,[n("div",I,[e[2]||(e[2]=n("h2",null,"Top Result",-1)),k(d,{item:R.value,large:""},null,8,["item"])]),r.value.length?(t(),a("div",$,[n("div",z,[e[3]||(e[3]=n("h2",null,"Songs",-1)),r.value.length>4?(t(),a("span",{key:0,class:"more cursor-pointer text-muted hover:text-primary text-sm uppercase",onClick:e[0]||(e[0]=l=>m.value=!m.value)},b(m.value?"Show less":`Show all ${r.value.length} songs`),1)):v("",!0)]),(t(!0),a(i,null,h(m.value?r.value:r.value.slice(0,4),l=>(t(),f(d,{item:l,"show-download":""},null,8,["item"]))),256))])):v("",!0)]),n("div",J,[y.value.length?(t(),a("div",M,[e[4]||(e[4]=n("h2",null,"Artists",-1)),(t(!0),a(i,null,h(y.value,l=>(t(),f(d,{item:l,"show-download":""},null,8,["item"]))),256))])):v("",!0),g.value.length?(t(),a("div",Y,[e[5]||(e[5]=n("h2",null,"Playlists",-1)),(t(!0),a(i,null,h(g.value,l=>(t(),f(d,{item:l,"show-download":""},null,8,["item"]))),256))])):v("",!0),_.value.length?(t(),a("div",G,[e[6]||(e[6]=n("h2",null,"Albums",-1)),(t(!0),a(i,null,h(_.value,l=>(t(),f(d,{item:l,"show-download":""},null,8,["item"]))),256))])):v("",!0)])],64))]))}}),U=L(H,[["__scopeId","data-v-b436b747"]]);export{U as default};
