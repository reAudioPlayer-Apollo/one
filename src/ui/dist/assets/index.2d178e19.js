import{F as m}from"./FixedPlaylistHeader.6e8358aa.js";import{a as v,P}from"./PlaylistEntry.32b7dbad.js";import{_ as S,K as x,p as k,e as n,J as I,o,c as r,g as c,x as w,z as H,a as t,t as p,F as b,i as C,f as N,k as E,l as B}from"./index.08918264.js";const F={components:{PlaylistEntry:v,FixedPlaylistHeader:m,PlaylistHeader:P},props:{src:{type:String,required:!0},id:{type:Number,required:!0}},data(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:"",store:x(),selectedSongId:-1}},watch:{currentSong(){this.updateIsPlaying()}},computed:{currentSong(){return this.store.song.id}},methods:{parseCover:k,download(e){var d;const a=(d=this.playlist)==null?void 0:d[e];window.open(`/api/tracks/${a.id}/download`)},updateIsPlaying(){console.log("Updating is playing",this.currentSong),this.playlist.forEach(e=>{e.playing=e.id==this.currentSong})},headerVisibilityChanged(e){this.fixedHeaderHidden=e},updateTracks(){fetch(this.src).then(e=>e.json()).then(e=>{this.playlist=e.songs,this.playlistName=e.name,this.updateIsPlaying()})},loadPlaylist(){fetch("/api/player/load",{method:"POST",body:JSON.stringify({type:"collection"})})}}},y=e=>(E("data-v-a0e4630d"),e=e(),B(),e),T={class:"playlist"},V={class:"padding-20"},D=y(()=>t("hr",null,null,-1)),U={class:"padding-20"},q={class:"grid"},z=y(()=>t("hr",null,null,-1)),J={class:"playlistEntries"};function O(e,a,d,j,s,l){const h=n("fixed-playlist-header"),_=n("PlaylistHeader"),u=n("PlaylistEntry"),g=I("observe-visibility");return o(),r("div",T,[c(h,{onClick:l.loadPlaylist,ref:"fixedHeading",class:w({hidden:s.fixedHeaderHidden}),title:s.playlistName},null,8,["onClick","class","title"]),H((o(),r("div",V,[t("h1",null,p(s.playlistName),1),t("h6",null,"Your "+p(s.playlist.length)+" favourite tracks, auto-generated just for you",1)])),[[g,l.headerVisibilityChanged]]),D,t("div",U,[t("span",{id:"loadPlaylist",onClick:a[0]||(a[0]=(...i)=>l.loadPlaylist&&l.loadPlaylist(...i)),class:"material-icons-outlined"},"play_circle_filled"),t("div",q,[c(_,{class:"hideIfMobile","with-more":""}),z,t("div",J,[(o(!0),r(b,null,C(s.playlist,(i,f)=>(o(),N(u,{key:i.source,index:f,song:i,"with-cover":"","with-album":"","with-more":"","playlist-id":d.id,onClick:K=>s.selectedSongId==i.id?s.selectedSongId=-1:s.selectedSongId=i.id,onUpdate:l.updateTracks,selected:s.selectedSongId==i.id},null,8,["index","song","playlist-id","onClick","onUpdate","selected"]))),128))])])])])}const A=S(F,[["render",O],["__scopeId","data-v-a0e4630d"]]);export{A as I};
