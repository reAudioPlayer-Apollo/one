import{m as T,o as b,c as f,a as t,t as m,_ as V,r as E,n as w,z as U,d as N,C as D,E as q,x as S,A as j,bI as A,g as n,w as y,b as B,u as _,F,i as M,k as O,l as W}from"./index.433ad326.js";import{I as g}from"./IconButton.cda4155f.js";const z={class:"material-symbols-rounded ms-wght-300 cursor-pointer"},H={class:"checkbox__label"},J={class:"checkbox__label__title"},K={class:"checkbox__label__sublabel italic"},L=T({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},sublabel:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(s,{emit:l}){const a=s,r=p=>l("update:modelValue",p),i=()=>r(!a.modelValue);return(p,d)=>(b(),f("div",{class:"checkbox",onClick:i},[t("span",z,m(s.modelValue?"check_box":"check_box_outline_blank"),1),t("div",H,[t("div",J,m(s.label),1),t("div",K,m(s.sublabel),1)])]))}});const k=V(L,[["__scopeId","data-v-25720abd"]]);const R={},G={class:"card"};function Q(s,l){return b(),f("div",G,[E(s.$slots,"default",{},void 0,!0)])}const x=V(R,[["render",Q],["__scopeId","data-v-ff26f2dc"]]);const X={key:0,class:"material-symbols-rounded"},Y=["type","placeholder","disabled"],Z={__name:"PasswordInputWithIcon",props:{icon:String,placeholder:String,modelValue:String,disabled:Boolean},emits:["update:modelValue","change","submit"],setup(s,{emit:l}){const a=s,r=w(a.modelValue);U(()=>a.modelValue,h=>{r.value=h});const i=()=>{l("update:modelValue",r.value),l("change",r.value)},p=h=>{h.key==="Enter"&&l("submit",r)},d=w(!1);return(h,v)=>(b(),f("div",{class:S(["text-input-with-icon rounded-3xl flex items-center px-4",{disabled:s.disabled}])},[s.icon?(b(),f("span",X,m(s.icon),1)):N("",!0),D(t("input",{type:d.value?"text":"password","onUpdate:modelValue":v[0]||(v[0]=C=>r.value=C),onInput:i,onKeyup:p,placeholder:s.placeholder,disabled:s.disabled},null,40,Y),[[q,r.value]]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:v[1]||(v[1]=C=>d.value=!d.value)},m(d.value?"visibility":"visibility_off"),1)],2))}},$=V(Z,[["__scopeId","data-v-d593805e"]]);const ee={name:"Theme",props:{name:String},methods:{selected(){return window.getCurrentTheme()==this.name},select(){window.setTheme(this.name),this.$emit("selected")}}},te=["src"];function se(s,l,a,r,i,p){return b(),f("div",{onClick:l[0]||(l[0]=(...d)=>p.select&&p.select(...d)),class:"wrapper"},[t("p",{class:S(["mb-4",{selected:p.selected()}])},m(a.name),3),t("img",{src:`/assets/img/themes/${this.name}.svg`,class:S({selected:p.selected()})},null,10,te)])}const le=V(ee,[["render",se],["__scopeId","data-v-40cb3441"]]),u=s=>(O("data-v-1c8cd6f3"),s=s(),W(),s),ae={class:"p-[10px] preferences"},oe=u(()=>t("summary",{class:"cursor-pointer"},"How to",-1)),ne=u(()=>t("p",null,[B("1) Head over to the "),t("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1)),de=u(()=>t("p",null,"2) Create An App",-1)),ie=u(()=>t("p",null,"3) Enter any name and any description",-1)),ce=u(()=>t("p",null,"5) Copy and enter the client id and secret into the corresponding input field",-1)),re=u(()=>t("hr",{class:"my-4"},null,-1)),ue=u(()=>t("h5",null,"Client ID: ",-1)),pe=u(()=>t("h5",{class:"mt-4"},"Client Secret: ",-1)),_e=u(()=>t("h2",{class:"mt-[10px]"},"Player",-1)),me=u(()=>t("h2",{class:"mt-[10px]"},"My Data",-1)),be=u(()=>t("h2",{class:"mt-[10px]"},"Theme",-1)),fe={class:"themes"},he=u(()=>t("h2",{class:"mt-[10px]"},"Sidebar",-1)),ve=T({__name:"index",setup(s){const l=w(!1),a=w({id:"",secret:""}),r=j(()=>l.value?Object.values(a.value).some(c=>c==="")?!1:a.value.id!==i.value.id||a.value.secret!==i.value.secret||l.value!==i.value.enabled:i.value.enabled),i=w({id:"",secret:"",enabled:!1});fetch("/api/config/spotify").then(async c=>{let e={id:"",secret:"",enabled:!1};if(c.status==200)e=await c.json();else if([204,401].includes(c.status))e={id:"restricted",secret:"restricted",enabled:!1};else throw new Error("Failed to fetch spotify config");i.value=e,i.value.enabled=![e.id,e.secret].includes("restricted"),l.value=i.value.enabled,a.value.id=e.id.replace("restricted",""),a.value.secret=e.secret.replace("restricted","")});const p=async()=>{if(!r.value)return;let c=a.value.id,e=a.value.secret;l.value||(e=c="restricted"),(await fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:c,secret:e})})).ok&&(i.value={id:c,secret:e,enabled:l.value})},d=A(),h=["dynamic","light","dark"],v=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},I=`http://${window.location.host}/api/spotify/callback`;return(c,e)=>(b(),f("div",ae,[n(x,{class:"p-4 pt-0"},{default:y(()=>[n(k,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),label:"Spotify",class:"h2 mb-2"},null,8,["modelValue"]),t("details",null,[oe,ne,de,ie,t("p",null,[B("4) Edit the settings: set the redirect url to "),t("a",{href:I},m(I))]),ce]),re,ue,n($,{modelValue:a.value.id,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.id=o),disabled:!l.value,icon:"token"},null,8,["modelValue","disabled"]),pe,n($,{modelValue:a.value.secret,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.secret=o),disabled:!l.value,icon:"lock"},null,8,["modelValue","disabled"]),n(g,{icon:"save",label:"Save",class:"ml-auto mt-4",disabled:!_(r),onClick:p},null,8,["disabled"])]),_:1}),n(x,{class:"p-4 pt-0"},{default:y(()=>[_e,n(k,{modelValue:_(d).player.pictureInPicture,"onUpdate:modelValue":e[3]||(e[3]=o=>_(d).player.pictureInPicture=o),label:"Support Picture in Picture",sublabel:"this will slightly reduce performance"},null,8,["modelValue"])]),_:1}),n(x,{class:"p-4 pt-0"},{default:y(()=>[me,n(g,{icon:"backup",label:"Back up database",class:"mx-auto mt-4",onClick:e[4]||(e[4]=o=>c.$router.push("/export"))}),n(g,{icon:"cloud_download",label:"Import database",class:"mx-auto mt-4",onClick:e[5]||(e[5]=o=>c.$router.push("/import"))}),n(g,{icon:"delete",label:"Clean browser settings",class:"mx-auto mt-4",onClick:v}),n(g,{icon:"folder",label:"Manage files",class:"mx-auto mt-4",onClick:e[6]||(e[6]=o=>c.$router.push("/preferences/my-data"))})]),_:1}),n(x,{class:"p-4 pt-0"},{default:y(()=>[be,t("div",fe,[(b(),f(F,null,M(h,(o,P)=>n(le,{key:P,name:o},null,8,["name"])),64))])]),_:1}),n(x,{class:"p-4 pt-0"},{default:y(()=>[he,n(k,{modelValue:_(d).sidebar.news,"onUpdate:modelValue":e[7]||(e[7]=o=>_(d).sidebar.news=o),label:"Show 'News' Tab"},null,8,["modelValue"]),n(k,{modelValue:_(d).sidebar.sports,"onUpdate:modelValue":e[8]||(e[8]=o=>_(d).sidebar.sports=o),label:"Show 'Sports' Tab"},null,8,["modelValue"])]),_:1})]))}});const xe=V(ve,[["__scopeId","data-v-1c8cd6f3"]]);export{xe as default};
