import{m as P,o as b,c as v,a as t,t as _,_ as x,r as D,n as V,D as U,d as E,y as N,z as q,C as S,E as W,bP as j,g as n,w as y,b as T,u as m,F,i as M,k as O,l as z}from"./index.287edd0f.js";import{I as g,D as A}from"./Dropdown.1957d047.js";const H={class:"material-symbols-rounded ms-wght-300 cursor-pointer"},J={class:"checkbox__label"},K={class:"checkbox__label__title"},L={class:"checkbox__label__sublabel italic"},R=P({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},sublabel:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(l,{emit:s}){const o=l,c=p=>s("update:modelValue",p),i=()=>c(!o.modelValue);return(p,d)=>(b(),v("div",{class:"checkbox",onClick:i},[t("span",H,_(l.modelValue?"check_box":"check_box_outline_blank"),1),t("div",J,[t("div",K,_(l.label),1),t("div",L,_(l.sublabel),1)])]))}});const k=x(R,[["__scopeId","data-v-25720abd"]]);const G={},Q={class:"card"};function X(l,s){return b(),v("div",Q,[D(l.$slots,"default",{},void 0,!0)])}const w=x(G,[["render",X],["__scopeId","data-v-ff26f2dc"]]);const Y={key:0,class:"material-symbols-rounded"},Z=["type","placeholder","disabled"],ee={__name:"PasswordInputWithIcon",props:{icon:String,placeholder:String,modelValue:String,disabled:Boolean},emits:["update:modelValue","change","submit"],setup(l,{emit:s}){const o=l,c=V(o.modelValue);U(()=>o.modelValue,f=>{c.value=f});const i=()=>{s("update:modelValue",c.value),s("change",c.value)},p=f=>{f.key==="Enter"&&s("submit",c)},d=V(!1);return(f,h)=>(b(),v("div",{class:S(["text-input-with-icon rounded-3xl flex items-center px-4",{disabled:l.disabled}])},[l.icon?(b(),v("span",Y,_(l.icon),1)):E("",!0),N(t("input",{type:d.value?"text":"password","onUpdate:modelValue":h[0]||(h[0]=C=>c.value=C),onInput:i,onKeyup:p,placeholder:l.placeholder,disabled:l.disabled},null,40,Z),[[q,c.value]]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:h[1]||(h[1]=C=>d.value=!d.value)},_(d.value?"visibility":"visibility_off"),1)],2))}},I=x(ee,[["__scopeId","data-v-d593805e"]]);const te={name:"Theme",props:{name:String},methods:{selected(){return window.getCurrentTheme()==this.name},select(){window.setTheme(this.name),this.$emit("selected")}}},le=["src"];function se(l,s,o,c,i,p){return b(),v("div",{onClick:s[0]||(s[0]=(...d)=>p.select&&p.select(...d)),class:"wrapper"},[t("p",{class:S(["mb-4",{selected:p.selected()}])},_(o.name),3),t("img",{src:`/assets/img/themes/${this.name}.svg`,class:S({selected:p.selected()})},null,10,le)])}const ae=x(te,[["render",se],["__scopeId","data-v-40cb3441"]]),u=l=>(O("data-v-bc7e5e76"),l=l(),z(),l),oe={class:"p-[10px] preferences"},ne=u(()=>t("summary",{class:"cursor-pointer"},"How to",-1)),de=u(()=>t("p",null,[T("1) Head over to the "),t("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1)),ie=u(()=>t("p",null,"2) Create An App",-1)),re=u(()=>t("p",null,"3) Enter any name and any description",-1)),ce=u(()=>t("p",null,"5) Copy and enter the client id and secret into the corresponding input field",-1)),ue=u(()=>t("hr",{class:"my-4"},null,-1)),pe=u(()=>t("h5",null,"Client ID: ",-1)),me=u(()=>t("h5",{class:"mt-4"},"Client Secret: ",-1)),_e=u(()=>t("h2",{class:"mt-[10px]"},"Player",-1)),be=u(()=>t("h2",{class:"mt-[10px]"},"My Data",-1)),ve=u(()=>t("h2",{class:"mt-[10px]"},"Theme",-1)),fe={class:"themes"},he=u(()=>t("h2",{class:"mt-[10px]"},"Sidebar",-1)),ye=P({__name:"index",setup(l){const s=V(!1),o=V({id:"",secret:""}),c=W(()=>s.value?Object.values(o.value).some(r=>r==="")?!1:o.value.id!==i.value.id||o.value.secret!==i.value.secret||s.value!==i.value.enabled:i.value.enabled),i=V({id:"",secret:"",enabled:!1});fetch("/api/config/spotify").then(async r=>{let e={id:"",secret:"",enabled:!1};if(r.status==200)e=await r.json();else if([204,401].includes(r.status))e={id:"restricted",secret:"restricted",enabled:!1};else throw new Error("Failed to fetch spotify config");i.value=e,i.value.enabled=![e.id,e.secret].includes("restricted"),s.value=i.value.enabled,o.value.id=e.id.replace("restricted",""),o.value.secret=e.secret.replace("restricted","")});const p=async()=>{if(!c.value)return;let r=o.value.id,e=o.value.secret;s.value||(e=r="restricted"),(await fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:r,secret:e})})).ok&&(i.value={id:r,secret:e,enabled:s.value})},d=j(),f=["dynamic","light","dark"],h=()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},$=`http://${window.location.host}/api/spotify/callback`;return(r,e)=>(b(),v("div",oe,[n(w,{class:"p-4 pt-0"},{default:y(()=>[n(k,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),class:"h2 mb-2",label:"Spotify"},null,8,["modelValue"]),t("details",null,[ne,de,ie,re,t("p",null,[T("4) Edit the settings: set the redirect url to "),t("a",{href:$},_($))]),ce]),ue,pe,n(I,{modelValue:o.value.id,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.id=a),disabled:!s.value,icon:"token"},null,8,["modelValue","disabled"]),me,n(I,{modelValue:o.value.secret,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.secret=a),disabled:!s.value,icon:"lock"},null,8,["modelValue","disabled"]),n(g,{disabled:!m(c),class:"ml-auto mt-4",icon:"save",label:"Save",onClick:p},null,8,["disabled"])]),_:1}),n(w,{class:"p-4 pt-0"},{default:y(()=>[_e,n(k,{modelValue:m(d).player.pictureInPicture,"onUpdate:modelValue":e[3]||(e[3]=a=>m(d).player.pictureInPicture=a),label:"Support Picture in Picture",sublabel:"this will slightly reduce performance"},null,8,["modelValue"]),n(A,{modelValue:m(d).player.type,"onUpdate:modelValue":e[4]||(e[4]=a=>m(d).player.type=a),options:[{value:"web",label:"Native Player"},{value:"web/wave",label:"Wave Player"}]},null,8,["modelValue"])]),_:1}),n(w,{class:"p-4 pt-0"},{default:y(()=>[be,n(g,{class:"mx-auto mt-4",icon:"backup",label:"Back up database",onClick:e[5]||(e[5]=a=>r.$router.push("/export"))}),n(g,{class:"mx-auto mt-4",icon:"cloud_download",label:"Import database",onClick:e[6]||(e[6]=a=>r.$router.push("/import"))}),n(g,{class:"mx-auto mt-4",icon:"delete",label:"Clean browser settings",onClick:h}),n(g,{class:"mx-auto mt-4",icon:"folder",label:"Manage files",onClick:e[7]||(e[7]=a=>r.$router.push("/preferences/my-data"))})]),_:1}),n(w,{class:"p-4 pt-0"},{default:y(()=>[ve,t("div",fe,[(b(),v(F,null,M(f,(a,B)=>n(ae,{key:B,name:a},null,8,["name"])),64))])]),_:1}),n(w,{class:"p-4 pt-0"},{default:y(()=>[he,n(k,{modelValue:m(d).sidebar.news,"onUpdate:modelValue":e[8]||(e[8]=a=>m(d).sidebar.news=a),label:"Show 'News' Tab"},null,8,["modelValue"]),n(k,{modelValue:m(d).sidebar.sports,"onUpdate:modelValue":e[9]||(e[9]=a=>m(d).sidebar.sports=a),label:"Show 'Sports' Tab"},null,8,["modelValue"])]),_:1})]))}});const Ve=x(ye,[["__scopeId","data-v-bc7e5e76"]]);export{Ve as default};
