import{F as p,G as u}from"./FixedPlaylistHeader.053f8c8e.js";import{P as y}from"./PlaylistEntry.e502e1c4.js";import{_ as f,A as v,y as m,e as P,q as b,o as e,c as o,g as d,m as k,s as w,w as S,b as I,a as t,t as c,F as H,j as C,f as N,p as D,i as T}from"./index.12dec214.js";const h=s=>(D("data-v-87472f14"),s=s(),T(),s),V={class:"playlist"},q={class:"padding-20"},x=h(()=>t("hr",null,null,-1)),B={class:"padding-20"},E={class:"grid"},F=h(()=>t("hr",null,null,-1)),j={class:"playlistEntries"},O={components:{PlaylistEntry:y,FixedPlaylistHeader:p,GridHeader:u},props:{src:{type:String,required:!0}},data(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:""}},watch:{currentSong(){this.updateIsPlaying()}},methods:{download(s){var a;const l=(a=this.playlist)==null?void 0:a[s];window.open(`/api/tracks/${l.id}/download`)},updateIsPlaying(){console.log("Updating is playing",this.currentSong),this.playlist.forEach(s=>{s.playing=s.id==this.currentSong})},headerVisibilityChanged(s){this.fixedHeaderHidden=s},updateTracks(){fetch(this.src).then(s=>s.json()).then(s=>{this.playlist=s.songs,this.playlistName=s.name,this.updateIsPlaying()})},loadPlaylist(){fetch("/api/player/load",{method:"POST",body:JSON.stringify({type:"collection"})})}}},U=Object.assign(O,{__name:"index",setup(s){const l=v();return m(()=>l.song.id),(a,n)=>{const _=P("h7"),g=b("observe-visibility");return e(),o("div",V,[d(p,{onClick:a.loadPlaylist,ref:"fixedHeading",class:k({hidden:a.fixedHeaderHidden}),title:a.playlistName},null,8,["onClick","class","title"]),w((e(),o("div",q,[d(_,null,{default:S(()=>[I("Playlist")]),_:1}),t("h1",null,c(a.playlistName),1),t("h5",null,"Your "+c(a.playlist.length)+" favourite tracks, auto-generated just for you",1)])),[[g,a.headerVisibilityChanged]]),x,t("div",B,[t("span",{id:"loadPlaylist",onClick:n[0]||(n[0]=(...i)=>a.loadPlaylist&&a.loadPlaylist(...i)),class:"material-icons-outlined"},"play_circle_filled"),t("div",E,[d(u,{class:"hideIfMobile"}),F,t("div",j,[(e(!0),o(H,null,C(a.playlist,(i,r)=>(e(),N(y,{key:r,index:r,source:i.source,id:i.id,title:i.title,playing:i.playing,album:i.album,artist:i.artist,cover:i.cover,favourite:i.favourite,duration:i.duration,onDownload:a.download,onRequestUpdate:a.updateTracks},null,8,["index","source","id","title","playing","album","artist","cover","favourite","duration","onDownload","onRequestUpdate"]))),128))])])])])}}}),A=f(U,[["__scopeId","data-v-87472f14"]]);export{A as I};
