import{m as S,o as h,c as v,a as t,t as m,_ as y,r as $,n as b,z as T,d as P,B,D as U,x as w,A as E,bI as N,g as r,w as g,b as C,u as _,F as D,i as q,k as j,l as A}from"./index.bb9dc178.js";import{I as F}from"./IconButton.9370390e.js";const O={class:"material-symbols-rounded ms-wght-300 cursor-pointer"},W={class:"checkbox__label"},z={class:"checkbox__label__title"},H={class:"checkbox__label__sublabel italic"},R=S({__name:"Checkbox",props:{modelValue:{type:Boolean,required:!0},label:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1},sublabel:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(s,{emit:l}){const a=s,c=u=>l("update:modelValue",u),i=()=>c(!a.modelValue);return(u,n)=>(h(),v("div",{class:"checkbox",onClick:i},[t("span",O,m(s.modelValue?"check_box":"check_box_outline_blank"),1),t("div",W,[t("div",z,m(s.label),1),t("div",H,m(s.sublabel),1)])]))}});const V=y(R,[["__scopeId","data-v-4ec904cc"]]);const J={},K={class:"card"};function L(s,l){return h(),v("div",K,[$(s.$slots,"default",{},void 0,!0)])}const x=y(J,[["render",L],["__scopeId","data-v-586525e7"]]);const M={key:0,class:"material-symbols-rounded"},G=["type","placeholder","disabled"],Q={__name:"PasswordInputWithIcon",props:{icon:String,placeholder:String,modelValue:String,disabled:Boolean},emits:["update:modelValue","change","submit"],setup(s,{emit:l}){const a=s,c=b(a.modelValue);T(()=>a.modelValue,f=>{c.value=f});const i=()=>{l("update:modelValue",c.value),l("change",c.value)},u=f=>{f.key==="Enter"&&l("submit",c)},n=b(!1);return(f,o)=>(h(),v("div",{class:w(["text-input-with-icon rounded-3xl flex items-center px-4",{disabled:s.disabled}])},[s.icon?(h(),v("span",M,m(s.icon),1)):P("",!0),B(t("input",{type:n.value?"text":"password","onUpdate:modelValue":o[0]||(o[0]=e=>c.value=e),onInput:i,onKeyup:u,placeholder:s.placeholder,disabled:s.disabled},null,40,G),[[U,c.value]]),t("span",{class:"material-symbols-rounded cursor-pointer",onClick:o[1]||(o[1]=e=>n.value=!n.value)},m(n.value?"visibility":"visibility_off"),1)],2))}},k=y(Q,[["__scopeId","data-v-59eb4366"]]);const X={name:"Theme",props:{name:String},methods:{selected(){return window.getCurrentTheme()==this.name},select(){window.setTheme(this.name),this.$emit("selected")}}},Y=["src"];function Z(s,l,a,c,i,u){return h(),v("div",{onClick:l[0]||(l[0]=(...n)=>u.select&&u.select(...n)),class:"wrapper"},[t("p",{class:w({selected:u.selected()})},m(a.name),3),t("img",{src:`/assets/img/themes/${this.name}.svg`,class:w({selected:u.selected()})},null,10,Y)])}const ee=y(X,[["render",Z],["__scopeId","data-v-0f8ac1ca"]]),p=s=>(j("data-v-aa966c3a"),s=s(),A(),s),te={class:"p-[10px] preferences"},se=p(()=>t("summary",{class:"cursor-pointer"},"How to",-1)),le=p(()=>t("p",null,[C("1) Head over to the "),t("a",{href:"https://developer.spotify.com/dashboard/applications",target:"_blank"},"spotify developer dashboard")],-1)),ae=p(()=>t("p",null,"2) Create An App",-1)),oe=p(()=>t("p",null,"3) Enter any name and any description",-1)),ne=["href"],de=p(()=>t("p",null,"5) Copy and enter the client id and secret into the corresponding input field",-1)),ie=p(()=>t("hr",{class:"my-4"},null,-1)),ce=p(()=>t("h5",null,"Client ID: ",-1)),re=p(()=>t("h5",{class:"mt-4"},"Client Secret: ",-1)),ue=p(()=>t("h2",{class:"mt-[10px]"},"Player",-1)),pe=p(()=>t("h2",{class:"mt-[10px]"},"Sidebar",-1)),_e=p(()=>t("h2",{class:"mt-[10px]"},"Theme",-1)),me={class:"themes"},he=S({__name:"index",setup(s){const l=b(!1),a=b({id:"",secret:""}),c=E(()=>l.value?Object.values(a.value).some(o=>o==="")?!1:a.value.id!==i.value.id||a.value.secret!==i.value.secret||l.value!==i.value.enabled:i.value.enabled),i=b({id:"",secret:"",enabled:!1});fetch("/api/config/spotify").then(async o=>{let e={id:"",secret:"",enabled:!1};if(o.status==200)e=await o.json();else if([204,401].includes(o.status))e={id:"restricted",secret:"restricted",enabled:!1};else throw new Error("Failed to fetch spotify config");i.value=e,i.value.enabled=![e.id,e.secret].includes("restricted"),l.value=i.value.enabled,a.value.id=e.id.replace("restricted",""),a.value.secret=e.secret.replace("restricted","")});const u=async()=>{if(!c.value)return;let o=a.value.id,e=a.value.secret;l.value||(e=o="restricted"),(await fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:o,secret:e})})).ok&&(i.value={id:o,secret:e,enabled:l.value})},n=N(),f=["dynamic","light","dark"];return(o,e)=>(h(),v("div",te,[r(x,{class:"p-4 pt-0"},{default:g(()=>[r(V,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=d=>l.value=d),label:"Spotify",class:"h2 mb-2"},null,8,["modelValue"]),t("details",null,[se,le,ae,oe,t("p",null,[C("4) Edit the settings: set the redirect url to "),t("a",{href:o.spotifyRedirect},m(o.spotifyRedirect),9,ne)]),de]),ie,ce,r(k,{modelValue:a.value.id,"onUpdate:modelValue":e[1]||(e[1]=d=>a.value.id=d),disabled:!l.value,icon:"token"},null,8,["modelValue","disabled"]),re,r(k,{modelValue:a.value.secret,"onUpdate:modelValue":e[2]||(e[2]=d=>a.value.secret=d),disabled:!l.value,icon:"lock"},null,8,["modelValue","disabled"]),r(F,{icon:"save",label:"Save",class:"ml-auto mt-4",disabled:!_(c),onClick:u},null,8,["disabled"])]),_:1}),r(x,{class:"p-4 pt-0"},{default:g(()=>[ue,r(V,{modelValue:_(n).player.pictureInPicture,"onUpdate:modelValue":e[3]||(e[3]=d=>_(n).player.pictureInPicture=d),label:"Support Picture in Picture",sublabel:"this will slightly reduce performance"},null,8,["modelValue"])]),_:1}),r(x,{class:"p-4 pt-0"},{default:g(()=>[pe,r(V,{modelValue:_(n).sidebar.news,"onUpdate:modelValue":e[4]||(e[4]=d=>_(n).sidebar.news=d),label:"Show 'News' Tab"},null,8,["modelValue"]),r(V,{modelValue:_(n).sidebar.sports,"onUpdate:modelValue":e[5]||(e[5]=d=>_(n).sidebar.sports=d),label:"Show 'Sports' Tab"},null,8,["modelValue"])]),_:1}),r(x,{class:"p-4 pt-0"},{default:g(()=>[_e,t("div",me,[(h(),v(D,null,q(f,(d,I)=>r(ee,{key:I,name:d},null,8,["name"])),64))])]),_:1})]))}});const be=y(he,[["__scopeId","data-v-aa966c3a"]]);export{be as default};
