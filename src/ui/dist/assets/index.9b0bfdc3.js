import{F as m,G as x}from"./FixedPlaylistHeader.36620c28.js";import{P}from"./PlaylistEntry.9ab6a996.js";import{_ as k,J as b,i as w,e as o,I as S,o as r,c as n,g as c,n as I,B as C,w as H,b as N,a as s,t as u,F as B,h as D,f as T,k as V,l as E}from"./index.2f8d843b.js";const F={components:{PlaylistEntry:P,FixedPlaylistHeader:m,GridHeader:x},props:{src:{type:String,required:!0}},data(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:"",store:b()}},watch:{currentSong(){this.updateIsPlaying()}},computed:{currentSong(){return this.store.song.id}},methods:{parseCover:w,download(e){var d;const l=(d=this.playlist)==null?void 0:d[e];window.open(`/api/tracks/${l.id}/download`)},updateIsPlaying(){console.log("Updating is playing",this.currentSong),this.playlist.forEach(e=>{e.playing=e.id==this.currentSong})},headerVisibilityChanged(e){this.fixedHeaderHidden=e},updateTracks(){fetch(this.src).then(e=>e.json()).then(e=>{this.playlist=e.songs,this.playlistName=e.name,this.updateIsPlaying()})},loadPlaylist(){fetch("/api/player/load",{method:"POST",body:JSON.stringify({type:"collection"})})}}},y=e=>(V("data-v-4c449e54"),e=e(),E(),e),q={class:"playlist"},U={class:"padding-20"},G=y(()=>s("hr",null,null,-1)),J={class:"padding-20"},O={class:"grid"},R=y(()=>s("hr",null,null,-1)),j={class:"playlistEntries"};function z(e,l,d,L,a,i){const _=o("fixed-playlist-header"),h=o("h7"),g=o("grid-header"),f=o("playlist-entry"),v=S("observe-visibility");return r(),n("div",q,[c(_,{onClick:i.loadPlaylist,ref:"fixedHeading",class:I({hidden:a.fixedHeaderHidden}),title:a.playlistName},null,8,["onClick","class","title"]),C((r(),n("div",U,[c(h,null,{default:H(()=>[N("Playlist")]),_:1}),s("h1",null,u(a.playlistName),1),s("h5",null,"Your "+u(a.playlist.length)+" favourite tracks, auto-generated just for you",1)])),[[v,i.headerVisibilityChanged]]),G,s("div",J,[s("span",{id:"loadPlaylist",onClick:l[0]||(l[0]=(...t)=>i.loadPlaylist&&i.loadPlaylist(...t)),class:"material-icons-outlined"},"play_circle_filled"),s("div",O,[c(g,{class:"hideIfMobile"}),R,s("div",j,[(r(!0),n(B,null,D(a.playlist,(t,p)=>(r(),T(f,{key:p,index:p,source:t.source,id:t.id,title:t.title,playing:t.playing,album:t.album,artist:t.artist,cover:i.parseCover(t.cover),favourite:t.favourite,duration:t.duration,onDownload:i.download,onRequestUpdate:i.updateTracks},null,8,["index","source","id","title","playing","album","artist","cover","favourite","duration","onDownload","onRequestUpdate"]))),128))])])])])}const K=k(F,[["render",z],["__scopeId","data-v-4c449e54"]]);export{K as I};
