import{F as v}from"./FixedPlaylistHeader.25f2b10c.js";import{a as P,P as x}from"./PlaylistEntry.57562802.js";import{_ as S,J as I,i as k,e as d,I as w,o as n,c as r,g as c,n as b,B as C,w as H,b as N,a as t,t as p,F as E,h as B,f as T,k as V,l as F}from"./index.a83ce700.js";const D={components:{PlaylistEntry:P,FixedPlaylistHeader:v,PlaylistHeader:x},props:{src:{type:String,required:!0},id:{type:Number,required:!0}},data(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:"",store:I(),selectedSongId:-1}},watch:{currentSong(){this.updateIsPlaying()}},computed:{currentSong(){return this.store.song.id}},methods:{parseCover:k,download(e){var o;const a=(o=this.playlist)==null?void 0:o[e];window.open(`/api/tracks/${a.id}/download`)},updateIsPlaying(){console.log("Updating is playing",this.currentSong),this.playlist.forEach(e=>{e.playing=e.id==this.currentSong})},headerVisibilityChanged(e){this.fixedHeaderHidden=e},updateTracks(){fetch(this.src).then(e=>e.json()).then(e=>{this.playlist=e.songs,this.playlistName=e.name,this.updateIsPlaying()})},loadPlaylist(){fetch("/api/player/load",{method:"POST",body:JSON.stringify({type:"collection"})})}}},y=e=>(V("data-v-acd45828"),e=e(),F(),e),U={class:"playlist"},q={class:"padding-20"},J=y(()=>t("hr",null,null,-1)),O={class:"padding-20"},j={class:"grid"},z=y(()=>t("hr",null,null,-1)),L={class:"playlistEntries"};function M(e,a,o,Y,s,l){const h=d("fixed-playlist-header"),_=d("h7"),u=d("PlaylistHeader"),g=d("PlaylistEntry"),f=w("observe-visibility");return n(),r("div",U,[c(h,{onClick:l.loadPlaylist,ref:"fixedHeading",class:b({hidden:s.fixedHeaderHidden}),title:s.playlistName},null,8,["onClick","class","title"]),C((n(),r("div",q,[c(_,null,{default:H(()=>[N("Playlist")]),_:1}),t("h1",null,p(s.playlistName),1),t("h5",null,"Your "+p(s.playlist.length)+" favourite tracks, auto-generated just for you",1)])),[[f,l.headerVisibilityChanged]]),J,t("div",O,[t("span",{id:"loadPlaylist",onClick:a[0]||(a[0]=(...i)=>l.loadPlaylist&&l.loadPlaylist(...i)),class:"material-icons-outlined"},"play_circle_filled"),t("div",j,[c(u,{class:"hideIfMobile","with-more":""}),z,t("div",L,[(n(!0),r(E,null,B(s.playlist,(i,m)=>(n(),T(g,{key:i.source,index:m,song:i,"with-cover":"","with-album":"","with-more":"","playlist-id":o.id,onClick:A=>s.selectedSongId==i.id?s.selectedSongId=-1:s.selectedSongId=i.id,onUpdate:l.updateTracks,selected:s.selectedSongId==i.id},null,8,["index","song","playlist-id","onClick","onUpdate","selected"]))),128))])])])])}const R=S(D,[["render",M],["__scopeId","data-v-acd45828"]]);export{R as I};
