import{F as f}from"./FixedPlaylistHeader.0e41f7ce.js";import{P as v}from"./PlaylistEntry.5d3b3905.js";import{P}from"./song.d5ee386f.js";import{_ as S,J as I,p as k,e as n,I as x,o as d,c as r,g as c,C as w,y as C,a as t,t as p,F as H,i as b,f as N,k as E,l as B}from"./index.458fd4ed.js";const F={components:{PlaylistEntry:v,FixedPlaylistHeader:f,PlaylistHeader:P},props:{src:{type:String,required:!0},id:{type:Number,required:!0}},data(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:"",store:I(),selectedSongId:-1}},watch:{currentSong(){this.updateIsPlaying()}},computed:{currentSong(){return this.store.song.id}},methods:{parseCover:k,download(e){var o;const a=(o=this.playlist)==null?void 0:o[e];window.open(`/api/tracks/${a.id}/download`)},updateIsPlaying(){console.log("Updating is playing",this.currentSong),this.playlist.forEach(e=>{e.playing=e.id==this.currentSong})},headerVisibilityChanged(e){this.fixedHeaderHidden=e},updateTracks(){fetch(this.src).then(e=>e.json()).then(e=>{this.playlist=e.songs,this.playlistName=e.name,this.updateIsPlaying()})},loadPlaylist(){fetch("/api/player/load",{method:"POST",body:JSON.stringify({type:"collection"})})}}},y=e=>(E("data-v-58c88e23"),e=e(),B(),e),T={class:"playlist"},V={class:"padding-20"},D=y(()=>t("hr",null,null,-1)),U={class:"padding-20"},q={class:"grid"},J=y(()=>t("hr",null,null,-1)),O={class:"playlistEntries"};function j(e,a,o,z,s,l){const h=n("fixed-playlist-header"),_=n("PlaylistHeader"),u=n("PlaylistEntry"),g=x("observe-visibility");return d(),r("div",T,[c(h,{onClick:l.loadPlaylist,ref:"fixedHeading",class:w({hidden:s.fixedHeaderHidden}),title:s.playlistName},null,8,["onClick","class","title"]),C((d(),r("div",V,[t("h1",null,p(s.playlistName),1),t("h6",null,"Your "+p(s.playlist.length)+" favourite tracks, auto-generated just for you",1)])),[[g,l.headerVisibilityChanged]]),D,t("div",U,[t("span",{id:"loadPlaylist",onClick:a[0]||(a[0]=(...i)=>l.loadPlaylist&&l.loadPlaylist(...i)),class:"material-icons-outlined"},"play_circle_filled"),t("div",q,[c(_,{class:"hideIfMobile","with-more":""}),J,t("div",O,[(d(!0),r(H,null,b(s.playlist,(i,m)=>(d(),N(u,{key:i.source,index:m,song:i,"with-cover":"","with-album":"","with-more":"","playlist-id":o.id,onClick:L=>s.selectedSongId==i.id?s.selectedSongId=-1:s.selectedSongId=i.id,onUpdate:l.updateTracks,selected:s.selectedSongId==i.id},null,8,["index","song","playlist-id","onClick","onUpdate","selected"]))),128))])])])])}const K=S(F,[["render",j],["__scopeId","data-v-58c88e23"]]);export{K as I};
