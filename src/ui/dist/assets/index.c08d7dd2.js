import{F as m,G as x}from"./FixedPlaylistHeader.82bdcd10.js";import{P}from"./PlaylistEntry.0ffd60ba.js";import{_ as b,A as k,e as o,q as w,o as r,c as n,g as c,m as S,s as I,w as H,b as C,a as s,t as u,F as N,j as D,f as T,p as V,i as q}from"./index.c601bd9b.js";const B={components:{PlaylistEntry:P,FixedPlaylistHeader:m,GridHeader:x},props:{src:{type:String,required:!0}},data(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:"",store:k()}},watch:{currentSong(){this.updateIsPlaying()}},computed:{currentSong(){return this.store.song.id}},methods:{download(e){var d;const l=(d=this.playlist)==null?void 0:d[e];window.open(`/api/tracks/${l.id}/download`)},updateIsPlaying(){console.log("Updating is playing",this.currentSong),this.playlist.forEach(e=>{e.playing=e.id==this.currentSong})},headerVisibilityChanged(e){this.fixedHeaderHidden=e},updateTracks(){fetch(this.src).then(e=>e.json()).then(e=>{this.playlist=e.songs,this.playlistName=e.name,this.updateIsPlaying()})},loadPlaylist(){fetch("/api/player/load",{method:"POST",body:JSON.stringify({type:"collection"})})}}},y=e=>(V("data-v-c40e36ee"),e=e(),q(),e),E={class:"playlist"},F={class:"padding-20"},U=y(()=>s("hr",null,null,-1)),j={class:"padding-20"},G={class:"grid"},O=y(()=>s("hr",null,null,-1)),R={class:"playlistEntries"};function z(e,l,d,A,a,i){const _=o("fixed-playlist-header"),h=o("h7"),g=o("grid-header"),f=o("playlist-entry"),v=w("observe-visibility");return r(),n("div",E,[c(_,{onClick:i.loadPlaylist,ref:"fixedHeading",class:S({hidden:a.fixedHeaderHidden}),title:a.playlistName},null,8,["onClick","class","title"]),I((r(),n("div",F,[c(h,null,{default:H(()=>[C("Playlist")]),_:1}),s("h1",null,u(a.playlistName),1),s("h5",null,"Your "+u(a.playlist.length)+" favourite tracks, auto-generated just for you",1)])),[[v,i.headerVisibilityChanged]]),U,s("div",j,[s("span",{id:"loadPlaylist",onClick:l[0]||(l[0]=(...t)=>i.loadPlaylist&&i.loadPlaylist(...t)),class:"material-icons-outlined"},"play_circle_filled"),s("div",G,[c(g,{class:"hideIfMobile"}),O,s("div",R,[(r(!0),n(N,null,D(a.playlist,(t,p)=>(r(),T(f,{key:p,index:p,source:t.source,id:t.id,title:t.title,playing:t.playing,album:t.album,artist:t.artist,cover:t.cover,favourite:t.favourite,duration:t.duration,onDownload:i.download,onRequestUpdate:i.updateTracks},null,8,["index","source","id","title","playing","album","artist","cover","favourite","duration","onDownload","onRequestUpdate"]))),128))])])])])}const Y=b(B,[["render",z],["__scopeId","data-v-c40e36ee"]]);export{Y as I};
