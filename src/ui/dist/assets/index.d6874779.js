import{F as m,G as x}from"./FixedPlaylistHeader.abe43921.js";import{P as k}from"./PlaylistEntry.0db7c782.js";import{s as P,_ as b,e as o,l as w,o as d,c as n,g as c,k as S,m as I,w as H,b as C,a,t as u,F as N,i as D,f as T,p as V,h as B}from"./index.9ff56939.js";const E={components:{PlaylistEntry:k,FixedPlaylistHeader:m,GridHeader:x},props:{src:{type:String,required:!0}},data(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:""}},computed:P("player",{currentSong:t=>t.song.id}),watch:{currentSong(){this.updateIsPlaying()}},methods:{download(t){var r;const l=(r=this.playlist)==null?void 0:r[t];window.open(`/api/tracks/${l.id}/download`)},updateIsPlaying(){console.log("Updating is playing",this.currentSong),this.playlist.forEach(t=>{t.playing=t.id==this.currentSong})},headerVisibilityChanged(t){this.fixedHeaderHidden=t},updateTracks(){fetch(this.src).then(t=>t.json()).then(t=>{this.playlist=t.songs,this.playlistName=t.name,this.updateIsPlaying()})},loadPlaylist(){fetch("/api/player/load",{method:"POST",body:JSON.stringify({type:"collection"})})}}},y=t=>(V("data-v-d46608fa"),t=t(),B(),t),F={class:"playlist"},q={class:"padding-20"},U=y(()=>a("hr",null,null,-1)),G={class:"padding-20"},O={class:"grid"},R=y(()=>a("hr",null,null,-1)),j={class:"playlistEntries"};function z(t,l,r,J,i,s){const _=o("fixed-playlist-header"),h=o("h7"),g=o("grid-header"),f=o("playlist-entry"),v=w("observe-visibility");return d(),n("div",F,[c(_,{onClick:s.loadPlaylist,ref:"fixedHeading",class:S({hidden:i.fixedHeaderHidden}),title:i.playlistName},null,8,["onClick","class","title"]),I((d(),n("div",q,[c(h,null,{default:H(()=>[C("Playlist")]),_:1}),a("h1",null,u(i.playlistName),1),a("h5",null,"Your "+u(i.playlist.length)+" favourite tracks, auto-generated just for you",1)])),[[v,s.headerVisibilityChanged]]),U,a("div",G,[a("span",{id:"loadPlaylist",onClick:l[0]||(l[0]=(...e)=>s.loadPlaylist&&s.loadPlaylist(...e)),class:"material-icons-outlined"},"play_circle_filled"),a("div",O,[c(g,{class:"hideIfMobile"}),R,a("div",j,[(d(!0),n(N,null,D(i.playlist,(e,p)=>(d(),T(f,{key:p,index:p,source:e.source,id:e.id,title:e.title,playing:e.playing,album:e.album,artist:e.artist,cover:e.cover,favourite:e.favourite,duration:e.duration,onDownload:s.download,onRequestUpdate:s.updateTracks},null,8,["index","source","id","title","playing","album","artist","cover","favourite","duration","onDownload","onRequestUpdate"]))),128))])])])])}const A=b(E,[["render",z],["__scopeId","data-v-d46608fa"]]);export{A as I};
