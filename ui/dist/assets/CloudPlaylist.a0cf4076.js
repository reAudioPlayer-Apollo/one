import{_ as y,o,c as n,a as l,t as i,g as u,F as h,j as d}from"./index.cc3e6542.js";const _={name:"cloudPlaylist",props:{playlist:Object,localPlaylists:Array,cloudPlaylists:Array},data(){return{statusText:""}},methods:{import(){this.statusIcon!="cloud_done"&&this.statusIcon=="cloud"&&(this.statusText="creating playlist...",fetch("/api/playlist/create").then(async e=>{this.statusText="updating playlist...";const t=Number(await e.text());await fetch("/api/updatePlaylist",{method:"POST",body:JSON.stringify({id:t,name:this.playlist.name,description:this.playlist.description})});for(let s=0;s<this.playlist.songs.length;s++){const a=this.playlist.songs[s];this.statusText=`adding song ${s} / ${this.playlist.songs.length-1}...`,await fetch("/api/add",{method:"POST",body:JSON.stringify({id:t,source:a.source,title:a.title,artist:a.artist,album:a.album,cover:a.cover,favourite:a.favourite,duration:a.duration})})}this.statusText=""}))}},computed:{cover(){var e,t;return((t=(e=this.playlist.songs)==null?void 0:e[0])==null?void 0:t.cover)||"/assets/img/music_placeholder.png"},statusIcon(){if(this.statusText)return"cloud_sync";const e=this.localPlaylists||this.cloudPlaylists;return e.filter(t=>JSON.stringify(t)==JSON.stringify(this.playlist)).length?"cloud_done":e.filter(t=>t.name==this.playlist.name).length?"cloud_sync":this.localPlaylists?"cloud":"cloud_off"}}},p={class:"cloudPlaylist"},g=["src"],m={class:"data"},f={class:"lead"},v=u(" \u2022 "),x={class:"status"},P={class:"material-symbols-rounded"},T={key:0,class:"lead"};function b(e,t,s,a,c,r){return o(),n("div",p,[l("span",{onClick:t[0]||(t[0]=()=>e.$emit("remove")),class:"close material-symbols-rounded"},"close"),l("img",{src:r.cover},null,8,g),l("div",m,[l("h2",null,i(s.playlist.name),1),l("div",f,[u(i(s.playlist.songs.length)+" "+i(s.playlist.songs.length==1?"song":"songs"),1),s.playlist.description?(o(),n(h,{key:0},[v,l("i",null,i(s.playlist.description),1)],64)):d("",!0)]),l("div",x,[l("span",P,i(r.statusIcon),1),c.statusText?(o(),n("div",T,[l("i",null,i(c.statusText),1)])):d("",!0)])])])}var O=y(_,[["render",b],["__scopeId","data-v-e52ff1c0"]]);export{O as C};
