import{b as m}from"./index.11d3b0f3.js";import{_ as y,H as f,o as l,c as i,a,t as d,j as k,F as v,h as w,i as C,p as D,k as S,b as x,g}from"./index.05601477.js";import{C as T}from"./CloudPlaylist.dc8a2a73.js";window.Buffer=m.Buffer;new f("reapApollo");const b={name:"import",methods:{upload(){this.userData.data.playlists=this.playlists,console.error(this.userData.data);const s=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.userData.data)})}},data(){if(this.$route.params.data){const s=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${s}`).then(async e=>this.userData=await e.json()),fetch("/api/playlists").then(async e=>{const n=await e.json();for(let o=0;o<n.length;o++){const t=await fetch("/api/playlist",{method:"POST",body:JSON.stringify({id:o})});this.playlists.push(await t.json())}})}else window.location=`https://eu-apollo.herokuapp.com/user/accessToken?redirect=${encodeURIComponent(window.location.origin+"/#/export/<token>")}`;return{playlists:[],userData:{}}},components:{CloudPlaylist:T}},h=s=>(D("data-v-acfa3e84"),s=s(),S(),s),P={class:"export"},B={class:"action"},j=h(()=>a("h1",null,"Cloud Save",-1)),I={key:0},N=h(()=>a("span",{class:"material-symbols-rounded"},"cloud_upload",-1)),O=g(" Synchronise"),E=[N,O],H={class:"data"};function R(s,e,n,o,t,c){const _=x("CloudPlaylist");return l(),i("div",P,[a("div",B,[j,t.userData.user?(l(),i("h2",I,"Hello "+d(t.userData.user.userinfo.name)+" ("+d(t.userData.user.userinfo.email)+")",1)):k("",!0),a("button",{onClick:e[0]||(e[0]=(...r)=>c.upload&&c.upload(...r)),class:"iconWithText"},E)]),a("div",H,[(l(!0),i(v,null,w(t.playlists,(r,p)=>{var u;return l(),C(_,{onRemove:()=>t.playlists.splice(p,1),key:p,playlist:r,cloudPlaylists:((u=t.userData.data)==null?void 0:u.playlists)||[]},null,8,["onRemove","playlist","cloudPlaylists"])}),128))])])}var $=y(b,[["render",R],["__scopeId","data-v-acfa3e84"]]);export{$ as default};
