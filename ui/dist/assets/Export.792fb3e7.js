import{b as m}from"./index.aef9157e.js";import{_,H as y,o as n,c as u,a as s,b as f,d as w,F as v,i as k,f as x,e as C,p as b,h as S}from"./index.f3f28f91.js";import{C as g}from"./CloudPlaylist.0aa5ef97.js";window.Buffer=m.Buffer;new y("reapApollo");const B={name:"import",methods:{login(){window.location=`https://eu-apollo.herokuapp.com/user/accessToken?redirect=${encodeURIComponent(window.location.origin+"/#/export/<token>")}`},downloadFile(){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.playlists)),e=document.getElementById("downloadAnchorElem");e.setAttribute("href",t),e.setAttribute("download","lib.one.json"),e.click()},upload(){this.userData.data.playlists=this.playlists,console.error(this.userData.data);const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.userData.data)})}},data(){if(this.$route.params.data){const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${t}`).then(async e=>this.userData=await e.json())}return fetch("/api/playlists").then(async t=>{const e=await t.json();for(let o=0;o<e.length;o++){const r=await fetch(`/api/playlists/${o}`);this.playlists.push(await r.json())}}),{playlists:[],userData:{}}},components:{CloudPlaylist:g}},i=t=>(b("data-v-0eafa629"),t=t(),S(),t),E={class:"export"},I={class:"action"},T=i(()=>s("h1",null,"Save to File",-1)),j=i(()=>s("a",{id:"downloadAnchorElem",style:{display:"none"}},null,-1)),A=i(()=>s("span",{class:"material-symbols-rounded"},"file_download",-1)),D={class:"data"};function F(t,e,o,r,a,c){const h=C("CloudPlaylist");return n(),u("div",E,[s("div",I,[T,j,s("button",{onClick:e[0]||(e[0]=(...l)=>c.downloadFile&&c.downloadFile(...l)),class:"iconWithText"},[A,f(" Save")])]),w("",!0),s("div",D,[(n(!0),u(v,null,k(a.playlists,(l,d)=>{var p;return n(),x(h,{onRemove:()=>a.playlists.splice(d,1),key:d,playlist:l,cloudPlaylists:((p=a.userData.data)==null?void 0:p.playlists)||[]},null,8,["onRemove","playlist","cloudPlaylists"])}),128))])])}const R=_(B,[["render",F],["__scopeId","data-v-0eafa629"]]);export{R as default};
