import{b as f}from"./index.aef9157e.js";import{_ as w,H as k,o as n,c as r,a as o,b as d,F as m,t as _,d as b,i as v,f as g,e as C,p as x,h as S}from"./index.ff638037.js";import{C as D}from"./CloudPlaylist.b2f134e0.js";window.Buffer=f.Buffer;new k("reapApollo");const T={name:"import",methods:{login(){window.location=`https://eu-apollo.herokuapp.com/user/accessToken?redirect=${encodeURIComponent(window.location.origin+"/#/export/<token>")}`},downloadFile(){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.playlists)),s=document.getElementById("downloadAnchorElem");s.setAttribute("href",t),s.setAttribute("download","lib.one.json"),s.click()},upload(){this.userData.data.playlists=this.playlists,console.error(this.userData.data);const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.userData.data)})}},data(){if(this.$route.params.data){const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${t}`).then(async s=>this.userData=await s.json())}return fetch("/api/playlists").then(async t=>{const s=await t.json();for(let c=0;c<s.length;c++){const p=await fetch(`/api/playlists/${c}`);this.playlists.push(await p.json())}}),{playlists:[],userData:{}}},components:{CloudPlaylist:D}},i=t=>(x("data-v-c2a3b41d"),t=t(),S(),t),I={class:"export"},B={class:"action"},E=i(()=>o("h1",null,"Save to File",-1)),j=i(()=>o("a",{id:"downloadAnchorElem",style:{display:"none"}},null,-1)),A=i(()=>o("span",{class:"material-symbols-rounded"},"file_download",-1)),F={class:"action"},P=i(()=>o("h1",null,"Save to Cloud",-1)),N={key:0},R=i(()=>o("span",{class:"material-symbols-rounded"},"cloud_upload",-1)),H=i(()=>o("span",{class:"material-symbols-rounded"},"login",-1)),O={class:"data"};function V(t,s,c,p,e,l){const y=C("CloudPlaylist");return n(),r("div",I,[o("div",B,[E,j,o("button",{onClick:s[0]||(s[0]=(...a)=>l.downloadFile&&l.downloadFile(...a)),class:"iconWithText"},[A,d(" Save")])]),o("div",F,[P,e.userData.user?(n(),r(m,{key:0},[e.userData.user?(n(),r("h2",N,"Hello "+_(e.userData.user.userinfo.name)+" ("+_(e.userData.user.userinfo.email)+")",1)):b("",!0),o("button",{onClick:s[1]||(s[1]=(...a)=>l.upload&&l.upload(...a)),class:"iconWithText"},[R,d(" Synchronise")])],64)):(n(),r("button",{key:1,onClick:s[2]||(s[2]=(...a)=>l.login&&l.login(...a)),class:"iconWithText"},[H,d(" Log In")]))]),o("div",O,[(n(!0),r(m,null,v(e.playlists,(a,u)=>{var h;return n(),g(y,{onRemove:()=>e.playlists.splice(u,1),key:u,playlist:a,cloudPlaylists:((h=e.userData.data)==null?void 0:h.playlists)||[]},null,8,["onRemove","playlist","cloudPlaylists"])}),128))])])}const U=w(T,[["render",V],["__scopeId","data-v-c2a3b41d"]]);export{U as default};
