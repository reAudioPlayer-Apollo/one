import{b as f}from"./index.11d3b0f3.js";import{_ as w,H as k,o as n,c as r,a as o,F as _,t as m,d as v,i as b,f as g,p as C,h as x,e as S,b as c}from"./index.e069deca.js";import{C as D}from"./CloudPlaylist.3b071be3.js";window.Buffer=f.Buffer;new k("reapApollo");const T={name:"import",methods:{login(){window.location=`https://eu-apollo.herokuapp.com/user/accessToken?redirect=${encodeURIComponent(window.location.origin+"/#/export/<token>")}`},downloadFile(){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.playlists)),s=document.getElementById("downloadAnchorElem");s.setAttribute("href",t),s.setAttribute("download","lib.one.json"),s.click()},upload(){this.userData.data.playlists=this.playlists,console.error(this.userData.data);const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.userData.data)})}},data(){if(this.$route.params.data){const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${t}`).then(async s=>this.userData=await s.json())}return fetch("/api/playlists").then(async t=>{const s=await t.json();for(let d=0;d<s.length;d++){const p=await fetch(`/api/playlists/${d}`);this.playlists.push(await p.json())}}),{playlists:[],userData:{}}},components:{CloudPlaylist:D}},i=t=>(C("data-v-3f46231d"),t=t(),x(),t),I={class:"export"},B={class:"action"},E=i(()=>o("h1",null,"Save to File",-1)),j=i(()=>o("a",{id:"downloadAnchorElem",style:{display:"none"}},null,-1)),A=i(()=>o("span",{class:"material-symbols-rounded"},"file_download",-1)),F=c(" Save"),P=[A,F],N={class:"action"},R=i(()=>o("h1",null,"Save to Cloud",-1)),H={key:0},O=i(()=>o("span",{class:"material-symbols-rounded"},"cloud_upload",-1)),V=c(" Synchronise"),W=[O,V],J=i(()=>o("span",{class:"material-symbols-rounded"},"login",-1)),L=c(" Log In"),U=[J,L],q={class:"data"};function z(t,s,d,p,e,l){const y=S("CloudPlaylist");return n(),r("div",I,[o("div",B,[E,j,o("button",{onClick:s[0]||(s[0]=(...a)=>l.downloadFile&&l.downloadFile(...a)),class:"iconWithText"},P)]),o("div",N,[R,e.userData.user?(n(),r(_,{key:0},[e.userData.user?(n(),r("h2",H,"Hello "+m(e.userData.user.userinfo.name)+" ("+m(e.userData.user.userinfo.email)+")",1)):v("",!0),o("button",{onClick:s[1]||(s[1]=(...a)=>l.upload&&l.upload(...a)),class:"iconWithText"},W)],64)):(n(),r("button",{key:1,onClick:s[2]||(s[2]=(...a)=>l.login&&l.login(...a)),class:"iconWithText"},U))]),o("div",q,[(n(!0),r(_,null,b(e.playlists,(a,u)=>{var h;return n(),g(y,{onRemove:()=>e.playlists.splice(u,1),key:u,playlist:a,cloudPlaylists:((h=e.userData.data)==null?void 0:h.playlists)||[]},null,8,["onRemove","playlist","cloudPlaylists"])}),128))])])}var Q=w(T,[["render",z],["__scopeId","data-v-3f46231d"]]);export{Q as default};
