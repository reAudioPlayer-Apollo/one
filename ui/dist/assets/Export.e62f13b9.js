import{b as m}from"./index.11d3b0f3.js";import{_ as y,H as f,o as l,c as i,a as o,t as u,j as k,F as v,h as w,i as C,p as D,k as S,b as x,g}from"./index.645aa304.js";import{C as T}from"./CloudPlaylist.f275b75e.js";window.Buffer=m.Buffer;new f("reapApollo");const b={name:"import",methods:{upload(){this.userData.data.playlists=this.playlists,console.error(this.userData.data);const s=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.userData.data)})}},data(){if(this.$route.params.data){const s=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${s}`).then(async e=>this.userData=await e.json()),fetch("/api/playlists").then(async e=>{const n=await e.json();for(let a=0;a<n.length;a++){const t=await fetch("/api/playlists/id",{method:"POST",body:JSON.stringify({id:a})});this.playlists.push(await t.json())}})}else window.location=`https://eu-apollo.herokuapp.com/user/accessToken?redirect=${encodeURIComponent(window.location.origin+"/#/export/<token>")}`;return{playlists:[],userData:{}}},components:{CloudPlaylist:T}},h=s=>(D("data-v-4107d2f8"),s=s(),S(),s),P={class:"export"},B={class:"action"},j=h(()=>o("h1",null,"Cloud Save",-1)),I={key:0},N=h(()=>o("span",{class:"material-symbols-rounded"},"cloud_upload",-1)),O=g(" Synchronise"),E=[N,O],H={class:"data"};function R(s,e,n,a,t,p){const _=x("CloudPlaylist");return l(),i("div",P,[o("div",B,[j,t.userData.user?(l(),i("h2",I,"Hello "+u(t.userData.user.userinfo.name)+" ("+u(t.userData.user.userinfo.email)+")",1)):k("",!0),o("button",{onClick:e[0]||(e[0]=(...r)=>p.upload&&p.upload(...r)),class:"iconWithText"},E)]),o("div",H,[(l(!0),i(v,null,w(t.playlists,(r,c)=>{var d;return l(),C(_,{onRemove:()=>t.playlists.splice(c,1),key:c,playlist:r,cloudPlaylists:((d=t.userData.data)==null?void 0:d.playlists)||[]},null,8,["onRemove","playlist","cloudPlaylists"])}),128))])])}var $=y(b,[["render",R],["__scopeId","data-v-4107d2f8"]]);export{$ as default};
