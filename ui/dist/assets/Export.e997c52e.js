import{b as m}from"./index.11d3b0f3.js";import{_ as y,H as f,o as l,c as i,a,t as u,j as v,F as k,h as w,i as D,p as g,k as C,b as S,g as x}from"./index.caf9dd62.js";import{C as b}from"./CloudPlaylist.7f5925cc.js";window.Buffer=m.Buffer;new f("reapApollo");const P={name:"import",methods:{upload(){this.userData.data.playlists=this.playlists,console.error(this.userData.data),fetch(`https://eu-apollo.herokuapp.com/user/set/data/${this.userData.accessToken}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.userData.data)})}},data(){if(this.$route.params.data){const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/get/${t}`).then(async e=>this.userData=await e.json()),fetch("/api/playlists").then(async e=>{const n=await e.json();for(let o=0;o<n.length;o++){const s=await fetch("/api/playlist",{method:"POST",body:JSON.stringify({id:o})});this.playlists.push(await s.json())}})}else window.location=`https://eu-apollo.herokuapp.com/user/get/redirect?redirect=${encodeURIComponent(window.location.origin+"/#/export/")}`;return{playlists:[],userData:{}}},components:{CloudPlaylist:b}},h=t=>(g("data-v-06c755af"),t=t(),C(),t),T={class:"export"},B={class:"action"},j=h(()=>a("h1",null,"Cloud Save",-1)),I={key:0},N=h(()=>a("span",{class:"material-symbols-rounded"},"cloud_upload",-1)),O=x(" Synchronise"),E=[N,O],H={class:"data"};function R(t,e,n,o,s,c){const _=S("CloudPlaylist");return l(),i("div",T,[a("div",B,[j,s.userData.user?(l(),i("h2",I,"Hello "+u(s.userData.user.name)+" ("+u(s.userData.user.email)+")",1)):v("",!0),a("button",{onClick:e[0]||(e[0]=(...r)=>c.upload&&c.upload(...r)),class:"iconWithText"},E)]),a("div",H,[(l(!0),i(k,null,w(s.playlists,(r,p)=>{var d;return l(),D(_,{onRemove:()=>s.playlists.splice(p,1),key:p,playlist:r,cloudPlaylists:((d=s.userData.data)==null?void 0:d.playlists)||[]},null,8,["onRemove","playlist","cloudPlaylists"])}),128))])])}var A=y(P,[["render",R],["__scopeId","data-v-06c755af"]]);export{A as default};
