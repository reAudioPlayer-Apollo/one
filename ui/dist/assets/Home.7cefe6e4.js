import{_ as f,o as s,c as n,a as i,t as g,r as k,b as N,w as u,F as p,d as m,e as c,f as w,g as _}from"./index.c79d867f.js";import{N as b}from"./NewsItemBig.4139fdfb.js";import{I as x}from"./ReleaseItem.e1d00bcf.js";import{S as j}from"./Shelf.a8ccc784.js";import"./AddAlbumToPlaylist.4d439f1f.js";import"./MiniPlayer.3148f2d0.js";import"./FindSources.c1bf9981.js";const B={name:"FullShelfSmallerGrid",props:{heading:String}},G={class:"shelf"},D={class:"header"},F={class:"items"};function H(e,r,l,a,o,d){return s(),n("div",G,[i("div",D,[i("h2",null,g(l.heading),1)]),i("div",F,[k(e.$slots,"default",{},void 0,!0)])])}var C=f(B,[["render",H],["__scopeId","data-v-7f87ce78"]]);const P={name:"PlaylistItemWide",methods:{redirect(){this.$router.push(this.href)}},props:{title:String,href:String,cover:String}},V={class:"itemBig"},W=["src"],O={class:"wrapper"};function T(e,r,l,a,o,d){return s(),n("div",V,[i("div",{class:"item",onClick:r[0]||(r[0]=(...h)=>d.redirect&&d.redirect(...h))},[i("img",{src:l.cover},null,8,W),i("div",O,[i("h4",null,g(l.title),1)])])])}var E=f(P,[["render",T],["__scopeId","data-v-33f44186"]]);const J={components:{Shelf:j,ReleaseItem:x,PlaylistItemWide:E,FullShelfSmallerGrid:C,NewsItemBig:b},name:"Home",data(){const e=new Date;return{greeting:e.getHours()<12?"Good morning":e.getHours()<18?"Good afternoon":"Good evening",releases:[],playlists:[],news:[]}},mounted(){fetch("http://localhost:1234/api/config/ready").then(e=>{e.status==400&&this.$router.push("/welcome")}),fetch("http://localhost:1234/api/releases").then(e=>e.json()).then(e=>{this.releases.length=0,this.releases.push(...e)}),window.localStorage.getItem("sidebar.showNewsTab")=="true"&&fetch("http://localhost:1234/api/news").then(e=>e.json()).then(e=>{this.news.length=0,this.news.push(...e)}),fetch("http://localhost:1234/api/playlists").then(e=>e.json()).then(async e=>{for(let r=0;r<e.length;r++){const a=await(await fetch("http://localhost:1234/api/playlist",{method:"POST",body:JSON.stringify({id:r})})).json();this.playlists.push({name:a.name,description:a.description,cover:a.songs[0].cover})}})}},L={class:"home"};function R(e,r,l,a,o,d){const h=_("playlist-item-wide"),S=_("full-shelf-smaller-grid"),$=_("release-item"),v=_("shelf"),I=_("news-item-big");return s(),n("div",L,[i("h1",null,g(o.greeting),1),N(S,null,{default:u(()=>[(s(!0),n(p,null,m(o.playlists,(t,y)=>(s(),c(h,{key:y,href:`/playlist/${y}`,cover:t.cover,title:t.name,spotify:!1},null,8,["href","cover","title"]))),128))]),_:1}),o.releases.length?(s(),c(v,{key:0,heading:"New releases for you",href:"/collection/releases"},{default:u(()=>[(s(!0),n(p,null,m(o.releases,t=>(s(),c($,{key:t.url,releaseDate:t.releaseDate,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["releaseDate","cover","href","artist","title"]))),128))]),_:1})):w("",!0),o.news.length?(s(),c(v,{key:1,heading:"Something to read while you're listening",href:"/news"},{default:u(()=>[(s(!0),n(p,null,m(o.news,t=>(s(),c(I,{key:t.url,title:t.title,image:t.image,summary:t.summary,href:t.link,updated:t.updated,source:t.source},null,8,["title","image","summary","href","updated","source"]))),128))]),_:1})):w("",!0)])}var X=f(J,[["render",R],["__scopeId","data-v-0ba4da6e"]]);export{X as default};
