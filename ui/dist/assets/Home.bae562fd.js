import{_ as m,o as s,c as l,a as o,t as g,r as k,H as b,b as x,w as u,F as p,d as f,e as c,f as y,g as _}from"./index.5c6e860d.js";import{N}from"./NewsItemBig.bf4d1452.js";import{I as H}from"./ReleaseItem.7bf9e1b2.js";import{S as j}from"./Shelf.d4b6770f.js";import"./AddAlbumToPlaylist.4185c980.js";import"./MiniPlayer.6f3e9d36.js";import"./FindSources.83efa7f9.js";const B={name:"FullShelfSmallerGrid",props:{heading:String}},G={class:"shelf"},D={class:"header"},F={class:"items"};function C(e,r,a,n,i,d){return s(),l("div",G,[o("div",D,[o("h2",null,g(a.heading),1)]),o("div",F,[k(e.$slots,"default",{},void 0,!0)])])}var P=m(B,[["render",C],["__scopeId","data-v-7f87ce78"]]);const O={name:"PlaylistItemWide",methods:{redirect(){this.$router.push(this.href)}},props:{title:String,href:String,cover:String}},V={class:"itemBig"},W=["src"],T={class:"wrapper"};function E(e,r,a,n,i,d){return s(),l("div",V,[o("div",{class:"item",onClick:r[0]||(r[0]=(...h)=>d.redirect&&d.redirect(...h))},[o("img",{src:a.cover},null,8,W),o("div",T,[o("h4",null,g(a.title),1)])])])}var J=m(O,[["render",E],["__scopeId","data-v-33f44186"]]);const L=new b("reapOne.playlist",22),R={components:{Shelf:j,ReleaseItem:H,PlaylistItemWide:J,FullShelfSmallerGrid:P,NewsItemBig:N},name:"Home",data(){const e=new Date;return{greeting:e.getHours()<12?"Good morning":e.getHours()<18?"Good afternoon":"Good evening",releases:[],playlists:[],news:[]}},mounted(){fetch("/api/config/ready").then(e=>{e.status==400&&this.$router.push("/welcome")}),fetch("/api/releases").then(e=>e.json()).then(e=>{this.releases.length=0,this.releases.push(...e)}),window.localStorage.getItem("sidebar.showNewsTab")=="true"&&fetch("/api/news").then(e=>e.json()).then(e=>{this.news.length=0,this.news.push(...e)}),fetch("/api/playlists").then(e=>e.json()).then(async e=>{for(let r=0;r<e.length;r++){const n=await(await fetch("/api/playlist",{method:"POST",body:JSON.stringify({id:r})})).json();this.playlists.push({name:n.name,description:n.description,cover:n.songs[0].cover,href:`/playlist/${L.encode(r)}`})}})}},q={class:"home"};function z(e,r,a,n,i,d){const h=_("playlist-item-wide"),w=_("full-shelf-smaller-grid"),S=_("release-item"),v=_("shelf"),$=_("news-item-big");return s(),l("div",q,[o("h1",null,g(i.greeting),1),x(w,null,{default:u(()=>[(s(!0),l(p,null,f(i.playlists,(t,I)=>(s(),c(h,{key:I,href:t.href,cover:t.cover,title:t.name,spotify:!1},null,8,["href","cover","title"]))),128))]),_:1}),i.releases.length?(s(),c(v,{key:0,heading:"New releases for you",href:"/collection/releases"},{default:u(()=>[(s(!0),l(p,null,f(i.releases,t=>(s(),c(S,{key:t.url,releaseDate:t.releaseDate,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["releaseDate","cover","href","artist","title"]))),128))]),_:1})):y("",!0),i.news.length?(s(),c(v,{key:1,heading:"Something to read while you're listening",href:"/news"},{default:u(()=>[(s(!0),l(p,null,f(i.news,t=>(s(),c($,{key:t.url,title:t.title,image:t.image,summary:t.summary,href:t.link,updated:t.updated,source:t.source},null,8,["title","image","summary","href","updated","source"]))),128))]),_:1})):y("",!0)])}var Z=m(R,[["render",z],["__scopeId","data-v-90b5b10a"]]);export{Z as default};
