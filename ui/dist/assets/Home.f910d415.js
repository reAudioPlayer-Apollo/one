import{_ as f,o as s,c as l,a as o,t as g,r as k,b as N,w as h,F as p,d as m,e as c,f as w,g as _}from"./index.450f4d87.js";import{N as x}from"./NewsItemBig.59af38c6.js";import{I as b}from"./ReleaseItem.af767c80.js";import{S as j}from"./Shelf.1d3bc1c4.js";import"./AddAlbumToPlaylist.c8f3ef64.js";import"./MiniPlayer.ee1a3e92.js";import"./FindSources.8dccc6fe.js";const B={name:"FullShelfSmallerGrid",props:{heading:String}},G={class:"shelf"},D={class:"header"},F={class:"items"};function H(e,r,n,a,i,d){return s(),l("div",G,[o("div",D,[o("h2",null,g(n.heading),1)]),o("div",F,[k(e.$slots,"default",{},void 0,!0)])])}var C=f(B,[["render",H],["__scopeId","data-v-7f87ce78"]]);const P={name:"PlaylistItemWide",methods:{redirect(){this.$router.push(this.href)}},props:{title:String,href:String,cover:String}},V={class:"itemBig"},W=["src"],O={class:"wrapper"};function T(e,r,n,a,i,d){return s(),l("div",V,[o("div",{class:"item",onClick:r[0]||(r[0]=(...u)=>d.redirect&&d.redirect(...u))},[o("img",{src:n.cover},null,8,W),o("div",O,[o("h4",null,g(n.title),1)])])])}var E=f(P,[["render",T],["__scopeId","data-v-33f44186"]]);const J={components:{Shelf:j,ReleaseItem:b,PlaylistItemWide:E,FullShelfSmallerGrid:C,NewsItemBig:x},name:"Home",data(){const e=new Date;return{greeting:e.getHours()<12?"Good morning":e.getHours()<18?"Good afternoon":"Good evening",releases:[],playlists:[],news:[]}},mounted(){fetch("/api/config/ready").then(e=>{e.status==400&&this.$router.push("/welcome")}),fetch("/api/releases").then(e=>e.json()).then(e=>{this.releases.length=0,this.releases.push(...e)}),window.localStorage.getItem("sidebar.showNewsTab")=="true"&&fetch("/api/news").then(e=>e.json()).then(e=>{this.news.length=0,this.news.push(...e)}),fetch("/api/playlists").then(e=>e.json()).then(async e=>{for(let r=0;r<e.length;r++){const a=await(await fetch("/api/playlist",{method:"POST",body:JSON.stringify({id:r})})).json();this.playlists.push({name:a.name,description:a.description,cover:a.songs[0].cover})}})}},L={class:"home"};function R(e,r,n,a,i,d){const u=_("playlist-item-wide"),S=_("full-shelf-smaller-grid"),$=_("release-item"),v=_("shelf"),I=_("news-item-big");return s(),l("div",L,[o("h1",null,g(i.greeting),1),N(S,null,{default:h(()=>[(s(!0),l(p,null,m(i.playlists,(t,y)=>(s(),c(u,{key:y,href:`/playlist/${y}`,cover:t.cover,title:t.name,spotify:!1},null,8,["href","cover","title"]))),128))]),_:1}),i.releases.length?(s(),c(v,{key:0,heading:"New releases for you",href:"/collection/releases"},{default:h(()=>[(s(!0),l(p,null,m(i.releases,t=>(s(),c($,{key:t.url,releaseDate:t.releaseDate,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["releaseDate","cover","href","artist","title"]))),128))]),_:1})):w("",!0),i.news.length?(s(),c(v,{key:1,heading:"Something to read while you're listening",href:"/news"},{default:h(()=>[(s(!0),l(p,null,m(i.news,t=>(s(),c(I,{key:t.url,title:t.title,image:t.image,summary:t.summary,href:t.link,updated:t.updated,source:t.source},null,8,["title","image","summary","href","updated","source"]))),128))]),_:1})):w("",!0)])}var X=f(J,[["render",R],["__scopeId","data-v-513c2528"]]);export{X as default};
