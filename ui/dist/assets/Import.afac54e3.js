import{b as f}from"./index.11d3b0f3.js";import{_ as y,H as v,o as i,c as p,a as t,F as _,t as h,d as k,i as w,f as b,p as C,h as P,e as g,b as u}from"./index.e069deca.js";import{C as F}from"./CloudPlaylist.3b071be3.js";window.Buffer=f.Buffer;new v("reapApollo");const D={name:"import",methods:{login(){window.location=`https://eu-apollo.herokuapp.com/user/accessToken?redirect=${encodeURIComponent(window.location.origin+"/#/import/<token>")}`}},mounted(){this.$refs.upFile.addEventListener("change",()=>{var l,r,o,c;const e=(l=this.$refs.upFile.files)==null?void 0:l[0];if(!!e){this.uploadedCoverName=(c=(o=(r=this.$refs.upFile)==null?void 0:r.files)==null?void 0:o[0])==null?void 0:c.name;var s=new FileReader;s.onloadend=()=>{this.cloudPlaylists=JSON.parse(s.result)},s.readAsText(e)}})},data(){if(this.$route.params.data){const e=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/${e}`).then(async s=>{this.userData=await s.json(),this.cloudPlaylists=this.userData.data.playlists})}return fetch("/api/playlists").then(async e=>{const s=await e.json();for(let l=0;l<s.length;l++){const r=await fetch(`/api/playlists/${l}`);this.localPlaylists.push(await r.json())}}),{localPlaylists:[],cloudPlaylists:[],userData:{}}},components:{CloudPlaylist:F}},n=e=>(C("data-v-b708642c"),e=e(),P(),e),I={class:"import"},T={class:"action"},$=n(()=>t("h1",null,"Restore From File",-1)),E={type:"file",ref:"upFile",style:{display:"none"},accept:"application/json"},x=n(()=>t("span",{class:"material-symbols-rounded"},"file_upload",-1)),B=u(" Upload"),R=[x,B],S=n(()=>t("span",{class:"material-symbols-rounded"},"done",-1)),N=u(" Apply"),j=[S,N],W={class:"action"},A=n(()=>t("h1",null,"Restore From Cloud",-1)),H={key:0},L=n(()=>t("span",{class:"material-symbols-rounded"},"cloud_download",-1)),V=u(" Synchronise"),U=[L,V],J=n(()=>t("span",{class:"material-symbols-rounded"},"login",-1)),O=u(" Log In"),q=[J,O],z={class:"data"};function G(e,s,l,r,o,c){const m=g("CloudPlaylist");return i(),p("div",I,[t("div",T,[$,t("input",E,null,512),t("button",{onClick:s[0]||(s[0]=()=>e.$refs.upFile.click()),class:"iconWithText"},R),t("button",{onClick:s[1]||(s[1]=d=>e.$refs.playlistsElements.forEach(a=>a.import())),class:"iconWithText"},j)]),t("div",W,[A,o.userData.user?(i(),p(_,{key:0},[o.userData.user?(i(),p("h2",H,"Hello "+h(o.userData.user.userinfo.name)+" ("+h(o.userData.user.userinfo.email)+")",1)):k("",!0),t("button",{onClick:s[2]||(s[2]=d=>e.$refs.playlistsElements.forEach(a=>a.import())),class:"iconWithText"},U)],64)):(i(),p("button",{key:1,onClick:s[3]||(s[3]=(...d)=>c.login&&c.login(...d)),class:"iconWithText"},q))]),t("div",z,[(i(!0),p(_,null,w(o.cloudPlaylists,(d,a)=>(i(),b(m,{onRemove:()=>o.cloudPlaylists.splice(a,1),ref_for:!0,ref:"playlistsElements",key:a,playlist:d,localPlaylists:o.localPlaylists},null,8,["onRemove","playlist","localPlaylists"]))),128))])])}var X=y(D,[["render",G],["__scopeId","data-v-b708642c"]]);export{X as default};
