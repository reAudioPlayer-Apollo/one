import{b as _}from"./index.11d3b0f3.js";import{_ as m,H as h,o as i,c as r,a as o,t as p,j as y,F as f,h as v,i as w,p as P,k,b as g,g as C}from"./index.caf9dd62.js";import{C as D}from"./CloudPlaylist.7f5925cc.js";window.Buffer=_.Buffer;new h("reapApollo");const I={name:"import",data(){if(this.$route.params.data){const t=this.$route.params.data;fetch(`https://eu-apollo.herokuapp.com/user/get/${t}`).then(async e=>{this.userData=await e.json(),this.cloudPlaylists=this.userData.data.playlists}),fetch("/api/playlists").then(async e=>{const n=await e.json();for(let a=0;a<n.length;a++){const s=await fetch("/api/playlist",{method:"POST",body:JSON.stringify({id:a})});this.localPlaylists.push(await s.json())}})}else window.location=`https://eu-apollo.herokuapp.com/user/get/redirect?redirect=${encodeURIComponent(window.location.origin+"/#/import/")}`;return{localPlaylists:[],cloudPlaylists:[],userData:{}}},components:{CloudPlaylist:D}},d=t=>(P("data-v-f9f25c20"),t=t(),k(),t),S={class:"import"},b={class:"action"},B=d(()=>o("h1",null,"Cloud Restore",-1)),j={key:0},x=d(()=>o("span",{class:"material-symbols-rounded"},"cloud_download",-1)),E=C(" Synchronise"),N=[x,E],R={class:"data"};function T(t,e,n,a,s,$){const u=g("CloudPlaylist");return i(),r("div",S,[o("div",b,[B,s.userData.user?(i(),r("h2",j,"Hello "+p(s.userData.user.name)+" ("+p(s.userData.user.email)+")",1)):y("",!0),o("button",{onClick:e[0]||(e[0]=c=>t.$refs.playlistsElements.forEach(l=>l.import())),class:"iconWithText"},N)]),o("div",R,[(i(!0),r(f,null,v(s.cloudPlaylists,(c,l)=>(i(),w(u,{onRemove:()=>s.cloudPlaylists.splice(l,1),ref_for:!0,ref:"playlistsElements",key:l,playlist:c,localPlaylists:s.localPlaylists},null,8,["onRemove","playlist","localPlaylists"]))),128))])])}var O=m(I,[["render",T],["__scopeId","data-v-f9f25c20"]]);export{O as default};
