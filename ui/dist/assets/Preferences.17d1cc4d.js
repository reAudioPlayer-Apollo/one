import{F as v}from"./FullShelf.f2efa68c.js";import{_ as f,o as a,c,a as e,t as k,k as _,H as T,m as i,bo as u,b as y,q as b,f as w,w as C,F as I,i as x,e as m,p as B,h as P}from"./index.666fbafe.js";import{b as N}from"./index.aef9157e.js";const L={name:"Theme",props:{name:String},methods:{selected(){return window.getCurrentTheme()==this.name},select(){window.setTheme(this.name),this.$emit("selected")}}},V=["src"];function M(o,t,d,p,n,l){return a(),c("div",{onClick:t[0]||(t[0]=(...h)=>l.select&&l.select(...h)),class:"wrapper"},[e("p",{class:_({selected:l.selected()})},k(d.name),3),e("img",{src:`/assets/img/themes/${this.name}.svg`,class:_({selected:l.selected()})},null,10,V)])}const A=f(L,[["render",M],["__scopeId","data-v-494e22cd"]]);window.Buffer=N.Buffer;new T("reapApollo");const U={components:{Theme:A,FullShelf:v},name:"Preferences",mounted(){this.checkSupportsLocalPlayback()},methods:{updateThemes(){this.themeSelected=window.getCurrentTheme()},changeShowSportsTab(){window.localStorage.setItem("sidebar.showSportsTab",this.showSportsTab?"true":"false")},changeShowNewsTab(){window.localStorage.setItem("sidebar.showNewsTab",this.showNewsTab?"true":"false")},changePlayInBrowser(){window.localStorage.setItem("player.inBrowser",this.playInBrowser?"true":"false")},saveRestrictedMode(){this.spotifyClientId||this.spotifyClientSecret||fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:"restricted",secret:"restricted"})}).then(o=>console.log(o))},saveSpotify(){!this.spotifyClientId||!this.spotifyClientSecret||fetch("/api/config/spotify",{method:"POST",body:JSON.stringify({id:this.spotifyClientId,secret:this.spotifyClientSecret})}).then(o=>console.log(o))},async checkSupportsLocalPlayback(){const o=await fetch("/api/player/supports/local-playback");if(o.status!=200){this.supportsLocalPlayback();return}this.supportsLocalPlayback=await o.json()}},data(){const o=["jade","dark","light"],t=window.getCurrentTheme();let d="",p="";return{coverAsBackground:window.localStorage.getItem("player.coverAsBackground")=="true",themes:o,themeSelected:t,showSportsTab:window.localStorage.getItem("sidebar.showSportsTab")=="true",showNewsTab:window.localStorage.getItem("sidebar.showNewsTab")=="true",playInBrowser:window.localStorage.getItem("player.inBrowser")=="true",spotifyClientId:d,spotifyClientSecret:p,supportsLocalPlayback:!1}}},r=o=>(B("data-v-13dbb749"),o=o(),P(),o),D={class:"preferences"},F={class:"padding-10"},H={class:"sidebar"},O=r(()=>e("h2",null,"Sidebar",-1)),R={class:"checkbox"},E=r(()=>e("label",{for:"checkbox"},[e("span",null,'Show "News" tab')],-1)),j={class:"checkbox"},J=r(()=>e("label",{for:"checkbox2"},[e("span",null,'Show "Sports" tab')],-1)),q={class:"sidebar"},z=r(()=>e("h2",null,"Player",-1)),G=["disabled"],K={key:0,for:"checkbox3"},Q=r(()=>e("span",null,"Play in browser",-1)),W=[Q],X={key:1,for:"checkbox3"},Y=r(()=>e("span",null,"Play in browser (local playback not supported on this device)",-1)),Z=[Y],$={class:"sidebar"},ee=r(()=>e("h2",null,"Data Backup",-1)),te={class:"wrapTogether spaceBetween"},se={class:"spotify"},oe=r(()=>e("h2",null,"Spotify",-1)),ne=r(()=>e("summary",null,"How to",-1)),le=r(()=>e("p",null,"2) Create An App",-1)),re=r(()=>e("p",null,"3) Enter any name and any description",-1)),ae=r(()=>e("p",null,[y("4) Edit the settings: set the redirect url to "),e("a",{href:"http://reap.ml/"},"http://reap.ml/")],-1)),ie=r(()=>e("p",null,"5) Copy and enter the client id and secret into the corresponding input field",-1)),ce={class:"wrapTogether"},de=r(()=>e("p",null,"Client ID: ",-1)),pe={class:"wrapTogether"},he=r(()=>e("p",null,"Client Secret: ",-1)),ue={class:"wrapTogether spaceBetween"},_e=r(()=>e("h2",null,"Themes",-1));function be(o,t,d,p,n,l){const h=m("theme"),S=m("full-shelf");return a(),c("div",D,[e("div",F,[e("div",H,[O,e("div",R,[i(e("input",{onChange:t[0]||(t[0]=(...s)=>l.changeShowNewsTab&&l.changeShowNewsTab(...s)),"onUpdate:modelValue":t[1]||(t[1]=s=>n.showNewsTab=s),type:"checkbox",id:"checkbox",name:"",value:""},null,544),[[u,n.showNewsTab]]),E]),e("div",j,[i(e("input",{onChange:t[2]||(t[2]=(...s)=>l.changeShowSportsTab&&l.changeShowSportsTab(...s)),"onUpdate:modelValue":t[3]||(t[3]=s=>n.showSportsTab=s),type:"checkbox",id:"checkbox2",name:"",value:""},null,544),[[u,n.showSportsTab]]),J])]),e("div",q,[z,e("div",{class:_(["checkbox",{disabled:!n.supportsLocalPlayback}])},[i(e("input",{onChange:t[4]||(t[4]=(...s)=>l.changePlayInBrowser&&l.changePlayInBrowser(...s)),disabled:!n.supportsLocalPlayback,"onUpdate:modelValue":t[5]||(t[5]=s=>n.playInBrowser=s),type:"checkbox",id:"checkbox3",name:"",value:""},null,40,G),[[u,n.playInBrowser]]),n.supportsLocalPlayback?(a(),c("label",K,W)):(a(),c("label",X,Z))],2)]),e("div",$,[ee,e("div",te,[e("button",{onClick:t[6]||(t[6]=s=>o.$router.push("/export"))},"Save"),e("button",{onClick:t[7]||(t[7]=s=>o.$router.push("/import"))},"Restore")])]),e("div",se,[oe,e("details",null,[ne,e("p",null,[y("1) Head over to the "),e("a",{onClick:t[8]||(t[8]=()=>o.redirect("https://developer.spotify.com/dashboard/applications"))},"spotify developer dashboard")]),le,re,ae,ie]),e("div",ce,[de,i(e("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=s=>n.spotifyClientId=s)},null,512),[[b,n.spotifyClientId]])]),e("div",pe,[he,i(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=s=>n.spotifyClientSecret=s)},null,512),[[b,n.spotifyClientSecret]])]),e("div",ue,[e("button",{onClick:t[11]||(t[11]=(...s)=>l.saveSpotify&&l.saveSpotify(...s))},"save"),e("button",{onClick:t[12]||(t[12]=(...s)=>l.saveRestrictedMode&&l.saveRestrictedMode(...s)),class:"restrictedMode"},"enter restricted mode")])])]),e("div",null,[_e,(a(),w(S,{key:n.themeSelected},{default:C(()=>[(a(!0),c(I,null,x(n.themes,(s,g)=>(a(),w(h,{onSelected:l.updateThemes,key:g,name:s},null,8,["onSelected","name"]))),128))]),_:1}))])])}const ye=f(U,[["render",be],["__scopeId","data-v-13dbb749"]]);export{ye as default};
