import{A as b}from"./ArtistItem.47f027d8.js";import{I as x}from"./ReleaseItem.7d3d1f67.js";import{A as q}from"./AddSongToPlaylist.d6002d21.js";import{_ as v,e as h,o as e,c as o,g as T,a as c,t as f,d as _,r as B,F as d,f as n,w as y,i as g}from"./index.7a0dd187.js";import{L as C}from"./Loader.2ee52e15.js";import"./FindSources.cf012e68.js";import"./SpotifyPlaylistEntry.88a390ef.js";import"./MiniPlayer.d6bc442f.js";import"./SpotifyPlaylistHeader.2d9f4eb5.js";import"./AddAlbumToPlaylist.fc919dc6.js";const L={components:{AddSongToPlaylist:q},name:"SearchItem",methods:{redirect(){this.$refs.addAlbum.showModal=!0}},props:{cover:String,title:String,artist:String,releaseDate:String,href:String,preview:String}},$={class:"wrapper"},D=["src"],N={key:0,class:"note"};function F(s,a,r,m,i,l){const u=h("add-song-to-playlist");return e(),o("div",$,[T(u,{href:r.href,cover:r.cover,title:r.title,artist:r.artist,preview:r.preview,ref:"addAlbum"},null,8,["href","cover","title","artist","preview"]),c("div",{class:"item",onClick:a[0]||(a[0]=(...k)=>l.redirect&&l.redirect(...k))},[c("img",{src:r.cover},null,8,D),c("h4",null,f(r.title),1),c("p",null,f(r.artist),1),r.releaseDate?(e(),o("p",N,"Released on "+f(r.releaseDate),1)):_("",!0)])])}const P=v(L,[["render",F],["__scopeId","data-v-c0301a7f"]]);const V={name:"Shelf",props:{heading:String,href:String},methods:{redirect(){!this.href||this.$router.push(this.href)}}},E={class:"shelf"},O={key:0,class:"header"},j={class:"items"};function J(s,a,r,m,i,l){return e(),o("div",E,[r.heading?(e(),o("div",O,[c("h2",null,f(r.heading),1),c("h5",{onClick:a[0]||(a[0]=(...u)=>l.redirect&&l.redirect(...u))},"See All")])):_("",!0),c("div",j,[B(s.$slots,"default",{},void 0,!0)])])}const M=v(V,[["render",J],["__scopeId","data-v-d5c8ef29"]]);const R={name:"TrackItem",methods:{redirect(){console.log("redirect"),this.$router.push(this.href)}},props:{cover:String,title:String,artist:String,href:String}},Y={class:"wrapper"},z=["src"];function G(s,a,r,m,i,l){return e(),o("div",Y,[c("div",{class:"item",onClick:a[0]||(a[0]=(...u)=>l.redirect&&l.redirect(...u))},[c("img",{src:r.cover},null,8,z),c("h4",null,f(r.title),1),c("p",null,f(r.artist),1)])])}const H=v(R,[["render",G],["__scopeId","data-v-2b4e4761"]]);const K={name:"Search",components:{Shelf:M,Item:x,SearchItem:P,ArtistItem:b,TrackItem:H,Loader:C},data(){return{query:"",spotifyTracks:[],spotifyArtists:[],tracks:[],artists:[],youtubeTracks:[],loading:!1}},methods:{search(){this.query=this.$route.params.query,this.query&&(this.loading=!0,fetch("/api/search",{method:"POST",body:JSON.stringify({query:this.query})}).then(s=>s.json()).then(s=>{this.spotifyTracks.length=0,this.spotifyArtists.length=0,this.tracks.length=0,this.artists.length=0,this.youtubeTracks.length=0,this.spotifyTracks.push(...s.spotifyTracks||[]),this.spotifyArtists.push(...s.spotifyArtists||[]),this.tracks.push(...s.tracks||[]),this.artists.push(...s.artists||[]),this.youtubeTracks.push(...s.youtubeTracks||[]),this.loading=!1}))},enterText(s){s.key==="Enter"&&this.$router.push("/search/"+this.query)}},watch:{$route(){this.search()}},mounted(){this.search(),this.$refs.searchBox.focus()}},Q={class:"search"},U={key:0,class:"fillPage"};function W(s,a,r,m,i,l){const u=h("Loader"),k=h("TrackItem"),p=h("Shelf"),S=h("search-item"),I=h("Item"),w=h("artist-item");return e(),o("div",Q,[i.loading?(e(),o("div",U,[T(u)])):(e(),o(d,{key:1},[i.tracks.length?(e(),n(p,{key:0,heading:"Songs"},{default:y(()=>[(e(!0),o(d,null,g(i.tracks,t=>(e(),n(k,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"]))),128))]),_:1})):_("",!0),i.spotifyTracks.length?(e(),n(p,{key:1,heading:"Songs (Spotify)"},{default:y(()=>[(e(!0),o(d,null,g(i.spotifyTracks,t=>(e(),n(S,{key:t.url,preview:t.preview,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["preview","cover","href","artist","title"]))),128))]),_:1})):_("",!0),i.youtubeTracks.length?(e(),n(p,{key:2,heading:"Songs (Youtube)"},{default:y(()=>[(e(!0),o(d,null,g(i.youtubeTracks,t=>(e(),n(S,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"]))),128))]),_:1})):_("",!0),i.artists.length?(e(),n(p,{key:3,heading:"Artists"},{default:y(()=>[(e(!0),o(d,null,g(i.artists,t=>(e(),n(I,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"]))),128))]),_:1})):_("",!0),i.spotifyArtists.length?(e(),n(p,{key:4,heading:"Artists (Spotify)"},{default:y(()=>[(e(!0),o(d,null,g(i.spotifyArtists,(t,A)=>(e(),n(w,{key:A,cover:t.cover,description:t.description,name:t.name,id:t.id,showFollowButton:!0},null,8,["cover","description","name","id"]))),128))]),_:1})):_("",!0)],64))])}const at=v(K,[["render",W],["__scopeId","data-v-15a58b97"]]);export{at as default};
