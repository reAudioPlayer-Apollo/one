import{A}from"./ArtistItem.26bead52.js";import{I as b}from"./ReleaseItem.7fcf4ea4.js";import{A as q}from"./AddSongToPlaylist.632a5288.js";import{_ as g,e as h,o as e,c as n,g as T,a,t as f,d as _,r as B,l as C,m as D,F as d,f as l,w as v,i as y}from"./index.475ed424.js";import{L}from"./Loader.ee15d9e7.js";import"./FindSources.65cd6c98.js";import"./SpotifyPlaylistEntry.943910b8.js";import"./MiniPlayer.b735e795.js";import"./SpotifyPlaylistHeader.809f80bb.js";import"./AddAlbumToPlaylist.efadc50d.js";const N={components:{AddSongToPlaylist:q},name:"SearchItem",methods:{redirect(){this.$refs.addAlbum.showModal=!0}},props:{cover:String,title:String,artist:String,releaseDate:String,href:String,preview:String}},V={class:"wrapper"},F=["src"],P={key:0,class:"note"};function E(i,o,r,m,s,c){const u=h("add-song-to-playlist");return e(),n("div",V,[T(u,{href:r.href,cover:r.cover,title:r.title,artist:r.artist,preview:r.preview,ref:"addAlbum"},null,8,["href","cover","title","artist","preview"]),a("div",{class:"item",onClick:o[0]||(o[0]=(...k)=>c.redirect&&c.redirect(...k))},[a("img",{src:r.cover},null,8,F),a("h4",null,f(r.title),1),a("p",null,f(r.artist),1),r.releaseDate?(e(),n("p",P,"Released on "+f(r.releaseDate),1)):_("",!0)])])}var M=g(N,[["render",E],["__scopeId","data-v-22efcb8d"]]);const O={name:"Shelf",props:{heading:String,href:String},methods:{redirect(){!this.href||this.$router.push(this.href)}}},j={class:"shelf"},J={key:0,class:"header"},K={class:"items"};function R(i,o,r,m,s,c){return e(),n("div",j,[r.heading?(e(),n("div",J,[a("h2",null,f(r.heading),1),a("h5",{onClick:o[0]||(o[0]=(...u)=>c.redirect&&c.redirect(...u))},"See All")])):_("",!0),a("div",K,[B(i.$slots,"default",{},void 0,!0)])])}var U=g(O,[["render",R],["__scopeId","data-v-7e2ab4bd"]]);const Y={name:"TrackItem",methods:{redirect(){console.log("redirect"),this.$router.push(this.href)}},props:{cover:String,title:String,artist:String,href:String}},$={class:"wrapper"},z=["src"];function G(i,o,r,m,s,c){return e(),n("div",$,[a("div",{class:"item",onClick:o[0]||(o[0]=(...u)=>c.redirect&&c.redirect(...u))},[a("img",{src:r.cover},null,8,z),a("h4",null,f(r.title),1),a("p",null,f(r.artist),1)])])}var H=g(Y,[["render",G],["__scopeId","data-v-7c9e5298"]]);const Q={name:"Search",components:{Shelf:U,Item:b,SearchItem:M,ArtistItem:A,TrackItem:H,Loader:L},data(){return{query:"",spotifyTracks:[],spotifyArtists:[],tracks:[],artists:[],youtubeTracks:[],loading:!1}},methods:{search(){this.query=this.$route.params.query,this.query&&(this.loading=!0,fetch("/api/search",{method:"POST",body:JSON.stringify({query:this.query})}).then(i=>i.json()).then(i=>{this.spotifyTracks.length=0,this.spotifyArtists.length=0,this.tracks.length=0,this.artists.length=0,this.youtubeTracks.length=0,this.spotifyTracks.push(...i.spotifyTracks||[]),this.spotifyArtists.push(...i.spotifyArtists||[]),this.tracks.push(...i.tracks||[]),this.artists.push(...i.artists||[]),this.youtubeTracks.push(...i.youtubeTracks||[]),this.loading=!1}))},enterText(i){i.key==="Enter"&&this.$router.push("/search/"+this.query)}},watch:{$route(){this.search()}},mounted(){this.search(),this.$refs.searchBox.focus()}},W={class:"search"},X={key:0,class:"fillPage"};function Z(i,o,r,m,s,c){const u=h("Loader"),k=h("TrackItem"),p=h("Shelf"),S=h("search-item"),x=h("Item"),I=h("artist-item");return e(),n("div",W,[C(a("input",{onKeyup:o[0]||(o[0]=(...t)=>c.enterText&&c.enterText(...t)),ref:"searchBox","onUpdate:modelValue":o[1]||(o[1]=t=>s.query=t),type:"text"},null,544),[[D,s.query]]),s.loading?(e(),n("div",X,[T(u)])):(e(),n(d,{key:1},[s.tracks.length?(e(),l(p,{key:0,heading:"Songs"},{default:v(()=>[(e(!0),n(d,null,y(s.tracks,t=>(e(),l(k,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"]))),128))]),_:1})):_("",!0),s.spotifyTracks.length?(e(),l(p,{key:1,heading:"Songs (Spotify)"},{default:v(()=>[(e(!0),n(d,null,y(s.spotifyTracks,t=>(e(),l(S,{key:t.url,preview:t.preview,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["preview","cover","href","artist","title"]))),128))]),_:1})):_("",!0),s.youtubeTracks.length?(e(),l(p,{key:2,heading:"Songs (Youtube)"},{default:v(()=>[(e(!0),n(d,null,y(s.youtubeTracks,t=>(e(),l(S,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"]))),128))]),_:1})):_("",!0),s.artists.length?(e(),l(p,{key:3,heading:"Artists"},{default:v(()=>[(e(!0),n(d,null,y(s.artists,t=>(e(),l(x,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"]))),128))]),_:1})):_("",!0),s.spotifyArtists.length?(e(),l(p,{key:4,heading:"Artists (Spotify)"},{default:v(()=>[(e(!0),n(d,null,y(s.spotifyArtists,(t,w)=>(e(),l(I,{key:w,cover:t.cover,description:t.description,name:t.name,id:t.id,showFollowButton:!0},null,8,["cover","description","name","id"]))),128))]),_:1})):_("",!0)],64))])}var ut=g(Q,[["render",Z],["__scopeId","data-v-c1119656"]]);export{ut as default};
