import{F as m,G as x}from"./FixedPlaylistHeader.d5958a58.js";import{P as k}from"./PlaylistEntry.95ea4d17.js";import{_ as b,o as c,c as d,b as p,n as N,j as P,w,a as i,t as H,F as C,d as S,e as T,l as D,p as V,h as B,g as r,i as F}from"./index.f20fcaa5.js";import"./EditSong.b1ef5974.js";import"./FindSources.f3661091.js";const I={components:{PlaylistEntry:k,FixedPlaylistHeader:m,GridHeader:x},name:"Tracks",data(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:"N/A"}},methods:{connect(){const t=this;console.log("attempting reconnect");let s=new WebSocket("ws://localhost:1234/ws");s.onclose=function(){console.log("ws closed"),setTimeout(this.connect,1e3)},s.onopen=()=>{console.log("ws connected")},s.onmessage=function(a){const l=JSON.parse(a.data);t.updateData(l)}},updateData(t){var s;if(t.path=="player.song"){let a=((s=t==null?void 0:t.data)==null?void 0:s.title)||"N/A";for(const l of this.playlist)l.playing=l.title==a}},headerVisibilityChanged(t){this.fixedHeaderHidden=t},updateTracks(){fetch("http://localhost:1234/api/collection/tracks").then(t=>t.json()).then(t=>{this.playlist=t.songs,this.playlistName=t.name,console.log(this.playlist),this.connect()})},loadPlaylist(){fetch("http://localhost:1234/api/loadPlaylist",{method:"POST",body:JSON.stringify({type:"collection"})})}}},_=t=>(V("data-v-388071ef"),t=t(),B(),t),E={class:"playlist"},O={class:"padding-20"},A=D("Playlist"),G=_(()=>i("h5",null,"My Description",-1)),J=_(()=>i("hr",null,null,-1)),z={class:"padding-20"},L={class:"grid"},M=_(()=>i("hr",null,null,-1)),W={class:"playlistEntries"};function q(t,s,a,l,o,n){const y=r("fixed-playlist-header"),u=r("h7"),f=r("grid-header"),v=r("playlist-entry"),g=F("observe-visibility");return c(),d("div",E,[p(y,{onClick:n.loadPlaylist,ref:"fixedHeading",class:N({hidden:o.fixedHeaderHidden}),title:o.playlistName},null,8,["onClick","class","title"]),P((c(),d("div",O,[p(u,null,{default:w(()=>[A]),_:1}),i("h1",null,H(o.playlistName),1),G])),[[g,n.headerVisibilityChanged]]),J,i("div",z,[i("span",{id:"loadPlaylist",onClick:s[0]||(s[0]=(...e)=>n.loadPlaylist&&n.loadPlaylist(...e)),class:"material-icons-outlined"},"play_circle_filled"),i("div",L,[p(f),M,i("div",W,[(c(!0),d(C,null,S(o.playlist,(e,h)=>(c(),T(v,{key:h,index:h,source:e.source,id:e.id,title:e.title,playing:e.playing,album:e.album,artist:e.artist,cover:e.cover,favourite:e.favourite,duration:e.duration},null,8,["index","source","id","title","playing","album","artist","cover","favourite","duration"]))),128))])])])])}var Y=b(I,[["render",q],["__scopeId","data-v-388071ef"]]);export{Y as default};
