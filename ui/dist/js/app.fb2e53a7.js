(function(t){function e(e){for(var i,l,a=e[0],r=e[1],s=e[2],d=0,b=[];d<a.length;d++)l=a[d],Object.prototype.hasOwnProperty.call(c,l)&&c[l]&&b.push(c[l][0]),c[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);u&&u(e);while(b.length)b.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,a=1;a<n.length;a++){var r=n[a];0!==c[r]&&(i=!1)}i&&(o.splice(e--,1),t=l(l.s=n[0]))}return t}var i={},c={app:0},o=[];function l(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=i,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(n,i,function(e){return t[e]}.bind(null,i));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var s=0;s<a.length;s++)e(a[s]);var u=r;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("c275")},"0156":function(t,e,n){"use strict";n("a12a")},"02f8":function(t,e,n){"use strict";n("447c")},"0bf6":function(t,e,n){},1352:function(t,e,n){"use strict";n("9e5d")},1919:function(t,e,n){},"1b69":function(t,e,n){"use strict";n("5231")},"1c98":function(t,e,n){},"1f5a":function(t,e,n){},"20ef":function(t,e,n){},"20f8":function(t,e,n){"use strict";n("e8ed")},2226:function(t,e,n){},"22ef":function(t,e,n){},"250c":function(t,e,n){"use strict";n("b117")},2875:function(t,e,n){"use strict";n("7d60")},2931:function(t,e,n){"use strict";n("707b")},"2a4f":function(t,e,n){"use strict";n("40ed")},3037:function(t,e,n){"use strict";n("9026")},"35aa":function(t,e,n){"use strict";n("c38c")},"40ed":function(t,e,n){},4186:function(t,e,n){},"420a":function(t,e,n){},"42df":function(t,e,n){"use strict";n("ac7c")},"447c":function(t,e,n){},"45f7":function(t,e,n){"use strict";n("4186")},"466a":function(t,e,n){"use strict";n("420a")},"4e80":function(t,e,n){},"4f3e":function(t,e,n){},"4fce":function(t,e,n){"use strict";n("1919")},5231:function(t,e,n){},"5c98":function(t,e,n){},"5d8e":function(t,e,n){},"63bb":function(t,e,n){"use strict";n("1c98")},"648f":function(t,e,n){"use strict";n("4e80")},6832:function(t,e,n){},"696c":function(t,e,n){},"6cec":function(t,e,n){},"6e05":function(t,e,n){"use strict";n("f096")},"707b":function(t,e,n){},"72bd":function(t,e,n){"use strict";n("bfae")},7910:function(t,e,n){"use strict";n("4f3e")},"7be9":function(t,e,n){"use strict";n("e511")},"7d60":function(t,e,n){},"81a1":function(t,e,n){"use strict";n("e4fc")},"886e":function(t,e,n){"use strict";n("5c98")},"8b2f":function(t,e,n){"use strict";n("6832")},9026:function(t,e,n){},"915a":function(t,e,n){"use strict";n("22ef")},"95fa":function(t,e,n){"use strict";n("2226")},"99a9":function(t,e,n){},"9e5d":function(t,e,n){},"9f1b":function(t,e,n){"use strict";n("f3b6")},a12a:function(t,e,n){},aac9:function(t,e,n){"use strict";n("696c")},ac7c:function(t,e,n){},ae21:function(t,e,n){},ae47:function(t,e,n){"use strict";n("20ef")},b117:function(t,e,n){},b177:function(t,e,n){"use strict";n("6cec")},b3fc:function(t,e,n){"use strict";n("ae21")},bfae:function(t,e,n){},c063:function(t,e,n){"use strict";n("99a9")},c16b:function(t,e,n){},c275:function(t,e,n){"use strict";n.r(e);var i=n("69be"),c={class:"appRoot"},o={class:"interface"};function l(t,e,n,l,a,r){var s=Object(i["I"])("Sidebar"),u=Object(i["I"])("Body"),d=Object(i["I"])("Player");return Object(i["A"])(),Object(i["h"])("div",c,[Object(i["i"])("div",o,[Object(i["l"])(s),Object(i["l"])(u)]),Object(i["l"])(d)])}var a={class:"body"};function r(t,e,n,c,o,l){var r=Object(i["I"])("router-view");return Object(i["A"])(),Object(i["h"])("div",a,[Object(i["l"])(r)])}var s={name:"Body"},u=(n("2875"),n("1c27")),d=n.n(u);const b=d()(s,[["render",r],["__scopeId","data-v-26006ec5"]]);var f=b,p=function(t){return Object(i["D"])("data-v-95b8353c"),t=t(),Object(i["B"])(),t},h={class:"player"},O={class:"left"},j=["src"],v={class:"titleartist"},y={class:"title"},m={class:"artist"},g={class:"centre"},S={class:"upper"},k=p((function(){return Object(i["i"])("span",{class:"material-icons-round defaultbtn"},"shuffle",-1)})),A=p((function(){return Object(i["i"])("span",{class:"material-icons-round defaultbtn"},"repeat",-1)})),P={class:"lower"},C={class:"positionLabel"},w={class:"positionLabel"},_={class:"right"},N=p((function(){return Object(i["i"])("span",{class:"material-icons-round defaultbtn"},"volume_up",-1)}));function I(t,e,n,c,o,l){return Object(i["A"])(),Object(i["h"])("div",h,[Object(i["i"])("div",O,[Object(i["i"])("img",{src:o.cover},null,8,j),Object(i["i"])("div",v,[Object(i["i"])("span",y,Object(i["N"])(o.title),1),Object(i["i"])("span",m,Object(i["N"])(o.artist),1)]),Object(i["i"])("span",{onClick:e[0]||(e[0]=function(t){return o.favourited=!o.favourited}),class:"favourite material-icons-round"},Object(i["N"])(o.favourited?"favorite":"favorite_border"),1)]),Object(i["i"])("div",g,[Object(i["i"])("div",S,[k,Object(i["i"])("span",{onClick:e[1]||(e[1]=function(t){return l.get("last")}),class:"material-icons-round defaultbtn"},"skip_previous"),Object(i["i"])("span",{onClick:e[2]||(e[2]=function(t){return l.get("playPause")}),class:"material-icons-round circle"},Object(i["N"])(o.playing?"pause_circle":"play_circle"),1),Object(i["i"])("span",{onClick:e[3]||(e[3]=function(t){return l.get("next")}),class:"material-icons-round defaultbtn"},"skip_next"),A]),Object(i["i"])("div",P,[Object(i["i"])("span",C,Object(i["N"])(o.progresslbl),1),Object(i["V"])(Object(i["i"])("input",{onChange:e[4]||(e[4]=function(){return l.progresschange&&l.progresschange.apply(l,arguments)}),"onUpdate:modelValue":e[5]||(e[5]=function(t){return o.progress=t}),max:"1000",type:"range",class:"progress"},null,544),[[i["R"],o.progress]]),Object(i["i"])("span",w,Object(i["N"])(o.durationStr),1)])]),Object(i["i"])("div",_,[N,Object(i["i"])("input",{onChange:e[6]||(e[6]=function(){return l.volumechange&&l.volumechange.apply(l,arguments)}),ref:"volume",type:"range",class:"volume"},null,544)])])}n("3efd"),n("dfac"),n("07e6"),n("e932"),n("500c"),n("f258"),n("c7c6");var x=n("a258"),T=n("5211"),M={name:"Player",props:{favourite:{type:Boolean,default:!1}},setup:function(){var t=Object(T["c"])();Object(x["a"])({keyEvent:"keydown",keyBinds:[{keyCode:"space",success:function(){return fetch("http://localhost:1234/api/playPause")},modifiers:["ctrlKey"]},{keyCode:"right",success:function(){return fetch("http://localhost:1234/api/next")},modifiers:["ctrlKey"]},{keyCode:"left",success:function(){return fetch("http://localhost:1234/api/last")},modifiers:["ctrlKey"]},{keyCode:49,success:function(){return t.push("/playlist/0")},modifiers:["altKey"]},{keyCode:50,success:function(){return t.push("/playlist/1")},modifiers:["altKey"]},{keyCode:51,success:function(){return t.push("/playlist/2")},modifiers:["altKey"]},{keyCode:52,success:function(){return t.push("/playlist/3")},modifiers:["altKey"]},{keyCode:53,success:function(){return t.push("/playlist/4")},modifiers:["altKey"]},{keyCode:54,success:function(){return t.push("/playlist/5")},modifiers:["altKey"]},{keyCode:55,success:function(){return t.push("/playlist/6")},modifiers:["altKey"]},{keyCode:56,success:function(){return t.push("/playlist/7")},modifiers:["altKey"]},{keyCode:57,success:function(){return t.push("/playlist/8")},modifiers:["altKey"]},{keyCode:58,success:function(){return t.push("/playlist/9")},modifiers:["altKey"]}]})},data:function(){var t=this,e=this;function n(){console.log("attempting reconnect");var t=new WebSocket("ws://localhost:1234/ws");t.onclose=function(){console.log("ws closed"),setTimeout(n,1e3)},t.onopen=function(){console.log("ws connected")},t.onmessage=function(t){var n=JSON.parse(t.data);e.updateData(n)}}return n(),setInterval((function(){if(e.playing){var t=60*Number(e.durationStr.split(":")[0])+Number(e.durationStr.split(":")[1]),n=60*Number(e.progresslbl.split(":")[0])+Number(e.progresslbl.split(":")[1]);n+=1,e.progress=n/t*1e3,e.progresslbl="".concat(Math.floor(n/60),":").concat(e.zeroPad(n%60,2))}}),1e3),fetch("http://localhost:1234/api/getVolume").then((function(t){return t.text()})).then((function(e){t.$refs.volume.value=e})),{favourited:this.favourite,title:"N/A",artist:"N/A",durationStr:"0:00",cover:"/assets/img/music_placeholder.png",playing:!1,progress:0,progresslbl:"0:00"}},methods:{playPause:function(){console.log("playpause"),this.get("playPause")},get:function(t){fetch("http://localhost:1234/api/".concat(t))},volumechange:function(){fetch("http://localhost:1234/api/setVolume",{method:"POST",body:JSON.stringify({value:this.$refs.volume.value})})},zeroPad:function(t,e){return String(t).padStart(e,"0")},progresschange:function(){var t=60*Number(this.durationStr.split(":")[0])+Number(this.durationStr.split(":")[1]),e=this.progress*t/1e3;this.progresslbl="".concat(Math.floor(e/60),":").concat(this.zeroPad(Math.round(e%60),2)),fetch("http://localhost:1234/api/setPos",{method:"POST",body:JSON.stringify({value:e})})},updateData:function(t){var e,n,i,c;if("player.song"==t.path)return this.title=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.title)||"N/A",this.artist=(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.artist)||"N/A",this.durationStr=(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.duration)||"N/A",this.cover=(null===t||void 0===t||null===(c=t.data)||void 0===c?void 0:c.cover)||"/assets/img/music_placeholder.png",void(this.progresslbl="0:00");if("player.playState"!=t.path){if("player.posSync"==t.path){var o=(null===t||void 0===t?void 0:t.data)||0;this.progresslbl="".concat(Math.floor(o/60),":").concat(this.zeroPad(Math.round(o%60),2))}}else this.playing=(null===t||void 0===t?void 0:t.data)||!1}}};n("7910");const $=d()(M,[["render",I],["__scopeId","data-v-95b8353c"]]);var V=$,U=(n("a15b"),function(t){return Object(i["D"])("data-v-5333d6ad"),t=t(),Object(i["B"])(),t}),H={class:"sidebar"},D=U((function(){return Object(i["i"])("h2",null,"reAudioPlayer Online",-1)})),R=U((function(){return Object(i["i"])("br",null,null,-1)})),B=U((function(){return Object(i["i"])("br",null,null,-1)})),J=U((function(){return Object(i["i"])("hr",null,null,-1)})),E={class:"playlistList"};function F(t,e,n,c,o,l){var a=Object(i["I"])("nav-entry"),r=Object(i["I"])("router-link");return Object(i["A"])(),Object(i["h"])("div",H,[D,R,Object(i["l"])(a,{href:"/",icon:"home",name:"Home"}),Object(i["l"])(a,{href:"/search",icon:"search",name:"Search"}),Object(i["l"])(a,{href:"/collection/playlists",icon:"library_music",name:"Your Library"}),B,Object(i["l"])(a,{href:"/playlist/create",icon:"add_circle",name:"Create Playlist"}),Object(i["l"])(a,{href:"/collection/tracks",icon:"favorite",name:"Liked Songs"}),J,Object(i["i"])("div",E,[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.playlists,(function(t,e){return Object(i["A"])(),Object(i["f"])(r,{key:e,to:t.href},{default:Object(i["U"])((function(){return[Object(i["k"])(Object(i["N"])(t.name),1)]})),_:2},1032,["to"])})),128))])])}var L={class:"navEntry"},G={class:"material-icons-round icon"},K={class:"name"};function q(t,e,n,c,o,l){var a=Object(i["I"])("router-link");return Object(i["A"])(),Object(i["f"])(a,{class:"link",to:n.href},{default:Object(i["U"])((function(){return[Object(i["i"])("div",L,[Object(i["i"])("span",G,Object(i["N"])(n.icon),1),Object(i["i"])("span",K,Object(i["N"])(n.name),1)])]})),_:1},8,["to"])}var Y={name:"NavEntry",props:{icon:String,name:String,href:String}};n("35aa");const z=d()(Y,[["render",q],["__scopeId","data-v-0737c4a2"]]);var W=z,Q={name:"Sidebar",components:{NavEntry:W},data:function(){var t=this;return fetch("http://localhost:1234/api/playlists").then((function(t){return t.json()})).then((function(e){for(var n=0;n<e.length;n++)t.playlists.push({name:e[n],href:"/playlist/".concat(n)})})),{playlists:[]}}};n("f69d");const X=d()(Q,[["render",F],["__scopeId","data-v-5333d6ad"]]);var Z=X,tt=(n("1a57"),{name:"App",components:{Sidebar:Z,Body:f,Player:V}});n("cc3ae"),n("2931");const et=d()(tt,[["render",l]]);var nt=et,it=n("50c9"),ct=n("5e83"),ot={class:"home"};function lt(t,e,n,c,o,l){return Object(i["A"])(),Object(i["h"])("div",ot," Home ")}var at={name:"Home"};const rt=d()(at,[["render",lt]]);var st=rt,ut=function(t){return Object(i["D"])("data-v-ddcfedbe"),t=t(),Object(i["B"])(),t},dt={class:"playlist"},bt=Object(i["k"])("Playlist"),ft=ut((function(){return Object(i["i"])("hr",null,null,-1)})),pt={class:"padding-20"},ht={class:"grid"},Ot=ut((function(){return Object(i["i"])("hr",null,null,-1)})),jt={class:"playlistEntries"};function vt(t,e,n,c,o,l){var a=Object(i["I"])("AddSong"),r=Object(i["I"])("EditPlaylist"),s=Object(i["I"])("fixed-playlist-header"),u=Object(i["I"])("h7"),d=Object(i["I"])("grid-header"),b=Object(i["I"])("playlist-entry"),f=Object(i["J"])("observe-visibility");return Object(i["A"])(),Object(i["h"])("div",dt,[Object(i["l"])(a,{onClose:l.updatePlaylist,ref:"addSongPopup"},null,8,["onClose"]),Object(i["l"])(r,{onClose:l.updatePlaylist,playlistName:o.playlistName,playlistDescription:o.playlistDescription,ref:"editPlaylistPopup"},null,8,["onClose","playlistName","playlistDescription"]),Object(i["l"])(s,{onClick:l.loadPlaylist,ref:"fixedHeading",class:Object(i["u"])({hidden:o.fixedHeaderHidden}),title:o.playlistName},null,8,["onClick","class","title"]),Object(i["V"])((Object(i["A"])(),Object(i["h"])("div",{class:"padding-20 playlisteditor",onClick:e[0]||(e[0]=function(){return l.editPlaylist&&l.editPlaylist.apply(l,arguments)})},[Object(i["l"])(u,null,{default:Object(i["U"])((function(){return[bt]})),_:1}),Object(i["i"])("h1",null,Object(i["N"])(o.playlistName),1),Object(i["i"])("h5",null,Object(i["N"])(o.playlistDescription),1)])),[[f,l.headerVisibilityChanged]]),ft,Object(i["i"])("div",pt,[Object(i["i"])("span",{id:"loadPlaylist",onClick:e[1]||(e[1]=function(){return l.loadPlaylist&&l.loadPlaylist.apply(l,arguments)}),class:"material-icons-outlined"},"play_circle_filled"),Object(i["i"])("span",{id:"addToPlaylist",onClick:e[2]||(e[2]=function(){return l.addToPlaylist&&l.addToPlaylist.apply(l,arguments)}),class:"material-icons-outlined"},"add_circle"),Object(i["i"])("div",ht,[Object(i["l"])(d),Ot,Object(i["i"])("div",jt,[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.playlist,(function(t,e){return Object(i["A"])(),Object(i["f"])(b,{key:e,index:e,source:t.source,playing:t.playing,id:t.id,title:t.title,album:t.album,artist:t.artist,cover:t.cover,favourite:t.favourite,duration:t.duration},null,8,["index","source","playing","id","title","album","artist","cover","favourite","duration"])})),128))])])])])}var yt=n("afa6"),mt=n("1494"),gt=(n("a623"),n("4228"),n("526b"),{class:"fixedPlaylistHeader"}),St={class:"upperWrapper"};function kt(t,e,n,c,o,l){var a=this,r=Object(i["I"])("grid-header");return Object(i["A"])(),Object(i["h"])("div",gt,[Object(i["i"])("div",St,[Object(i["i"])("span",{id:"loadPlaylist",onClick:e[0]||(e[0]=function(t){return a.$emit("click")}),class:"material-icons-outlined"},"play_circle_filled"),Object(i["i"])("h3",null,Object(i["N"])(n.title),1)]),Object(i["l"])(r,{class:"padding-20 darkback"})])}var At=function(t){return Object(i["D"])("data-v-e629699e"),t=t(),Object(i["B"])(),t},Pt={class:"gridHeader"},Ct=At((function(){return Object(i["i"])("span",{class:"id"},"#",-1)})),wt=At((function(){return Object(i["i"])("span",{class:"title"},"Title",-1)})),_t=At((function(){return Object(i["i"])("span",{class:"album"},"Album",-1)})),Nt=At((function(){return Object(i["i"])("span",{class:"clock material-icons-round"},"schedule",-1)})),It=[Ct,wt,_t,Nt];function xt(t,e,n,c,o,l){return Object(i["A"])(),Object(i["h"])("div",Pt,It)}var Tt={name:"GridHeader"};n("466a");const Mt=d()(Tt,[["render",xt],["__scopeId","data-v-e629699e"]]);var $t=Mt,Vt={name:"FixedPlaylistHeader",components:{GridHeader:$t},props:{title:String}};n("c063");const Ut=d()(Vt,[["render",kt],["__scopeId","data-v-06795e71"]]);var Ht=Ut,Dt={class:"track"},Rt=["src"],Bt={class:"trackwrapper"},Jt={class:"duration"};function Et(t,e,n,c,o,l){var a=Object(i["I"])("EditSong"),r=Object(i["I"])("SongCtx");return Object(i["A"])(),Object(i["f"])(r,{onRemove:l.remove,onUpdate:l.update,onLike:e[7]||(e[7]=function(t){return o.favourited=!o.favourited}),isAutoPlaylist:o.isAutoPlaylist,liked:o.favourited,ref:"ctxMenu"},{default:Object(i["U"])((function(){return[Object(i["l"])(a,{onClose:t.updatePlaylist,ref:"editSongPopup",cover:n.cover,id:n.id,title:n.title,album:n.album,artist:n.artist,source:n.source},null,8,["onClose","cover","id","title","album","artist","source"]),Object(i["i"])("div",{onDblclick:e[3]||(e[3]=function(){l.playAt(),l.onselect()}),onClick:e[4]||(e[4]=function(){return l.onselect&&l.onselect.apply(l,arguments)}),onMouseover:e[5]||(e[5]=function(){return l.displayPlay&&l.displayPlay.apply(l,arguments)}),onMouseleave:e[6]||(e[6]=function(){return l.displayId&&l.displayId.apply(l,arguments)}),class:Object(i["u"])(["playlistEntry",{selected:o.highlighted}])},[Object(i["i"])("span",{onClick:e[0]||(e[0]=function(){return l.playAt&&l.playAt.apply(l,arguments)}),ref:"idOrPlay",class:Object(i["u"])([{playing:n.playing},"id"])},Object(i["N"])(n.index+1),3),Object(i["i"])("div",Dt,[Object(i["i"])("img",{src:n.cover||"/assets/img/music_placeholder.png"},null,8,Rt),Object(i["i"])("div",Bt,[Object(i["i"])("span",{class:Object(i["u"])(["title",{playing:n.playing}])},Object(i["N"])(n.title),3),Object(i["i"])("span",{class:Object(i["u"])(["artist",{playing:n.playing}])},Object(i["N"])(n.artist),3)])]),Object(i["i"])("span",{class:Object(i["u"])(["album",{playing:n.playing}])},Object(i["N"])(n.album),3),Object(i["i"])("span",{onClick:e[1]||(e[1]=function(t){return o.favourited=!o.favourited}),class:Object(i["u"])(["favourite material-icons-round",{showfavourite:o.favourited||o.highlighted}])},Object(i["N"])(o.favourited?"favorite":"favorite_border"),3),Object(i["i"])("span",Jt,Object(i["N"])(n.duration),1),Object(i["i"])("span",{onClick:e[2]||(e[2]=function(){return l.showCtxMenu&&l.showCtxMenu.apply(l,arguments)}),class:Object(i["u"])(["more material-icons-round",{hidden:!o.highlighted}])},"more_horiz",2)],34)]})),_:1},8,["onRemove","onUpdate","isAutoPlaylist","liked"])}var Ft={ref:"box"},Lt=Object(i["k"])("Remove from this playlist"),Gt=Object(i["k"])("Add to playlist"),Kt=Object(i["k"])("Update Metadata"),qt=Object(i["k"])("Share");function Yt(t,e,n,c,o,l){var a=Object(i["I"])("v-contextmenu-item"),r=Object(i["I"])("v-contextmenu-divider"),s=Object(i["I"])("v-contextmenu"),u=Object(i["J"])("contextmenu");return Object(i["V"])((Object(i["A"])(),Object(i["h"])("div",Ft,[Object(i["H"])(t.$slots,"default"),Object(i["l"])(s,{ref:"contextmenu"},{default:Object(i["U"])((function(){return[Object(i["l"])(a,{onClick:l.like},{default:Object(i["U"])((function(){return[Object(i["k"])(Object(i["N"])((n.liked?"Remove from":"Save to")+" your Liked Songs"),1)]})),_:1},8,["onClick"]),n.isAutoPlaylist?Object(i["g"])("",!0):(Object(i["A"])(),Object(i["f"])(a,{key:0,onClick:l.remove},{default:Object(i["U"])((function(){return[Lt]})),_:1},8,["onClick"])),Object(i["l"])(a,{onClick:l.addto},{default:Object(i["U"])((function(){return[Gt]})),_:1},8,["onClick"]),Object(i["l"])(r),Object(i["l"])(a,{onClick:l.update},{default:Object(i["U"])((function(){return[Kt]})),_:1},8,["onClick"]),Object(i["l"])(r),Object(i["l"])(a,{onClick:l.share},{default:Object(i["U"])((function(){return[qt]})),_:1},8,["onClick"])]})),_:1},512)])),[[u,void 0,"contextmenu"]])}var zt={name:"SongCtx",props:{liked:Boolean,isAutoPlaylist:Boolean},methods:{hide:function(){this.$refs.contextmenu.hide()},show:function(t){var e=this.$refs.box.getBoundingClientRect(),n={top:e.height+e.top+window.scrollY,left:e.width+e.left+window.scrollX};this.$refs.contextmenu.show(n),null===t||void 0===t||t.stopPropagation()},like:function(){this.$emit("like")},remove:function(){this.$emit("remove")},addto:function(){this.$emit("addto")},share:function(){this.$emit("share")},update:function(){this.$emit("update")}}};const Wt=d()(zt,[["render",Yt]]);var Qt=Wt,Xt=function(t){return Object(i["D"])("data-v-8ac1ad8c"),t=t(),Object(i["B"])(),t},Zt={class:"wrapper"},te={class:"header"},ee=Xt((function(){return Object(i["i"])("h3",null,"Edit song",-1)})),ne=Xt((function(){return Object(i["i"])("span",{class:"material-icons-round"}," close ",-1)})),ie=[ne],ce=Xt((function(){return Object(i["i"])("h4",null,"Source",-1)})),oe={class:"content"},le=Xt((function(){return Object(i["i"])("h4",null,"Title",-1)})),ae={class:"content"},re=Xt((function(){return Object(i["i"])("h4",null,"Album",-1)})),se={class:"content"},ue=Xt((function(){return Object(i["i"])("h4",null,"Artist",-1)})),de={class:"content"},be=Xt((function(){return Object(i["i"])("h4",null,"Cover",-1)})),fe={class:"content"},pe=["src"],he={class:"confirm"};function Oe(t,e,n,c,o,l){var a=Object(i["I"])("FindSources"),r=Object(i["I"])("vue-final-modal");return Object(i["A"])(),Object(i["h"])("div",null,[Object(i["l"])(r,{onClick:l.hideFindSourcesCtx,modelValue:o.showModal,"onUpdate:modelValue":e[10]||(e[10]=function(t){return o.showModal=t}),classes:"modal-container","content-class":"modal-content"},{default:Object(i["U"])((function(){return[Object(i["i"])("div",Zt,[Object(i["i"])("div",te,[ee,Object(i["i"])("button",{class:"modal-close",onClick:e[0]||(e[0]=function(t){return o.showModal=!1})},ie)]),ce,Object(i["l"])(a,{ref:"findSourcesEdit",title:n.title,artist:n.artist},{default:Object(i["U"])((function(){return[Object(i["i"])("div",oe,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.dSource=t}),onChange:e[2]||(e[2]=function(){return l.loadMetadata&&l.loadMetadata.apply(l,arguments)}),type:"text",ref:"source"},null,544),[[i["R"],o.dSource]]),Object(i["i"])("span",{class:"material-icons-round more",ref:"sourceMore",onClick:e[3]||(e[3]=function(){return l.opencontextmenu&&l.opencontextmenu.apply(l,arguments)})},"more_vert",512)])]})),_:1},8,["title","artist"]),le,Object(i["i"])("div",ae,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[4]||(e[4]=function(t){return o.dTitle=t}),type:"text"},null,512),[[i["R"],o.dTitle]])]),re,Object(i["i"])("div",se,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[5]||(e[5]=function(t){return o.dAlbum=t}),type:"text",ref:"album"},null,512),[[i["R"],o.dAlbum]])]),ue,Object(i["i"])("div",de,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[6]||(e[6]=function(t){return o.dArtist=t}),type:"text"},null,512),[[i["R"],o.dArtist]])]),be,Object(i["i"])("div",fe,[Object(i["V"])(Object(i["i"])("input",{type:"text",class:"addSong cover","onUpdate:modelValue":e[7]||(e[7]=function(t){return o.dCover=t}),ref:"cover"},null,512),[[i["R"],o.dCover]]),Object(i["i"])("img",{onClick:e[8]||(e[8]=function(){return l.openInNewTab&&l.openInNewTab.apply(l,arguments)}),class:"addSong cover",src:n.cover?n.cover:"/assets/img/music_placeholder.png"},null,8,pe)]),Object(i["i"])("div",he,[Object(i["i"])("button",{onClick:e[9]||(e[9]=function(){return l.add&&l.add.apply(l,arguments)}),class:"negative"},"Save")])])]})),_:1},8,["onClick","modelValue"])])}n("ed98");var je={ref:"box"},ve=Object(i["k"])("Soundcloud"),ye=Object(i["k"])("Audius"),me=Object(i["k"])("Youtube Music"),ge=Object(i["k"])("Spotify");function Se(t,e,n,c,o,l){var a=Object(i["I"])("v-contextmenu-item"),r=Object(i["I"])("v-contextmenu-submenu"),s=Object(i["I"])("v-contextmenu"),u=Object(i["J"])("contextmenu");return Object(i["V"])((Object(i["A"])(),Object(i["h"])("div",je,[Object(i["H"])(t.$slots,"default"),Object(i["l"])(s,{ref:"contextmenu"},{default:Object(i["U"])((function(){return[Object(i["l"])(r,{title:"Search on"},{default:Object(i["U"])((function(){return[Object(i["l"])(a,{onClick:l.openSoundcloud},{default:Object(i["U"])((function(){return[ve]})),_:1},8,["onClick"]),Object(i["l"])(a,{onClick:l.openAudius},{default:Object(i["U"])((function(){return[ye]})),_:1},8,["onClick"]),Object(i["l"])(a,{onClick:l.openYoutubeMusic},{default:Object(i["U"])((function(){return[me]})),_:1},8,["onClick"]),Object(i["l"])(a,{onClick:l.openSpotify},{default:Object(i["U"])((function(){return[ge]})),_:1},8,["onClick"])]})),_:1})]})),_:1},512)])),[[u,void 0,"contextmenu"]])}var ke={name:"FindSources",props:{artist:String,title:String},methods:{hide:function(){this.$refs.contextmenu.hide()},show:function(t){var e=this.$refs.box.getBoundingClientRect(),n={top:e.height+e.top+window.scrollY,left:e.width+e.left+window.scrollX};this.$refs.contextmenu.show(n),null===t||void 0===t||t.stopPropagation()},openSoundcloud:function(){window.open("https://soundcloud.com/search?q=".concat(this.artist," ").concat(this.title))},openAudius:function(){window.open("https://audius.co/search/".concat(this.artist," ").concat(this.title))},openYoutubeMusic:function(){window.open("https://music.youtube.com/search?q=".concat(this.artist," ").concat(this.title))},openSpotify:function(){window.open("https://open.spotify.com/search/".concat(this.artist," ").concat(this.title))}}};const Ae=d()(ke,[["render",Se]]);var Pe=Ae,Ce={name:"EditSong",components:{FindSources:Pe},props:{cover:String,album:String,artist:String,source:String,title:String,id:Number},data:function(){return{showModal:!1,dCover:this.cover,dAlbum:this.album,dArtist:this.artist,dTitle:this.title,dSource:this.source}},methods:{opencontextmenu:function(t){this.$refs.findSourcesEdit.show(t)},hideFindSourcesCtx:function(){this.$refs.findSourcesEdit.hide()},add:function(){var t=this;this.showModal=!1,console.log("fetch"),fetch("http://localhost:1234/api/updateSong",{method:"POST",body:JSON.stringify({id:this.id,source:this.dSource,title:this.dTitle,artist:this.dArtist,album:this.dAlbum,cover:this.dCover})}).then((function(e){console.log(e),t.$emit("close")}))},loadMetadata:function(){var t=this;fetch("http://localhost:1234/api/metadata",{method:"POST",body:JSON.stringify({url:this.$refs.source.value})}).then((function(t){return t.json()})).then((function(e){console.log(e),t.dTitle=e.title,t.dAlbum=e.album,t.dArtist=e.artists.join(", "),t.dCover=e.cover,t.dSource=e.src}))},openInNewTab:function(){window.open(this.cover?this.cover:"/assets/img/music_placeholder.png")}},watch:{id:function(){this.dCover=this.cover,this.dAlbum=this.album,this.dArtist=this.artist,this.dTitle=this.title,this.dSource=this.source}}};n("20f8"),n("0156");const we=d()(Ce,[["render",Oe],["__scopeId","data-v-8ac1ad8c"]]);var _e=we,Ne={name:"PlaylistEntry",components:{SongCtx:Qt,EditSong:_e},props:{index:Number,id:Number,source:String,artist:{type:String,default:"N/A"},cover:{type:String,default:"/assets/img/music_placeholder.png"},title:{type:String,default:"N/A"},album:{type:String,default:"N/A"},duration:{type:String,default:"N/A"},favourite:{type:Boolean,default:!1},playing:{type:Boolean,default:!1}},data:function(){return{highlighted:!1,favourited:this.favourite,isAutoPlaylist:"/collection/tracks"==this.$route.path}},methods:{remove:function(){fetch("http://localhost:1234/api/remove",{method:"POST",body:JSON.stringify({playlistId:Number(this.$route.params.id),songId:this.id})})},update:function(){this.$refs.editSongPopup.showModal=!0},hideCtxMenu:function(){this.$refs.ctxMenu.hide()},showCtxMenu:function(t){console.log("show"),this.$refs.ctxMenu.show(t)},onselect:function(){this.highlighted=!this.highlighted,this.hideCtxMenu()},displayPlay:function(){var t=this.$refs.idOrPlay;t.innerHTML="play_arrow",t.classList.add("material-icons-round")},displayId:function(){var t=this.$refs.idOrPlay;t.innerHTML=this.index+1,t.classList.remove("material-icons-round")},playAt:function(){fetch("http://localhost:1234/api/at",{method:"POST",body:JSON.stringify({index:this.index})})},setFavourite:function(){fetch("http://localhost:1234/api/updateSong",{method:"POST",body:JSON.stringify({id:this.id,favourite:this.favourited,album:this.album,artist:this.artist,title:this.title,duration:this.duration,cover:this.cover,source:this.source})})}},watch:{favourited:function(){this.setFavourite()},favourite:function(){console.log("mounted",this.title,this.favourite,this.favourited),this.favourited=this.favourite,this.highlighted=!1}}};n("1b69");const Ie=d()(Ne,[["render",Et],["__scopeId","data-v-f859ac52"]]);var xe=Ie,Te=function(t){return Object(i["D"])("data-v-5fa35514"),t=t(),Object(i["B"])(),t},Me={class:"wrapper"},$e={class:"header"},Ve=Te((function(){return Object(i["i"])("h3",null,"Add song",-1)})),Ue=Te((function(){return Object(i["i"])("span",{class:"material-icons-round"}," close ",-1)})),He=[Ue],De=Te((function(){return Object(i["i"])("h4",null,"Source",-1)})),Re={class:"content"},Be=Te((function(){return Object(i["i"])("h4",null,"Title",-1)})),Je={class:"content"},Ee=Te((function(){return Object(i["i"])("h4",null,"Album",-1)})),Fe={class:"content"},Le={type:"text",ref:"album"},Ge=Te((function(){return Object(i["i"])("h4",null,"Artist",-1)})),Ke={class:"content"},qe=Te((function(){return Object(i["i"])("h4",null,"Cover",-1)})),Ye={class:"content"},ze=["src"],We={class:"confirm"};function Qe(t,e,n,c,o,l){var a=Object(i["I"])("FindSources"),r=Object(i["I"])("vue-final-modal");return Object(i["A"])(),Object(i["h"])("div",null,[Object(i["l"])(r,{onClick:l.hideFindSourcesCtx,modelValue:o.showModal,"onUpdate:modelValue":e[8]||(e[8]=function(t){return o.showModal=t}),classes:"modal-container","content-class":"modal-content"},{default:Object(i["U"])((function(){return[Object(i["i"])("div",Me,[Object(i["i"])("div",$e,[Ve,Object(i["i"])("button",{class:"modal-close",onClick:e[0]||(e[0]=function(t){return o.showModal=!1})},He)]),De,Object(i["l"])(a,{ref:"findSources",title:o.title,artist:o.artist},{default:Object(i["U"])((function(){return[Object(i["i"])("div",Re,[Object(i["i"])("input",{onChange:e[1]||(e[1]=function(){return l.loadMetadata&&l.loadMetadata.apply(l,arguments)}),type:"text",ref:"source"},null,544),Object(i["i"])("span",{class:"material-icons-round more",ref:"sourceMore",onClick:e[2]||(e[2]=function(){return l.opencontextmenu&&l.opencontextmenu.apply(l,arguments)})},"more_vert",512)])]})),_:1},8,["title","artist"]),Be,Object(i["i"])("div",Je,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[3]||(e[3]=function(t){return o.title=t}),type:"text"},null,512),[[i["R"],o.title]])]),Ee,Object(i["i"])("div",Fe,[Object(i["i"])("input",Le,null,512)]),Ge,Object(i["i"])("div",Ke,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[4]||(e[4]=function(t){return o.artist=t}),type:"text"},null,512),[[i["R"],o.artist]])]),qe,Object(i["i"])("div",Ye,[Object(i["V"])(Object(i["i"])("input",{type:"text",class:"addSong cover","onUpdate:modelValue":e[5]||(e[5]=function(t){return o.cover=t}),ref:"cover"},null,512),[[i["R"],o.cover]]),Object(i["i"])("img",{onClick:e[6]||(e[6]=function(){return l.openInNewTab&&l.openInNewTab.apply(l,arguments)}),class:"addSong cover",src:o.cover?o.cover:"/assets/img/music_placeholder.png"},null,8,ze)]),Object(i["i"])("div",We,[Object(i["i"])("button",{onClick:e[7]||(e[7]=function(){return l.add&&l.add.apply(l,arguments)}),class:"negative"},"Add")])])]})),_:1},8,["onClick","modelValue"])])}var Xe={name:"AddSong",components:{FindSources:Pe},data:function(){return{showModal:!1,cover:"",artist:"",title:""}},methods:{opencontextmenu:function(t){this.$refs.findSources.show(t)},hideFindSourcesCtx:function(){this.$refs.findSources.hide()},add:function(){var t=this;this.showModal=!1,console.log("fetch"),fetch("http://localhost:1234/api/add",{method:"POST",body:JSON.stringify({id:Number(this.$route.params.id),source:this.$refs.source.value,title:this.title,artist:this.artist,album:this.$refs.album.value,cover:this.cover})}).then((function(e){console.log(e),t.$emit("close")}))},loadMetadata:function(){var t=this;fetch("http://localhost:1234/api/metadata",{method:"POST",body:JSON.stringify({url:this.$refs.source.value})}).then((function(t){return t.json()})).then((function(e){console.log(e),t.title=e.title,t.$refs.album.value=e.album,t.artist=e.artists.join(", "),t.cover=e.cover,t.$refs.source.value=e.src}))},openInNewTab:function(){window.open(this.cover?this.cover:"/assets/img/music_placeholder.png")}}};n("2a4f"),n("3037");const Ze=d()(Xe,[["render",Qe],["__scopeId","data-v-5fa35514"]]);var tn=Ze,en=function(t){return Object(i["D"])("data-v-c6960088"),t=t(),Object(i["B"])(),t},nn={class:"wrapper"},cn={class:"header"},on=en((function(){return Object(i["i"])("h3",null,"Edit details",-1)})),ln=en((function(){return Object(i["i"])("span",{class:"material-icons-round"}," close ",-1)})),an=[ln],rn=en((function(){return Object(i["i"])("h4",null,"Name",-1)})),sn={class:"content"},un=en((function(){return Object(i["i"])("h4",null,"Description",-1)})),dn={class:"content"},bn={class:"confirm"};function fn(t,e,n,c,o,l){var a=Object(i["I"])("vue-final-modal");return Object(i["A"])(),Object(i["h"])("div",null,[Object(i["l"])(a,{modelValue:o.showModal,"onUpdate:modelValue":e[4]||(e[4]=function(t){return o.showModal=t}),classes:"modal-container","content-class":"modal-content"},{default:Object(i["U"])((function(){return[Object(i["i"])("div",nn,[Object(i["i"])("div",cn,[on,Object(i["i"])("button",{class:"modal-close",onClick:e[0]||(e[0]=function(t){return o.showModal=!1})},an)]),rn,Object(i["i"])("div",sn,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.name=t}),type:"text",ref:"name"},null,512),[[i["R"],o.name]])]),un,Object(i["i"])("div",dn,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return o.description=t}),type:"text",ref:"description"},null,512),[[i["R"],o.description]])]),Object(i["i"])("div",bn,[Object(i["i"])("button",{onClick:e[3]||(e[3]=function(){return l.apply&&l.apply.apply(l,arguments)}),class:"negative"},"Save")])])]})),_:1},8,["modelValue"])])}var pn={name:"EditPlaylist",props:{playlistName:String,playlistDescription:String},data:function(){return{showModal:!1,cover:"",name:this.playlistName,description:this.playlistDescription}},methods:{apply:function(){var t=this;this.showModal=!1,console.log("fetch"),fetch("http://localhost:1234/api/updatePlaylist",{method:"POST",body:JSON.stringify({id:Number(this.$route.params.id),name:this.name,description:this.description})}).then((function(e){console.log(e),t.$emit("close")}))}},watch:{playlistName:function(){this.name=this.playlistName},playlistDescription:function(){this.description=this.playlistDescription}}};n("915a"),n("6e05");const hn=d()(pn,[["render",fn],["__scopeId","data-v-c6960088"]]);var On=hn,jn={components:{PlaylistEntry:xe,FixedPlaylistHeader:Ht,GridHeader:$t,AddSong:tn,EditPlaylist:On},name:"Playlist",data:function(){return this.updatePlaylist(),{fixedHeaderHidden:!0,playlist:[],playlistName:"N/A",playlistDescription:""}},methods:{connect:function(){var t=this;console.log("attempting reconnect");var e=new WebSocket("ws://localhost:1234/ws");e.onclose=function(){console.log("ws closed"),setTimeout(this.connect,1e3)},e.onopen=function(){console.log("ws connected")},e.onmessage=function(e){var n=JSON.parse(e.data);t.updateData(n)}},headerVisibilityChanged:function(t){this.fixedHeaderHidden=t},addToPlaylist:function(){this.$refs.addSongPopup.showModal=!0},editPlaylist:function(){this.$refs.editPlaylistPopup.showModal=!0},updateData:function(t){if("player.song"==t.path){var e;console.log(this.playlist.length,t);var n,i=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.title)||"N/A",c=Object(mt["a"])(this.playlist);try{for(c.s();!(n=c.n()).done;){var o=n.value;o.playing=o.title==i}}catch(l){c.e(l)}finally{c.f()}}},updatePlaylist:function(){var t=this;this.$route.params.id&&("create"!=this.$route.params.id?fetch("http://localhost:1234/api/playlist",{method:"POST",body:JSON.stringify({id:Number(this.$route.params.id)})}).then(function(){var e=Object(yt["a"])(regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(404!=n.status){e.next=3;break}return t.$router.push("/"),e.abrupt("return");case 3:return e.next=5,n.json();case 5:i=e.sent,t.playlist=i.songs,t.playlistName=i.name,t.playlistDescription=i.description,console.log(t.playlist),t.connect();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):fetch("http://localhost:1234/api/playlist/create").then((function(t){return t.text()})).then((function(e){console.log(e),t.$router.push(e)})))},loadPlaylist:function(){fetch("http://localhost:1234/api/loadPlaylist",{method:"POST",body:JSON.stringify({id:Number(this.$route.params.id)})})}},watch:{$route:function(){this.updatePlaylist()}}};n("e51d");const vn=d()(jn,[["render",vt],["__scopeId","data-v-ddcfedbe"]]);var yn=vn,mn={class:"search"};function gn(t,e,n,c,o,l){var a=Object(i["I"])("Item"),r=Object(i["I"])("Shelf");return Object(i["A"])(),Object(i["h"])("div",mn,[Object(i["V"])(Object(i["i"])("input",{onKeyup:e[0]||(e[0]=function(){return l.enterText&&l.enterText.apply(l,arguments)}),"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.query=t}),type:"text"},null,544),[[i["R"],o.query]]),o.tracks.length?(Object(i["A"])(),Object(i["f"])(r,{key:0,heading:"Songs"},{default:Object(i["U"])((function(){return[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.tracks,(function(t){return Object(i["A"])(),Object(i["f"])(a,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"])})),128))]})),_:1})):Object(i["g"])("",!0),o.spotifyTracks.length?(Object(i["A"])(),Object(i["f"])(r,{key:1,heading:"Songs (Spotify)"},{default:Object(i["U"])((function(){return[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.spotifyTracks,(function(t){return Object(i["A"])(),Object(i["f"])(a,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"])})),128))]})),_:1})):Object(i["g"])("",!0),o.youtubeTracks.length?(Object(i["A"])(),Object(i["f"])(r,{key:2,heading:"Songs (Youtube)"},{default:Object(i["U"])((function(){return[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.youtubeTracks,(function(t){return Object(i["A"])(),Object(i["f"])(a,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"])})),128))]})),_:1})):Object(i["g"])("",!0),o.artists.length?(Object(i["A"])(),Object(i["f"])(r,{key:3,heading:"Artists"},{default:Object(i["U"])((function(){return[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.artists,(function(t){return Object(i["A"])(),Object(i["f"])(a,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"])})),128))]})),_:1})):Object(i["g"])("",!0),o.spotifyArtists.length?(Object(i["A"])(),Object(i["f"])(r,{key:4,heading:"Artists (Spotify)"},{default:Object(i["U"])((function(){return[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.spotifyArtists,(function(t){return Object(i["A"])(),Object(i["f"])(a,{key:t.url,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["cover","href","artist","title"])})),128))]})),_:1})):Object(i["g"])("",!0)])}var Sn=n("e599"),kn=(n("c720"),n("0e37"),{class:"wrapper"}),An=["src"],Pn={key:0,class:"note"};function Cn(t,e,n,c,o,l){var a=Object(i["I"])("add-album-to-playlist");return Object(i["A"])(),Object(i["h"])("div",kn,[Object(i["l"])(a,{id:this.href.replace("https://open.spotify.com/album/",""),cover:n.cover,title:n.title,artist:n.artist,ref:"addAlbum"},null,8,["id","cover","title","artist"]),Object(i["i"])("div",{class:"item",onClick:e[0]||(e[0]=function(){return l.redirect&&l.redirect.apply(l,arguments)})},[Object(i["i"])("img",{src:n.cover},null,8,An),Object(i["i"])("h4",null,Object(i["N"])(n.title),1),Object(i["i"])("p",null,Object(i["N"])(n.artist),1),n.releaseDate?(Object(i["A"])(),Object(i["h"])("p",Pn,"Released on "+Object(i["N"])(n.releaseDate),1)):Object(i["g"])("",!0)])])}var wn=function(t){return Object(i["D"])("data-v-0344f788"),t=t(),Object(i["B"])(),t},_n={class:"wrapper"},Nn={class:"header"},In=wn((function(){return Object(i["i"])("h3",null,"Add album",-1)})),xn=wn((function(){return Object(i["i"])("span",{class:"material-icons-round"}," close ",-1)})),Tn=[xn],Mn=wn((function(){return Object(i["i"])("h4",null,"To Playlist",-1)})),$n=wn((function(){return Object(i["i"])("br",null,null,-1)})),Vn={key:0},Un=wn((function(){return Object(i["i"])("h4",null,"Source",-1)})),Hn={class:"content"},Dn=wn((function(){return Object(i["i"])("h4",null,"Title",-1)})),Rn={class:"content"},Bn=wn((function(){return Object(i["i"])("h4",null,"Album",-1)})),Jn={class:"content"},En=wn((function(){return Object(i["i"])("h4",null,"Artist",-1)})),Fn={class:"content"},Ln=wn((function(){return Object(i["i"])("h4",null,"Cover",-1)})),Gn={class:"content"},Kn=["src"],qn={class:"confirm"},Yn={key:1},zn=["src"],Wn={class:"details"},Qn=Object(i["k"])("Album"),Xn=wn((function(){return Object(i["i"])("hr",null,null,-1)})),Zn=wn((function(){return Object(i["i"])("hr",null,null,-1)})),ti={class:"confirm"};function ei(t,e,n,c,o,l){var a=Object(i["I"])("FindSources"),r=Object(i["I"])("h7"),s=Object(i["I"])("album-header"),u=Object(i["I"])("album-entry"),d=Object(i["I"])("vue-final-modal"),b=Object(i["J"])("observe-visibility");return Object(i["A"])(),Object(i["h"])("div",null,[Object(i["l"])(d,{onClick:t.hideFindSourcesCtx,modelValue:o.showModal,"onUpdate:modelValue":e[12]||(e[12]=function(t){return o.showModal=t}),classes:"modal-containerr","content-class":"addAlbumToPlaylistPopup"},{default:Object(i["U"])((function(){return[Object(i["i"])("div",_n,[Object(i["i"])("div",Nn,[In,Object(i["i"])("button",{class:"modal-close",onClick:e[0]||(e[0]=function(){return l.close&&l.close.apply(l,arguments)})},Tn)]),Mn,Object(i["V"])(Object(i["i"])("select",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.selectedPlaylist=t})},[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.playlists,(function(t){return Object(i["A"])(),Object(i["h"])("option",{key:t},Object(i["N"])(t),1)})),128))],512),[[i["Q"],o.selectedPlaylist]]),$n,o.editSong?(Object(i["A"])(),Object(i["h"])("div",Vn,[Un,Object(i["l"])(a,{ref:"findSources",title:n.title,artist:n.artist},{default:Object(i["U"])((function(){return[Object(i["i"])("div",Hn,[Object(i["V"])(Object(i["i"])("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(e){return t.dSource=e}),ref:"source"},null,512),[[i["R"],t.dSource]]),Object(i["i"])("span",{class:"material-icons-round more",ref:"sourceMore",onClick:e[3]||(e[3]=function(){return t.opencontextmenu&&t.opencontextmenu.apply(t,arguments)})},"more_vert",512)])]})),_:1},8,["title","artist"]),Dn,Object(i["i"])("div",Rn,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[4]||(e[4]=function(e){return t.dTitle=e}),type:"text"},null,512),[[i["R"],t.dTitle]])]),Bn,Object(i["i"])("div",Jn,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[5]||(e[5]=function(e){return t.dAlbum=e}),type:"text",ref:"album"},null,512),[[i["R"],t.dAlbum]])]),En,Object(i["i"])("div",Fn,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[6]||(e[6]=function(e){return t.dArtist=e}),type:"text"},null,512),[[i["R"],t.dArtist]])]),Ln,Object(i["i"])("div",Gn,[Object(i["V"])(Object(i["i"])("input",{type:"text",class:"addSong cover","onUpdate:modelValue":e[7]||(e[7]=function(e){return t.dCover=e}),ref:"cover"},null,512),[[i["R"],t.dCover]]),Object(i["i"])("img",{onClick:e[8]||(e[8]=function(){return l.openInNewTab&&l.openInNewTab.apply(l,arguments)}),class:"addSong cover",src:t.dCover?t.dCover:"/assets/img/music_placeholder.png"},null,8,Kn)]),Object(i["i"])("div",qn,[Object(i["i"])("button",{onClick:e[9]||(e[9]=function(){return l.add&&l.add.apply(l,arguments)}),class:"negative"},"Add")])])):(Object(i["A"])(),Object(i["h"])("div",Yn,[Object(i["V"])((Object(i["A"])(),Object(i["h"])("div",{class:"padding-20 playlisteditor",onClick:e[10]||(e[10]=function(){return t.editPlaylist&&t.editPlaylist.apply(t,arguments)})},[Object(i["i"])("img",{class:"cover",src:n.cover},null,8,zn),Object(i["i"])("div",Wn,[Object(i["l"])(r,null,{default:Object(i["U"])((function(){return[Qn]})),_:1}),Object(i["i"])("h1",null,Object(i["N"])(n.title),1),Object(i["i"])("h5",null,Object(i["N"])(n.artist),1)])])),[[b,t.headerVisibilityChanged]]),Xn,Object(i["l"])(s),Zn,(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.playlist,(function(t,e){return Object(i["A"])(),Object(i["f"])(u,{onAdd:l.add,key:e,added:t.added,index:e,cover:t.cover,artist:t.artists.join(", "),title:t.title,source:t.source},null,8,["onAdd","added","index","cover","artist","title","source"])})),128))])),Object(i["i"])("div",ti,[Object(i["i"])("button",{onClick:e[11]||(e[11]=function(){return l.addAll&&l.addAll.apply(l,arguments)}),class:"negative"},"Add All")])])]})),_:1},8,["onClick","modelValue"])])}n("867d");var ni={class:"track"},ii={class:"trackwrapper"};function ci(t,e,n,c,o,l){return Object(i["A"])(),Object(i["h"])("div",{onDblclick:e[2]||(e[2]=function(){l.playAt(),l.onselect()}),onClick:e[3]||(e[3]=function(){return l.onselect&&l.onselect.apply(l,arguments)}),onMouseover:e[4]||(e[4]=function(){return l.displayPlay&&l.displayPlay.apply(l,arguments)}),onMouseleave:e[5]||(e[5]=function(){return l.displayId&&l.displayId.apply(l,arguments)}),class:Object(i["u"])(["playlistEntry",{selected:o.highlighted}])},[Object(i["i"])("span",{onClick:e[0]||(e[0]=function(){return t.edit&&t.edit.apply(t,arguments)}),ref:"idOrPlay",class:Object(i["u"])([{playing:t.playing},"id"])},Object(i["N"])(n.index+1),3),Object(i["i"])("div",ni,[Object(i["i"])("div",ii,[Object(i["i"])("span",{class:Object(i["u"])(["title",{playing:t.playing}])},Object(i["N"])(n.title),3),Object(i["i"])("span",{class:Object(i["u"])(["artist",{playing:t.playing}])},Object(i["N"])(n.artist),3)])]),Object(i["i"])("span",{onClick:e[1]||(e[1]=function(){return l.add&&l.add.apply(l,arguments)}),class:"material-icons-round edit",ref:"add"},"add",512)],34)}var oi={name:"AlbumEntry",props:{index:Number,id:Number,source:String,artist:{type:String,default:"N/A"},title:{type:String,default:"N/A"},added:Boolean},data:function(){return{highlighted:!1,favourited:this.favourite,isAutoPlaylist:"/collection/tracks"==this.$route.path}},methods:{remove:function(){fetch("http://localhost:1234/api/remove",{method:"POST",body:JSON.stringify({playlistId:Number(this.$route.params.id),songId:this.id})})},onselect:function(){this.highlighted=!this.highlighted},displayPlay:function(){var t=this.$refs.idOrPlay;t.innerHTML="edit",t.classList.add("material-icons-round")},displayId:function(){var t=this.$refs.idOrPlay;t.innerHTML=this.index+1,t.classList.remove("material-icons-round")},playAt:function(){this.$emit("edit",this.index)},add:function(){console.log("add"),this.$emit("add",this.index)}},watch:{added:function(){console.log("change"),this.$refs.add.innerHTML=this.added?"done":"add"}}};n("63bb");const li=d()(oi,[["render",ci],["__scopeId","data-v-2bd77a1c"]]);var ai=li,ri=function(t){return Object(i["D"])("data-v-a99c9dc4"),t=t(),Object(i["B"])(),t},si={class:"gridHeader"},ui=ri((function(){return Object(i["i"])("span",{class:"id"},"#",-1)})),di=ri((function(){return Object(i["i"])("span",{class:"title"},"Title",-1)})),bi=[ui,di];function fi(t,e,n,c,o,l){return Object(i["A"])(),Object(i["h"])("div",si,bi)}var pi={name:"AlbumHeader"};n("886e");const hi=d()(pi,[["render",fi],["__scopeId","data-v-a99c9dc4"]]);var Oi=hi,ji={name:"AddAlbumToPlaylist",components:{FindSources:Pe,AlbumEntry:ai,AlbumHeader:Oi},props:{cover:String,artist:String,title:String,href:String,id:String},data:function(){return{showModal:!1,playlists:[],selectedPlaylist:-1,playlist:[],editSong:!1}},methods:{close:function(){this.showModal=!1,this.$emit("close")},loadMetadata:function(){var t=this;fetch("http://localhost:1234/api/metadata",{method:"POST",body:JSON.stringify({url:this.$refs.source.value})}).then((function(t){return t.json()})).then((function(e){console.log(e),t.dTitle=e.title,t.$refs.album.value=e.album,t.dArtist=e.artists.join(", "),t.dCover=e.cover,t.$refs.source.value=e.src}))},openInNewTab:function(){window.open(this.cover?this.cover:"/assets/img/music_placeholder.png")},addAll:function(){for(var t=0;t<this.playlist.length;t++)this.add(t)},add:function(t){var e=this,n=this.playlist[t],i=this.playlists.findIndex((function(t){return t==e.selectedPlaylist}));console.log(n,i),i<0?alert("no playlist selected"):fetch("http://localhost:1234/api/add",{method:"POST",body:JSON.stringify({id:i,source:n.src,title:n.title,artist:n.artists.join(", "),album:this.title,cover:this.cover})}).then((function(t){200==t.status&&(n.added=!0)}))}},watch:{dSource:function(){this.loadMetadata()},showModal:function(){var t=this;this.showModal&&(fetch("http://localhost:1234/api/playlists").then((function(t){return t.json()})).then((function(e){var n;t.playlists.length=0,(n=t.playlists).push.apply(n,Object(Sn["a"])(e))})),fetch("http://localhost:1234/api/spotify/album",{method:"POST",body:JSON.stringify({albumId:this.id})}).then((function(t){return t.json()})).then((function(e){var n;t.playlist.length=0,(n=t.playlist).push.apply(n,Object(Sn["a"])(e))})))}}};n("7be9"),n("aac9");const vi=d()(ji,[["render",ei],["__scopeId","data-v-0344f788"]]);var yi=vi,mi={name:"ReleaseItem",components:{AddAlbumToPlaylist:yi},methods:{redirect:function(){this.$refs.addAlbum.showModal=!0}},props:{cover:String,title:String,artist:String,href:String,releaseDate:String}};n("d7f1");const gi=d()(mi,[["render",Cn],["__scopeId","data-v-3df7fe26"]]);var Si=gi,ki=function(t){return Object(i["D"])("data-v-a845af6e"),t=t(),Object(i["B"])(),t},Ai={class:"shelf"},Pi={class:"header"},Ci=ki((function(){return Object(i["i"])("h5",null,"See All",-1)})),wi={class:"items"};function _i(t,e,n,c,o,l){return Object(i["A"])(),Object(i["h"])("div",Ai,[Object(i["i"])("div",Pi,[Object(i["i"])("h2",null,Object(i["N"])(n.heading),1),Ci]),Object(i["i"])("div",wi,[Object(i["H"])(t.$slots,"default",{},void 0,!0)])])}var Ni={name:"Shelf",props:{heading:String}};n("9f1b");const Ii=d()(Ni,[["render",_i],["__scopeId","data-v-a845af6e"]]);var xi=Ii,Ti={name:"Search",components:{Shelf:xi,Item:Si},data:function(){return{query:"",spotifyTracks:[],spotifyArtists:[],tracks:[],artists:[],youtubeTracks:[]}},methods:{search:function(){var t=this,e=this.$route.params.query;e&&fetch("http://localhost:1234/api/search",{method:"POST",body:JSON.stringify({query:e})}).then((function(t){return t.json()})).then((function(e){var n,i,c,o,l;t.spotifyTracks.length=0,t.spotifyArtists.length=0,t.tracks.length=0,t.artists.length=0,t.youtubeTracks.length=0,(n=t.spotifyTracks).push.apply(n,Object(Sn["a"])(e.spotifyTracks||[])),(i=t.spotifyArtists).push.apply(i,Object(Sn["a"])(e.spotifyArtists||[])),(c=t.tracks).push.apply(c,Object(Sn["a"])(e.tracks||[])),(o=t.artists).push.apply(o,Object(Sn["a"])(e.artists||[])),(l=t.youtubeTracks).push.apply(l,Object(Sn["a"])(e.youtubeTracks||[]))}))},enterText:function(t){"Enter"===t.key&&this.$router.push("/search/"+this.query)}},watch:{$route:function(){this.search()}},mounted:function(){this.search()}};n("250c");const Mi=d()(Ti,[["render",gn],["__scopeId","data-v-12bf4932"]]);var $i=Mi,Vi=function(t){return Object(i["D"])("data-v-000223ea"),t=t(),Object(i["B"])(),t},Ui={class:"padding-20"},Hi=Vi((function(){return Object(i["i"])("div",{class:"albums"}," Albums ",-1)}));function Di(t,e,n,c,o,l){var a=Object(i["I"])("CollectionHeader");return Object(i["A"])(),Object(i["h"])("div",Ui,[Object(i["l"])(a),Hi])}var Ri=function(t){return Object(i["D"])("data-v-414c1a26"),t=t(),Object(i["B"])(),t},Bi={class:"wrapper"},Ji=Ri((function(){return Object(i["i"])("div",{class:"collection"}," Playlists ",-1)})),Ei=Ri((function(){return Object(i["i"])("div",{class:"collection"}," Releases ",-1)}));function Fi(t,e,n,c,o,l){var a=Object(i["I"])("router-link");return Object(i["A"])(),Object(i["h"])("div",Bi,[Object(i["l"])(a,{class:"link",to:"/collection/playlists"},{default:Object(i["U"])((function(){return[Ji]})),_:1}),Object(i["l"])(a,{class:"link",to:"/collection/releases"},{default:Object(i["U"])((function(){return[Ei]})),_:1}),Object(i["g"])("",!0),Object(i["g"])("",!0)])}var Li={name:"CollectionHeader",props:{href:String}};n("42df");const Gi=d()(Li,[["render",Fi],["__scopeId","data-v-414c1a26"]]);var Ki=Gi,qi={components:{CollectionHeader:Ki},name:"Albums"};n("8b2f");const Yi=d()(qi,[["render",Di],["__scopeId","data-v-000223ea"]]);var zi=Yi,Wi=function(t){return Object(i["D"])("data-v-d7e744b8"),t=t(),Object(i["B"])(),t},Qi={class:"padding-20"},Xi=Wi((function(){return Object(i["i"])("div",{class:"artists"}," Artists ",-1)}));function Zi(t,e,n,c,o,l){var a=Object(i["I"])("CollectionHeader");return Object(i["A"])(),Object(i["h"])("div",Qi,[Object(i["l"])(a),Xi])}var tc={components:{CollectionHeader:Ki},name:"Artists"};n("648f");const ec=d()(tc,[["render",Zi],["__scopeId","data-v-d7e744b8"]]);var nc=ec,ic={class:"padding-20"},cc={class:"playlists"};function oc(t,e,n,c,o,l){var a=Object(i["I"])("CollectionHeader"),r=Object(i["I"])("playlist-item-big"),s=Object(i["I"])("playlist-item"),u=Object(i["I"])("full-shelf");return Object(i["A"])(),Object(i["h"])("div",ic,[Object(i["l"])(a),Object(i["i"])("div",cc,[Object(i["l"])(u,{heading:"Playlists"},{default:Object(i["U"])((function(){var t,e,n,c;return[null!==(t=o.likedTracks)&&void 0!==t&&null!==(e=t.songs)&&void 0!==e&&e.length?(Object(i["A"])(),Object(i["f"])(r,{key:0,title:"Liked Songs",description:"".concat(null===(n=o.likedTracks)||void 0===n||null===(c=n.songs)||void 0===c?void 0:c.length," liked Songs"),href:"/collection/tracks"},null,8,["description"])):Object(i["g"])("",!0),(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.playlists,(function(t,e){return Object(i["A"])(),Object(i["f"])(s,{key:e,href:"/playlist/".concat(e),cover:t.cover,description:t.description,title:t.name,spotify:!1},null,8,["href","cover","description","title"])})),128))]})),_:1}),Object(i["l"])(u,{heading:"Import From Spotify"},{default:Object(i["U"])((function(){return[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.spotifyPlaylists,(function(t,e){return Object(i["A"])(),Object(i["f"])(s,{key:e,cover:t.cover,description:t.description,title:t.name,id:t.id,spotify:!0},null,8,["cover","description","title","id"])})),128))]})),_:1})])])}var lc={class:"shelf"},ac={class:"header"},rc={class:"items"};function sc(t,e,n,c,o,l){return Object(i["A"])(),Object(i["h"])("div",lc,[Object(i["i"])("div",ac,[Object(i["i"])("h2",null,Object(i["N"])(n.heading),1)]),Object(i["i"])("div",rc,[Object(i["H"])(t.$slots,"default",{},void 0,!0)])])}var uc={name:"FullShelf",props:{heading:String}};n("b3fc");const dc=d()(uc,[["render",sc],["__scopeId","data-v-be2be860"]]);var bc=dc,fc={class:"wrapper"},pc=["src"],hc=["innerHTML"];function Oc(t,e,n,c,o,l){var a=Object(i["I"])("add-playlist-to-playlist");return Object(i["A"])(),Object(i["h"])("div",fc,[n.spotify?(Object(i["A"])(),Object(i["f"])(a,{key:0,cover:n.cover,title:n.title,description:n.description,id:n.id,ref:"import"},null,8,["cover","title","description","id"])):Object(i["g"])("",!0),Object(i["i"])("div",{class:"item",onClick:e[0]||(e[0]=function(){return l.redirect&&l.redirect.apply(l,arguments)})},[Object(i["i"])("img",{src:n.cover},null,8,pc),Object(i["i"])("h4",null,Object(i["N"])(n.title),1),Object(i["i"])("p",{innerHTML:n.description},null,8,hc)])])}var jc=function(t){return Object(i["D"])("data-v-a85eb334"),t=t(),Object(i["B"])(),t},vc={class:"wrapper"},yc={class:"header"},mc=jc((function(){return Object(i["i"])("h3",null,"Import playlist",-1)})),gc=jc((function(){return Object(i["i"])("span",{class:"material-icons-round"}," close ",-1)})),Sc=[gc],kc=jc((function(){return Object(i["i"])("h4",null,"To Playlist",-1)})),Ac=jc((function(){return Object(i["i"])("br",null,null,-1)})),Pc={key:0},Cc=jc((function(){return Object(i["i"])("h4",null,"Source",-1)})),wc={class:"content"},_c=jc((function(){return Object(i["i"])("h4",null,"Title",-1)})),Nc={class:"content"},Ic=jc((function(){return Object(i["i"])("h4",null,"Album",-1)})),xc={class:"content"},Tc=jc((function(){return Object(i["i"])("h4",null,"Artist",-1)})),Mc={class:"content"},$c=jc((function(){return Object(i["i"])("h4",null,"Cover",-1)})),Vc={class:"content"},Uc=["src"],Hc={class:"confirm"},Dc={key:1},Rc=["src"],Bc={class:"details"},Jc=Object(i["k"])("Playlist"),Ec=["innerHTML"],Fc=jc((function(){return Object(i["i"])("hr",null,null,-1)})),Lc=jc((function(){return Object(i["i"])("hr",null,null,-1)})),Gc={class:"confirm"};function Kc(t,e,n,c,o,l){var a=Object(i["I"])("FindSources"),r=Object(i["I"])("h7"),s=Object(i["I"])("spotify-playlist-header"),u=Object(i["I"])("spotify-playlist-entry"),d=Object(i["I"])("vue-final-modal"),b=Object(i["J"])("observe-visibility");return Object(i["A"])(),Object(i["h"])("div",null,[Object(i["l"])(d,{onClick:t.hideFindSourcesCtx,modelValue:o.showModal,"onUpdate:modelValue":e[12]||(e[12]=function(t){return o.showModal=t}),classes:"modal-containerr","content-class":"addAlbumToPlaylistPopup"},{default:Object(i["U"])((function(){return[Object(i["i"])("div",vc,[Object(i["i"])("div",yc,[mc,Object(i["i"])("button",{class:"modal-close",onClick:e[0]||(e[0]=function(){return l.close&&l.close.apply(l,arguments)})},Sc)]),kc,Object(i["V"])(Object(i["i"])("select",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.selectedPlaylist=t})},[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.playlists,(function(t){return Object(i["A"])(),Object(i["h"])("option",{key:t},Object(i["N"])(t),1)})),128))],512),[[i["Q"],o.selectedPlaylist]]),Ac,o.editSong?(Object(i["A"])(),Object(i["h"])("div",Pc,[Cc,Object(i["l"])(a,{ref:"findSources",title:n.title,artist:t.artist},{default:Object(i["U"])((function(){return[Object(i["i"])("div",wc,[Object(i["V"])(Object(i["i"])("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(e){return t.dSource=e}),ref:"source"},null,512),[[i["R"],t.dSource]]),Object(i["i"])("span",{class:"material-icons-round more",ref:"sourceMore",onClick:e[3]||(e[3]=function(){return t.opencontextmenu&&t.opencontextmenu.apply(t,arguments)})},"more_vert",512)])]})),_:1},8,["title","artist"]),_c,Object(i["i"])("div",Nc,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[4]||(e[4]=function(e){return t.dTitle=e}),type:"text"},null,512),[[i["R"],t.dTitle]])]),Ic,Object(i["i"])("div",xc,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[5]||(e[5]=function(e){return t.dAlbum=e}),type:"text",ref:"album"},null,512),[[i["R"],t.dAlbum]])]),Tc,Object(i["i"])("div",Mc,[Object(i["V"])(Object(i["i"])("input",{"onUpdate:modelValue":e[6]||(e[6]=function(e){return t.dArtist=e}),type:"text"},null,512),[[i["R"],t.dArtist]])]),$c,Object(i["i"])("div",Vc,[Object(i["V"])(Object(i["i"])("input",{type:"text",class:"addSong cover","onUpdate:modelValue":e[7]||(e[7]=function(e){return t.dCover=e}),ref:"cover"},null,512),[[i["R"],t.dCover]]),Object(i["i"])("img",{onClick:e[8]||(e[8]=function(){return l.openInNewTab&&l.openInNewTab.apply(l,arguments)}),class:"addSong cover",src:t.dCover?t.dCover:"/assets/img/music_placeholder.png"},null,8,Uc)]),Object(i["i"])("div",Hc,[Object(i["i"])("button",{onClick:e[9]||(e[9]=function(){return l.add&&l.add.apply(l,arguments)}),class:"negative"},"Add")])])):(Object(i["A"])(),Object(i["h"])("div",Dc,[Object(i["V"])((Object(i["A"])(),Object(i["h"])("div",{class:"padding-20 playlisteditor",onClick:e[10]||(e[10]=function(){return t.editPlaylist&&t.editPlaylist.apply(t,arguments)})},[Object(i["i"])("img",{class:"cover",src:n.cover},null,8,Rc),Object(i["i"])("div",Bc,[Object(i["l"])(r,null,{default:Object(i["U"])((function(){return[Jc]})),_:1}),Object(i["i"])("h1",null,Object(i["N"])(n.title),1),Object(i["i"])("h5",{innerHTML:n.description},null,8,Ec)])])),[[b,t.headerVisibilityChanged]]),Fc,Object(i["l"])(s),Lc,(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.playlist,(function(t,e){return Object(i["A"])(),Object(i["f"])(u,{onAdd:l.add,key:e,added:t.added,index:e,cover:t.cover,artist:t.artists.join(", "),title:t.title,source:t.source,album:t.album},null,8,["onAdd","added","index","cover","artist","title","source","album"])})),128))])),Object(i["i"])("div",Gc,[Object(i["i"])("button",{onClick:e[11]||(e[11]=function(){return l.addAll&&l.addAll.apply(l,arguments)}),class:"negative"},"Add All")])])]})),_:1},8,["onClick","modelValue"])])}var qc={class:"track"},Yc=["src"],zc={class:"trackwrapper"},Wc={class:"title"},Qc={class:"artist"};function Xc(t,e,n,c,o,l){return Object(i["A"])(),Object(i["h"])("div",{onDblclick:e[2]||(e[2]=function(){l.playAt(),l.onselect()}),onClick:e[3]||(e[3]=function(){return l.onselect&&l.onselect.apply(l,arguments)}),onMouseover:e[4]||(e[4]=function(){return l.displayPlay&&l.displayPlay.apply(l,arguments)}),onMouseleave:e[5]||(e[5]=function(){return l.displayId&&l.displayId.apply(l,arguments)}),class:Object(i["u"])(["playlistEntry",{selected:o.highlighted}])},[Object(i["i"])("span",{onClick:e[0]||(e[0]=function(){return t.edit&&t.edit.apply(t,arguments)}),ref:"idOrPlay",class:"id"},Object(i["N"])(n.index+1),513),Object(i["i"])("div",qc,[Object(i["i"])("img",{src:n.cover||"/assets/img/music_placeholder.png"},null,8,Yc),Object(i["i"])("div",zc,[Object(i["i"])("span",Wc,Object(i["N"])(n.title),1),Object(i["i"])("span",Qc,Object(i["N"])(n.artist),1)]),Object(i["g"])("",!0)]),Object(i["i"])("span",{onClick:e[1]||(e[1]=function(){return l.add&&l.add.apply(l,arguments)}),class:"material-icons-round edit",ref:"add"},"add",512)],34)}var Zc={name:"SpotifyPlaylistEntry",props:{index:Number,id:Number,source:String,artist:{type:String,default:"N/A"},title:{type:String,default:"N/A"},added:Boolean,cover:String,album:String},data:function(){return{highlighted:!1,favourited:this.favourite,isAutoPlaylist:"/collection/tracks"==this.$route.path}},methods:{remove:function(){fetch("http://localhost:1234/api/remove",{method:"POST",body:JSON.stringify({playlistId:Number(this.$route.params.id),songId:this.id})})},onselect:function(){this.highlighted=!this.highlighted},displayPlay:function(){var t=this.$refs.idOrPlay;t.innerHTML="edit",t.classList.add("material-icons-round")},displayId:function(){var t=this.$refs.idOrPlay;t.innerHTML=this.index+1,t.classList.remove("material-icons-round")},playAt:function(){this.$emit("edit",this.index)},add:function(){console.log("add"),this.$emit("add",this.index)}},watch:{added:function(){console.log("change"),this.$refs.add.innerHTML=this.added?"done":"add"}}};n("45f7");const to=d()(Zc,[["render",Xc],["__scopeId","data-v-62961a67"]]);var eo=to,no=function(t){return Object(i["D"])("data-v-491e69c7"),t=t(),Object(i["B"])(),t},io={class:"gridHeader"},co=no((function(){return Object(i["i"])("span",{class:"id"},"#",-1)})),oo=no((function(){return Object(i["i"])("span",{class:"title"},"Title",-1)})),lo=[co,oo];function ao(t,e,n,c,o,l){return Object(i["A"])(),Object(i["h"])("div",io,lo)}var ro={name:"SpotifyPlaylistHeader"};n("4fce");const so=d()(ro,[["render",ao],["__scopeId","data-v-491e69c7"]]);var uo=so,bo={name:"AddPlaylistToPlaylist",components:{FindSources:Pe,SpotifyPlaylistHeader:uo,SpotifyPlaylistEntry:eo},props:{cover:String,description:String,title:String,href:String,id:String},data:function(){return{showModal:!1,playlists:[],selectedPlaylist:-1,playlist:[],editSong:!1}},methods:{close:function(){this.showModal=!1,this.$emit("close")},loadMetadata:function(){var t=this;fetch("http://localhost:1234/api/metadata",{method:"POST",body:JSON.stringify({url:this.$refs.source.value})}).then((function(t){return t.json()})).then((function(e){console.log(e),t.dTitle=e.title,t.$refs.album.value=e.album,t.dArtist=e.artists.join(", "),t.dCover=e.cover,t.$refs.source.value=e.src}))},openInNewTab:function(){window.open(this.cover?this.cover:"/assets/img/music_placeholder.png")},addAll:function(){for(var t=0;t<this.playlist.length;t++)this.add(t)},add:function(t){var e=this,n=this.playlist[t],i=this.playlists.findIndex((function(t){return t==e.selectedPlaylist}));console.log(n,i),i<0?alert("no playlist selected"):fetch("http://localhost:1234/api/add",{method:"POST",body:JSON.stringify({id:i,source:n.src,title:n.title,artist:n.artists.join(", "),album:n.album,cover:n.cover})}).then((function(t){200==t.status&&(n.added=!0)}))}},watch:{dSource:function(){this.loadMetadata()},showModal:function(){var t=this;this.showModal&&(fetch("http://localhost:1234/api/playlists").then((function(t){return t.json()})).then((function(e){var n;t.playlists.length=0,(n=t.playlists).push.apply(n,Object(Sn["a"])(e))})),fetch("http://localhost:1234/api/spotify/playlist",{method:"POST",body:JSON.stringify({playlistId:this.id})}).then((function(t){return t.json()})).then((function(e){var n;t.playlist.length=0,(n=t.playlist).push.apply(n,Object(Sn["a"])(e))})))}}};n("72bd"),n("1352");const fo=d()(bo,[["render",Kc],["__scopeId","data-v-a85eb334"]]);var po=fo,ho={components:{AddPlaylistToPlaylist:po},name:"PlaylistItem",methods:{redirect:function(){this.spotify?this.$refs.import.showModal=!0:this.$router.push(this.href)}},props:{cover:String,title:String,description:String,href:String,spotify:Boolean,id:String}};n("b177");const Oo=d()(ho,[["render",Oc],["__scopeId","data-v-00fd3ec0"]]);var jo=Oo,vo={class:"itemBig"},yo={class:"wrapper"};function mo(t,e,n,c,o,l){var a=Object(i["I"])("add-album-to-playlist");return Object(i["A"])(),Object(i["h"])("div",vo,[Object(i["l"])(a,{id:this.href.replace("https://open.spotify.com/album/",""),cover:t.cover,title:n.title,artist:t.artist,ref:"addAlbum"},null,8,["id","cover","title","artist"]),Object(i["i"])("div",{class:"item",onClick:e[0]||(e[0]=function(){return l.redirect&&l.redirect.apply(l,arguments)})},[Object(i["i"])("div",yo,[Object(i["i"])("h4",null,Object(i["N"])(n.title),1),Object(i["i"])("p",null,Object(i["N"])(n.description),1)])])])}var go={components:{AddAlbumToPlaylist:yi},name:"ReleaseItemBig",methods:{redirect:function(){this.$router.push(this.href)}},props:{title:String,description:String,href:String}};n("f838");const So=d()(go,[["render",mo],["__scopeId","data-v-7f6c024b"]]);var ko=So,Ao={components:{CollectionHeader:Ki,PlaylistItem:jo,FullShelf:bc,PlaylistItemBig:ko},name:"Playlists",data:function(){var t=this;return fetch("http://localhost:1234/api/playlists").then((function(t){return t.json()})).then(function(){var e=Object(yt["a"])(regeneratorRuntime.mark((function e(n){var i,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<n.length)){e.next=12;break}return e.next=4,fetch("http://localhost:1234/api/playlist",{method:"POST",body:JSON.stringify({id:i})});case 4:return c=e.sent,e.next=7,c.json();case 7:o=e.sent,t.playlists.push({name:o.name,description:o.description,cover:o.songs[0].cover});case 9:i++,e.next=1;break;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fetch("http://localhost:1234/api/collection/tracks").then((function(t){return t.json()})).then((function(e){t.likedTracks=e})),fetch("http://localhost:1234/api/spotify/playlists").then((function(t){return t.json()})).then((function(e){t.spotifyPlaylists=e})),{playlists:[],likedTracks:null,spotifyPlaylists:[]}}};n("02f8");const Po=d()(Ao,[["render",oc],["__scopeId","data-v-79afb759"]]);var Co=Po,wo={class:"padding-20"},_o={class:"releases"};function No(t,e,n,c,o,l){var a=Object(i["I"])("CollectionHeader"),r=Object(i["I"])("item-big"),s=Object(i["I"])("full-shelf"),u=Object(i["I"])("ItemBig"),d=Object(i["I"])("Item");return Object(i["A"])(),Object(i["h"])("div",wo,[Object(i["l"])(a),Object(i["i"])("div",_o,[o.outSoon.length?(Object(i["A"])(),Object(i["f"])(s,{key:0,heading:"Out Soon"},{default:Object(i["U"])((function(){return[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.outSoon,(function(t){return Object(i["A"])(),Object(i["f"])(r,{key:t.url,releaseDate:t.releaseDate,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["releaseDate","cover","href","artist","title"])})),128))]})),_:1})):Object(i["g"])("",!0),o.outNow.length?(Object(i["A"])(),Object(i["f"])(s,{key:1,heading:"Out Now"},{default:Object(i["U"])((function(){return[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.outNow,(function(t){return Object(i["A"])(),Object(i["f"])(u,{key:t.url,releaseDate:t.releaseDate,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["releaseDate","cover","href","artist","title"])})),128))]})),_:1})):Object(i["g"])("",!0),o.outAlready.length?(Object(i["A"])(),Object(i["f"])(s,{key:2,heading:"Releases"},{default:Object(i["U"])((function(){return[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.outAlready,(function(t){return Object(i["A"])(),Object(i["f"])(d,{key:t.url,releaseDate:t.releaseDate,cover:t.cover,href:t.url,artist:t.artists.join(", "),title:t.title},null,8,["releaseDate","cover","href","artist","title"])})),128))]})),_:1})):Object(i["g"])("",!0)])])}var Io={class:"itemBig"},xo=["src"],To={class:"wrapper"},Mo={key:0,class:"note"};function $o(t,e,n,c,o,l){var a=Object(i["I"])("add-album-to-playlist");return Object(i["A"])(),Object(i["h"])("div",Io,[Object(i["l"])(a,{id:this.href.replace("https://open.spotify.com/album/",""),cover:n.cover,title:n.title,artist:n.artist,ref:"addAlbum"},null,8,["id","cover","title","artist"]),Object(i["i"])("div",{class:"item",onClick:e[0]||(e[0]=function(){return l.redirect&&l.redirect.apply(l,arguments)})},[Object(i["i"])("img",{src:n.cover},null,8,xo),Object(i["i"])("div",To,[Object(i["i"])("h4",null,Object(i["N"])(n.title),1),Object(i["i"])("p",null,Object(i["N"])(n.artist),1),n.releaseDate?(Object(i["A"])(),Object(i["h"])("p",Mo,"Released on "+Object(i["N"])(n.releaseDate),1)):Object(i["g"])("",!0)])])])}var Vo={components:{AddAlbumToPlaylist:yi},name:"ReleaseItemBig",methods:{redirect:function(){this.$refs.addAlbum.showModal=!0}},props:{cover:String,title:String,artist:String,href:String,releaseDate:String}};n("81a1");const Uo=d()(Vo,[["render",$o],["__scopeId","data-v-67032955"]]);var Ho=Uo,Do={components:{CollectionHeader:Ki,FullShelf:bc,Item:Si,ItemBig:Ho},name:"Releases",data:function(){return{outSoon:[],outNow:[],outAlready:[]}},mounted:function(){var t=this;fetch("http://localhost:1234/api/releases").then((function(t){return t.json()})).then((function(e){var n,i=new Date,c=Object(mt["a"])(e);try{for(c.s();!(n=c.n()).done;){var o=n.value,l=new Date(o.releaseDate);i<l?t.outSoon.push(o):i.getMonth()==l.getMonth()&&i.getDate()==l.getDate()&&i.getFullYear()==l.getFullYear()?t.outNow.push(o):t.outAlready.push(o)}}catch(a){c.e(a)}finally{c.f()}}))}};n("95fa");const Ro=d()(Do,[["render",No],["__scopeId","data-v-787302ca"]]);var Bo=Ro,Jo=function(t){return Object(i["D"])("data-v-2ea53e98"),t=t(),Object(i["B"])(),t},Eo={class:"playlist"},Fo={class:"padding-20"},Lo=Object(i["k"])("Playlist"),Go=Jo((function(){return Object(i["i"])("h5",null,"My Description",-1)})),Ko=Jo((function(){return Object(i["i"])("hr",null,null,-1)})),qo={class:"padding-20"},Yo={class:"grid"},zo=Jo((function(){return Object(i["i"])("hr",null,null,-1)})),Wo={class:"playlistEntries"};function Qo(t,e,n,c,o,l){var a=Object(i["I"])("fixed-playlist-header"),r=Object(i["I"])("h7"),s=Object(i["I"])("grid-header"),u=Object(i["I"])("playlist-entry"),d=Object(i["J"])("observe-visibility");return Object(i["A"])(),Object(i["h"])("div",Eo,[Object(i["l"])(a,{onClick:t.loadPlaylist,ref:"fixedHeading",class:Object(i["u"])({hidden:o.fixedHeaderHidden}),title:o.playlistName},null,8,["onClick","class","title"]),Object(i["V"])((Object(i["A"])(),Object(i["h"])("div",Fo,[Object(i["l"])(r,null,{default:Object(i["U"])((function(){return[Lo]})),_:1}),Object(i["i"])("h1",null,Object(i["N"])(o.playlistName),1),Go])),[[d,l.headerVisibilityChanged]]),Ko,Object(i["i"])("div",qo,[Object(i["i"])("span",{id:"loadPlaylist",onClick:e[0]||(e[0]=function(){return t.loadPlaylist&&t.loadPlaylist.apply(t,arguments)}),class:"material-icons-outlined"},"play_circle_filled"),Object(i["i"])("div",Yo,[Object(i["l"])(s),zo,Object(i["i"])("div",Wo,[(Object(i["A"])(!0),Object(i["h"])(i["a"],null,Object(i["G"])(o.playlist,(function(t,e){return Object(i["A"])(),Object(i["f"])(u,{key:e,index:e,id:t.id,title:t.title,album:t.album,artist:t.artist,cover:t.cover,favourite:t.favourite,duration:t.duration},null,8,["index","id","title","album","artist","cover","favourite","duration"])})),128))])])])])}var Xo={components:{PlaylistEntry:xe,FixedPlaylistHeader:Ht,GridHeader:$t},name:"Tracks",data:function(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:"N/A"}},methods:{headerVisibilityChanged:function(t){this.fixedHeaderHidden=t},updateTracks:function(){var t=this;fetch("http://localhost:1234/api/collection/tracks").then((function(t){return t.json()})).then((function(e){t.playlist=e.songs,t.playlistName=e.name,console.log(t.playlist)}))}}};n("ae47");const Zo=d()(Xo,[["render",Qo],["__scopeId","data-v-2ea53e98"]]);var tl=Zo,el=n("6831"),nl=Object(i["e"])(nt);nl.directive("observe-visibility",{beforeMount:function(t,e,n){n.context=e.instance,it["a"].bind(t,e,n)},updated:it["a"].update,unmounted:it["a"].unbind}),nl.use(Object(ct["a"])()),nl.use(el["a"]);var il=[{path:"/",component:st},{path:"/search",component:$i},{path:"/search/:query",component:$i},{path:"/collection/albums",component:zi},{path:"/collection/artists",component:nc},{path:"/collection/playlists",component:Co},{path:"/collection/releases",component:Bo},{path:"/collection/tracks",component:tl},{path:"/playlist/:id",component:yn}],cl=Object(T["a"])({history:Object(T["b"])(),routes:il});nl.use(cl),nl.mount("#app")},c38c:function(t,e,n){},ca69:function(t,e,n){},cc3ae:function(t,e,n){"use strict";n("0bf6")},d7f1:function(t,e,n){"use strict";n("1f5a")},e4fc:function(t,e,n){},e511:function(t,e,n){},e51d:function(t,e,n){"use strict";n("ca69")},e8ed:function(t,e,n){},f096:function(t,e,n){},f3b6:function(t,e,n){},f69d:function(t,e,n){"use strict";n("c16b")},f838:function(t,e,n){"use strict";n("5d8e")}});
//# sourceMappingURL=app.fb2e53a7.js.map