(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bigPlayer"],{1919:function(t,e,o){},"4e6b":function(t,e,o){},"4fce":function(t,e,o){"use strict";o("1919")},6208:function(t,e,o){"use strict";o.r(e);o("867d");var n=o("69be"),i={class:"bigPlayer"},a={class:"upNow"},l=["src"],c={class:"playlistOverflow"},r={class:"playlist"};function s(t,e,o,s,d,u){var p=Object(n["resolveComponent"])("spotify-playlist-header"),f=Object(n["resolveComponent"])("light-playlist-entry");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("img",{src:d.cover},null,8,l)]),Object(n["createElementVNode"])("div",c,[Object(n["createElementVNode"])("div",r,[Object(n["createVNode"])(p),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(d.playlist.songs,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(f,{key:e.source,onDownload:t.download,onRequestUpdate:t.updatePlaylist,index:d.playlist.songs.findIndex((function(t){return t.source==e.source})),source:e.source,playing:e.title==d.currentSongName,id:e.id,title:e.title,album:e.album,artist:e.artist,cover:e.cover,favourite:e.favourite,duration:e.duration},null,8,["onDownload","onRequestUpdate","index","source","playing","id","title","album","artist","cover","favourite","duration"])})),128))])])])}o("3efd");var d={class:"track"},u=["src"],p={class:"trackwrapper"},f={class:"duration"};function h(t,e,o,i,a,l){var c=Object(n["resolveComponent"])("EditSong"),r=Object(n["resolveComponent"])("Marquee"),s=Object(n["resolveComponent"])("router-link"),h=Object(n["resolveComponent"])("SongCtx");return Object(n["openBlock"])(),Object(n["createBlock"])(h,{onDownload:l.download,onAddto:l.addToPlaylist,onRemove:l.remove,onUpdate:l.update,onLike:e[5]||(e[5]=function(t){return a.favourited=!a.favourited}),isAutoPlaylist:a.isAutoPlaylist,liked:a.favourited,ref:"ctxMenu"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{onClose:t.updatePlaylist,ref:"editSongPopup",cover:o.cover,id:o.id,title:o.title,album:o.album,artist:o.artist,source:o.source},null,8,["onClose","cover","id","title","album","artist","source"]),Object(n["createElementVNode"])("div",{onDblclick:e[1]||(e[1]=function(){l.playAt(),l.onselect()}),onClick:e[2]||(e[2]=function(){return l.onselect&&l.onselect.apply(l,arguments)}),onMouseover:e[3]||(e[3]=function(){return l.displayPlay&&l.displayPlay.apply(l,arguments)}),onMouseleave:e[4]||(e[4]=function(){return l.displayId&&l.displayId.apply(l,arguments)}),class:Object(n["normalizeClass"])(["playlistEntry",{selected:a.highlighted}])},[Object(n["createElementVNode"])("span",{onClick:e[0]||(e[0]=function(){return l.playAt&&l.playAt.apply(l,arguments)}),ref:"idOrPlay",class:Object(n["normalizeClass"])([{playing:o.playing},"id"])},Object(n["toDisplayString"])(o.index+1),3),Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("img",{src:o.cover||"/assets/img/music_placeholder.png"},null,8,u),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])(["title",{playing:o.playing}])},[Object(n["createVNode"])(s,{class:"linkOnHover",to:"/track/".concat(o.id)},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(r,{text:o.title},null,8,["text"])]})),_:1},8,["to"])],2),Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])(["artist",{playing:o.playing}])},[Object(n["createVNode"])(s,{class:"linkOnHover",to:"/search/".concat(o.artist)},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(r,{text:o.artist},null,8,["text"])]})),_:1},8,["to"])],2)])]),Object(n["createElementVNode"])("span",f,Object(n["toDisplayString"])(o.duration),1)],34)]})),_:1},8,["onDownload","onAddto","onRemove","onUpdate","isAutoPlaylist","liked"])}o("dfac"),o("f258");var v=o("a279"),y=o("d0cc"),b=o("5acf"),m={name:"LightPlaylistEntry",components:{SongCtx:v["a"],EditSong:b["a"],Marquee:y["a"]},props:{index:Number,id:Number,artist:{type:String,default:"N/A"},title:{type:String,default:"N/A"},cover:{type:String,default:"/assets/img/music_placeholder.png"},source:String,album:{type:String,default:"N/A"},duration:{type:String,default:"N/A"},favourite:{type:Boolean,default:!1},playing:{type:Boolean,default:!1}},data:function(){return{highlighted:!1,favourited:this.favourite,isAutoPlaylist:"/collection/tracks"==this.$route.path,hovering:!1}},methods:{download:function(){window.open("http://localhost:1234/api/download/"+this.id)},addToPlaylist:function(t){var e=this;fetch("http://localhost:1234/api/add",{method:"POST",body:JSON.stringify({id:t,source:this.source})}).then((function(t){200==t.status&&e.$emit("requestUpdate")}))},update:function(){this.$refs.editSongPopup.showModal=!0},remove:function(){fetch("http://localhost:1234/api/remove",{method:"POST",body:JSON.stringify({playlistId:Number(this.$route.params.id),songId:this.id})})},onselect:function(){this.highlighted=!this.highlighted},playAt:function(){console.log(this.$route.path);var t={index:this.index};t.playlistIndex=Number(this.$route.params.id),fetch("http://localhost:1234/api/at",{method:"POST",body:JSON.stringify(t)})},setFavourite:function(){fetch("http://localhost:1234/api/updateSong",{method:"POST",body:JSON.stringify({id:this.id,favourite:this.favourited,album:this.album,artist:this.artist,title:this.title,duration:this.duration,cover:this.cover,source:this.source})})},displayPlay:function(){var t=this.$refs.idOrPlay;t.innerHTML="play_arrow",t.classList.add("material-icons-round")},displayId:function(){var t=this.$refs.idOrPlay;t.innerHTML=this.index+1,t.classList.remove("material-icons-round")}},watch:{added:function(){console.log("change"),this.$refs.add.innerHTML=this.added?"done":"add"},favourited:function(){this.setFavourite()},favourite:function(){console.log("mounted",this.title,this.favourite,this.favourited),this.favourited=this.favourite,this.highlighted=!1}}},g=(o("9da9"),o("1c27")),O=o.n(g);const j=O()(m,[["render",h],["__scopeId","data-v-74cb5ae1"]]);var N=j,S=o("bca3"),w={components:{LightPlaylistEntry:N,SpotifyPlaylistHeader:S["a"]},name:"BigPlayer",methods:{fetchPlaylist:function(){var t=this;fetch("http://localhost:1234/api/playlist",{method:"POST"}).then((function(t){return t.json()})).then((function(e){return t.playlist=e}))},updateData:function(t){var e,o;if("player.song"==t.path)return this.cover=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.cover)||"/assets/img/music_placeholder.png",void(this.currentSongName=(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.title)||"")}},data:function(){var t=this,e=function e(){console.log("attempting reconnect");var o=new WebSocket("ws://localhost:1234/ws");o.onclose=function(){console.log("ws closed"),setTimeout(e,1e3)},o.onopen=function(){console.log("ws connected")},o.onmessage=function(e){var o=JSON.parse(e.data);t.updateData(o)}};return e(),this.fetchPlaylist(),{cover:"/assets/img/music_placeholder.png",playlist:[],currentSongName:""}}};o("ab94");const P=O()(w,[["render",s],["__scopeId","data-v-5a63893d"]]);e["default"]=P},"867d":function(t,e,o){"use strict";var n=o("e6df"),i=o("fe06").findIndex,a=o("513e"),l="findIndex",c=!0;l in[]&&Array(1)[l]((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(l)},"9da9":function(t,e,o){"use strict";o("4e6b")},ab94:function(t,e,o){"use strict";o("b297")},b297:function(t,e,o){},bca3:function(t,e,o){"use strict";var n=o("69be"),i=function(t){return Object(n["pushScopeId"])("data-v-491e69c7"),t=t(),Object(n["popScopeId"])(),t},a={class:"gridHeader"},l=i((function(){return Object(n["createElementVNode"])("span",{class:"id"},"#",-1)})),c=i((function(){return Object(n["createElementVNode"])("span",{class:"title"},"Title",-1)})),r=[l,c];function s(t,e,o,i,l,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,r)}var d={name:"SpotifyPlaylistHeader"},u=(o("4fce"),o("1c27")),p=o.n(u);const f=p()(d,[["render",s],["__scopeId","data-v-491e69c7"]]);e["a"]=f}}]);
//# sourceMappingURL=bigPlayer.e8d79f0e.js.map