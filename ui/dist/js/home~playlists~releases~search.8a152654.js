(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home~playlists~releases~search"],{"06b9":function(e,t,n){"use strict";var c=n("69be"),o={ref:"box"},r=Object(c["createTextVNode"])("Soundcloud"),i=Object(c["createTextVNode"])("Audius"),a=Object(c["createTextVNode"])("Youtube Music"),l=Object(c["createTextVNode"])("Spotify");function s(e,t,n,s,d,u){var p=Object(c["resolveComponent"])("v-contextmenu-item"),f=Object(c["resolveComponent"])("v-contextmenu-submenu"),b=Object(c["resolveComponent"])("v-contextmenu"),h=Object(c["resolveDirective"])("contextmenu");return Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["renderSlot"])(e.$slots,"default"),Object(c["createVNode"])(b,{ref:"contextmenu"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(f,{title:"Search on"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(p,{onClick:u.openSoundcloud},{default:Object(c["withCtx"])((function(){return[r]})),_:1},8,["onClick"]),Object(c["createVNode"])(p,{onClick:u.openAudius},{default:Object(c["withCtx"])((function(){return[i]})),_:1},8,["onClick"]),Object(c["createVNode"])(p,{onClick:u.openYoutubeMusic},{default:Object(c["withCtx"])((function(){return[a]})),_:1},8,["onClick"]),Object(c["createVNode"])(p,{onClick:u.openSpotify},{default:Object(c["withCtx"])((function(){return[l]})),_:1},8,["onClick"])]})),_:1})]})),_:1},512)])),[[h,void 0,"contextmenu"]])}n("500c");var d={name:"FindSources",props:{artist:String,title:String},methods:{hide:function(){this.$refs.contextmenu.hide()},show:function(e){var t=this.$refs.box.getBoundingClientRect(),n={top:t.height+t.top+window.scrollY,left:t.width+t.left+window.scrollX};this.$refs.contextmenu.show(n),null===e||void 0===e||e.stopPropagation()},openSoundcloud:function(){window.open("https://soundcloud.com/search?q=".concat(this.artist," ").concat(this.title))},openAudius:function(){window.open("https://audius.co/search/".concat(this.artist," ").concat(this.title))},openYoutubeMusic:function(){window.open("https://music.youtube.com/search?q=".concat(this.artist," ").concat(this.title))},openSpotify:function(){window.open("https://open.spotify.com/search/".concat(this.artist," ").concat(this.title))}}},u=n("1c27"),p=n.n(u);const f=p()(d,[["render",s]]);t["a"]=f},"0e37":function(e,t,n){"use strict";var c=n("fcf6"),o=n("edd6"),r=n("23ae"),i=n("9a1e"),a=n("117f"),l=n("572d"),s=n("809c"),d=n("ff59"),u=n("d95e"),p=n("8c1c"),f=n("03b9"),b=n("9be3"),h=n("c30e"),m=n("ab4b"),v=n("4a04"),j=n("9c06"),O=j("replace"),y=Math.max,g=Math.min,N=r([].concat),V=r([].push),w=r("".indexOf),k=r("".slice),E=function(e){return void 0===e?e:String(e)},S=function(){return"$0"==="a".replace(/./,"$0")}(),x=function(){return!!/./[O]&&""===/./[O]("a","$0")}(),C=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));i("replace",(function(e,t,n){var r=x?"$":"$0";return[function(e,n){var c=f(this),r=void 0==e?void 0:h(e,O);return r?o(r,e,c,n):o(t,p(c),e,n)},function(e,o){var i=l(this),a=p(e);if("string"==typeof o&&-1===w(o,r)&&-1===w(o,"$<")){var f=n(t,i,a,o);if(f.done)return f.value}var h=s(o);h||(o=p(o));var j=i.global;if(j){var O=i.unicode;i.lastIndex=0}var S=[];while(1){var x=v(i,a);if(null===x)break;if(V(S,x),!j)break;var C=p(x[0]);""===C&&(i.lastIndex=b(a,u(i.lastIndex),O))}for(var A="",$=0,B=0;B<S.length;B++){x=S[B];for(var T=p(x[0]),M=y(g(d(x.index),a.length),0),I=[],P=1;P<x.length;P++)V(I,E(x[P]));var _=x.groups;if(h){var D=N([T],I,M,a);void 0!==_&&V(D,_);var U=p(c(o,void 0,D))}else U=m(T,a,M,I,_,o);M>=$&&(A+=k(a,$,M)+U,$=M+T.length)}return A+k(a,$)}]}),!C||!S||x)},"34be":function(e,t,n){},"5c98":function(e,t,n){},"5ef9":function(e,t,n){"use strict";n("34be")},"68ca":function(e,t,n){},"7c07":function(e,t,n){"use strict";n("ed98");var c=n("69be"),o=function(e){return Object(c["pushScopeId"])("data-v-a8b5862e"),e=e(),Object(c["popScopeId"])(),e},r={class:"wrapper"},i={class:"header"},a=o((function(){return Object(c["createElementVNode"])("h3",null,"Add album",-1)})),l=o((function(){return Object(c["createElementVNode"])("span",{class:"material-icons-round"}," close ",-1)})),s=[l],d=o((function(){return Object(c["createElementVNode"])("h4",null,"To Playlist",-1)})),u=o((function(){return Object(c["createElementVNode"])("br",null,null,-1)})),p={key:0},f=o((function(){return Object(c["createElementVNode"])("h4",null,"Source",-1)})),b={class:"content"},h=o((function(){return Object(c["createElementVNode"])("h4",null,"Title",-1)})),m={class:"content"},v=o((function(){return Object(c["createElementVNode"])("h4",null,"Album",-1)})),j={class:"content"},O=o((function(){return Object(c["createElementVNode"])("h4",null,"Artist",-1)})),y={class:"content"},g=o((function(){return Object(c["createElementVNode"])("h4",null,"Cover",-1)})),N={class:"content"},V=["src"],w={class:"confirm"},k={key:1},E=["src"],S={class:"details"},x={class:"detailswrapper"},C=Object(c["createTextVNode"])("Album"),A=o((function(){return Object(c["createElementVNode"])("hr",null,null,-1)})),$=o((function(){return Object(c["createElementVNode"])("hr",null,null,-1)})),B={class:"confirm"};function T(e,t,n,o,l,T){var M=Object(c["resolveComponent"])("FindSources"),I=Object(c["resolveComponent"])("h7"),P=Object(c["resolveComponent"])("album-header"),_=Object(c["resolveComponent"])("album-entry"),D=Object(c["resolveComponent"])("vue-final-modal"),U=Object(c["resolveDirective"])("observe-visibility");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(D,{onClick:e.hideFindSourcesCtx,modelValue:l.showModal,"onUpdate:modelValue":t[13]||(t[13]=function(e){return l.showModal=e}),classes:"modal-containerr","content-class":"addAlbumToPlaylistPopup"},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("div",i,[a,Object(c["createElementVNode"])("button",{class:"modal-close",onClick:t[0]||(t[0]=function(){return T.close&&T.close.apply(T,arguments)})},s)]),d,Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.selectedPlaylist=e})},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(l.playlists,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{key:e},Object(c["toDisplayString"])(e),1)})),128))],512),[[c["vModelSelect"],l.selectedPlaylist]]),u,l.editSong?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",p,[f,Object(c["createVNode"])(M,{ref:"findSources",title:n.title,artist:n.artist},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",b,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.dSource=t}),ref:"source"},null,512),[[c["vModelText"],e.dSource]]),Object(c["createElementVNode"])("span",{class:"material-icons-round more",ref:"sourceMore",onClick:t[3]||(t[3]=function(){return e.opencontextmenu&&e.opencontextmenu.apply(e,arguments)})},"more_vert",512)])]})),_:1},8,["title","artist"]),h,Object(c["createElementVNode"])("div",m,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.dTitle=t}),type:"text"},null,512),[[c["vModelText"],e.dTitle]])]),v,Object(c["createElementVNode"])("div",j,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.dAlbum=t}),type:"text",ref:"album"},null,512),[[c["vModelText"],e.dAlbum]])]),O,Object(c["createElementVNode"])("div",y,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.dArtist=t}),type:"text"},null,512),[[c["vModelText"],e.dArtist]])]),g,Object(c["createElementVNode"])("div",N,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"addSong cover","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.dCover=t}),ref:"cover"},null,512),[[c["vModelText"],e.dCover]]),Object(c["createElementVNode"])("img",{onClick:t[8]||(t[8]=function(){return T.openInNewTab&&T.openInNewTab.apply(T,arguments)}),class:"addSong cover",src:e.dCover?e.dCover:"/assets/img/music_placeholder.png"},null,8,V)]),Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("button",{onClick:t[9]||(t[9]=function(){return T.add&&T.add.apply(T,arguments)}),class:"negative"},"Add")])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",k,[Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"padding-20 playlisteditor",onClick:t[11]||(t[11]=function(){return e.editPlaylist&&e.editPlaylist.apply(e,arguments)})},[Object(c["createElementVNode"])("img",{class:"cover",src:n.cover},null,8,E),Object(c["createElementVNode"])("div",S,[Object(c["createElementVNode"])("div",x,[Object(c["createVNode"])(I,null,{default:Object(c["withCtx"])((function(){return[C]})),_:1}),Object(c["createElementVNode"])("span",{class:"material-icons-round share",onClick:t[10]||(t[10]=function(){return T.share&&T.share.apply(T,arguments)})},"share")]),Object(c["createElementVNode"])("h1",null,Object(c["toDisplayString"])(n.title),1),Object(c["createElementVNode"])("h5",null,Object(c["toDisplayString"])(n.artist),1)])])),[[U,e.headerVisibilityChanged]]),A,Object(c["createVNode"])(P),$,(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(l.playlist,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(_,{onAdd:T.add,key:t,added:e.added,index:t,cover:e.cover,artist:e.artists.join(", "),title:e.title,source:e.source,preview:e.preview},null,8,["onAdd","added","index","cover","artist","title","source","preview"])})),128))])),Object(c["createElementVNode"])("div",B,[Object(c["createElementVNode"])("button",{onClick:t[12]||(t[12]=function(){return T.addAll&&T.addAll.apply(T,arguments)}),class:"negative"},"Add All")])])]})),_:1},8,["onClick","modelValue"])])}var M=n("e599"),I=(n("3efd"),n("f258"),n("867d"),{class:"track"}),P={class:"trackwrapper"};function _(e,t,n,o,r,i){var a=Object(c["resolveComponent"])("mini-player");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{onDblclick:t[2]||(t[2]=function(){i.playAt(),i.onselect()}),onClick:t[3]||(t[3]=function(){return i.onselect&&i.onselect.apply(i,arguments)}),onMouseover:t[4]||(t[4]=function(e){return r.hovering=!0}),onMouseleave:t[5]||(t[5]=function(e){return r.hovering=!1}),class:Object(c["normalizeClass"])(["playlistEntry",{selected:r.highlighted}])},[Object(c["createVNode"])(a,{class:Object(c["normalizeClass"])(["miniPlayer",{hidden:!r.hovering}]),src:n.preview},null,8,["class","src"]),r.hovering?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:0,onClick:t[0]||(t[0]=function(){return e.edit&&e.edit.apply(e,arguments)}),class:"id"},Object(c["toDisplayString"])(n.index+1),1)),Object(c["createElementVNode"])("div",I,[Object(c["createElementVNode"])("div",P,[Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["title",{playing:e.playing}])},Object(c["toDisplayString"])(n.title),3),Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["artist",{playing:e.playing}])},Object(c["toDisplayString"])(n.artist),3)])]),Object(c["createElementVNode"])("span",{onClick:t[1]||(t[1]=function(){return i.add&&i.add.apply(i,arguments)}),class:"material-icons-round edit",ref:"add"},"add",512)],34)}n("dfac");var D=n("cb9b"),U={components:{MiniPlayer:D["a"]},name:"AlbumEntry",props:{index:Number,id:Number,source:String,artist:{type:String,default:"N/A"},title:{type:String,default:"N/A"},added:Boolean,preview:String},data:function(){return{highlighted:!1,favourited:this.favourite,isAutoPlaylist:"/collection/tracks"==this.$route.path,hovering:!1}},methods:{remove:function(){fetch("http://localhost:1234/api/remove",{method:"POST",body:JSON.stringify({playlistId:Number(this.$route.params.id),songId:this.id})})},onselect:function(){this.highlighted=!this.highlighted},playAt:function(){this.$emit("edit",this.index)},add:function(){console.log("add"),this.$emit("add",this.index)}},watch:{added:function(){console.log("change"),this.$refs.add.innerHTML=this.added?"done":"add"}}},F=(n("c1af"),n("1c27")),J=n.n(F);const z=J()(U,[["render",_],["__scopeId","data-v-512245bc"]]);var H=z,Y=function(e){return Object(c["pushScopeId"])("data-v-a99c9dc4"),e=e(),Object(c["popScopeId"])(),e},L={class:"gridHeader"},q=Y((function(){return Object(c["createElementVNode"])("span",{class:"id"},"#",-1)})),R=Y((function(){return Object(c["createElementVNode"])("span",{class:"title"},"Title",-1)})),X=[q,R];function G(e,t,n,o,r,i){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",L,X)}var K={name:"AlbumHeader"};n("886e");const Q=J()(K,[["render",G],["__scopeId","data-v-a99c9dc4"]]);var W=Q,Z=n("06b9"),ee={name:"AddAlbumToPlaylist",components:{FindSources:Z["a"],AlbumEntry:H,AlbumHeader:W},props:{cover:String,artist:String,title:String,href:String,id:String},data:function(){return{showModal:!1,playlists:[],selectedPlaylist:-1,playlist:[],editSong:!1}},methods:{share:function(){window.open(this.href)},close:function(){this.showModal=!1,this.$emit("close")},loadMetadata:function(){var e=this;fetch("http://localhost:1234/api/metadata",{method:"POST",body:JSON.stringify({url:this.$refs.source.value})}).then((function(e){return e.json()})).then((function(t){console.log(t),e.dTitle=t.title,e.$refs.album.value=t.album,e.dArtist=t.artists.join(", "),e.dCover=t.cover,e.$refs.source.value=t.src}))},openInNewTab:function(){window.open(this.cover?this.cover:"/assets/img/music_placeholder.png")},addAll:function(){for(var e=0;e<this.playlist.length;e++)this.add(e)},add:function(e){var t=this,n=this.playlist[e],c=this.playlists.findIndex((function(e){return e==t.selectedPlaylist}));console.log(n,c),c<0?alert("no playlist selected"):fetch("http://localhost:1234/api/add",{method:"POST",body:JSON.stringify({id:c,source:n.src,title:n.title,artist:n.artists.join(", "),album:this.title,cover:this.cover})}).then((function(e){200==e.status&&(n.added=!0)}))}},watch:{dSource:function(){this.loadMetadata()},showModal:function(){var e=this;this.showModal&&(fetch("http://localhost:1234/api/playlists").then((function(e){return e.json()})).then((function(t){var n;e.playlists.length=0,(n=e.playlists).push.apply(n,Object(M["a"])(t))})),fetch("http://localhost:1234/api/spotify/album",{method:"POST",body:JSON.stringify({albumId:this.id})}).then((function(e){return e.json()})).then((function(t){var n;e.playlist.length=0,(n=e.playlist).push.apply(n,Object(M["a"])(t))})))}}};n("5ef9"),n("d78c");const te=J()(ee,[["render",T],["__scopeId","data-v-a8b5862e"]]);t["a"]=te},"867d":function(e,t,n){"use strict";var c=n("e6df"),o=n("fe06").findIndex,r=n("513e"),i="findIndex",a=!0;i in[]&&Array(1)[i]((function(){a=!1})),c({target:"Array",proto:!0,forced:a},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r(i)},"886e":function(e,t,n){"use strict";n("5c98")},a503:function(e,t,n){},ab4b:function(e,t,n){var c=n("23ae"),o=n("2841"),r=Math.floor,i=c("".charAt),a=c("".replace),l=c("".slice),s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,u,p){var f=n+e.length,b=c.length,h=d;return void 0!==u&&(u=o(u),h=s),a(p,h,(function(o,a){var s;switch(i(a,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,f);case"<":s=u[l(a,1,-1)];break;default:var d=+a;if(0===d)return o;if(d>b){var p=r(d/10);return 0===p?o:p<=b?void 0===c[p-1]?i(a,1):c[p-1]+i(a,1):o}s=c[d-1]}return void 0===s?"":s}))}},c0b8:function(e,t,n){"use strict";var c=n("117f");e.exports=function(e,t){var n=[][e];return!!n&&c((function(){n.call(null,t||function(){throw 1},1)}))}},c1af:function(e,t,n){"use strict";n("ebe2")},cb9b:function(e,t,n){"use strict";var c=n("69be"),o={class:"miniPlayer"},r=["src"];function i(e,t,n,i,a,l){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createElementVNode"])("audio",{src:n.src,ref:"player"},null,8,r),n.display?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:0,onClick:t[0]||(t[0]=function(){return l.playPause&&l.playPause.apply(l,arguments)}),class:"material-icons-round circle"},Object(c["toDisplayString"])(a.playing?"pause":"play_arrow"),1)):Object(c["createCommentVNode"])("",!0)])}n("3efd");var a={name:"MiniPlayer",props:{src:String,display:{type:Boolean,default:!0}},data:function(){return{playing:!1}},methods:{get:function(e){fetch("http://localhost:1234/api/".concat(e))},pause:function(){this.get("pause")},play:function(){this.get("play")},playPause:function(){var e=this;this.$refs.player.onended||(this.$refs.player.onended=function(){e.playing=!1}),window.player=this.$refs.player,this.playing=this.$refs.player.paused,this.$refs.player.paused?(this.pause(),this.$refs.player.play()):this.$refs.player.pause()}}},l=(n("e383"),n("1c27")),s=n.n(l);const d=s()(a,[["render",i],["__scopeId","data-v-ef9941c4"]]);t["a"]=d},d78c:function(e,t,n){"use strict";n("68ca")},e383:function(e,t,n){"use strict";n("a503")},e599:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n("73c1");function o(e){if(Array.isArray(e))return Object(c["a"])(e)}n("4228"),n("526b"),n("3efd"),n("5b8c"),n("2670"),n("324c"),n("5eca");function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var i=n("4e3d");function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return o(e)||r(e)||Object(i["a"])(e)||a()}},ebe2:function(e,t,n){},ed98:function(e,t,n){"use strict";var c=n("e6df"),o=n("23ae"),r=n("00d8"),i=n("4deb"),a=n("c0b8"),l=o([].join),s=r!=Object,d=a("join",",");c({target:"Array",proto:!0,forced:s||!d},{join:function(e){return l(i(this),void 0===e?",":e)}})}}]);
//# sourceMappingURL=home~playlists~releases~search.8a152654.js.map