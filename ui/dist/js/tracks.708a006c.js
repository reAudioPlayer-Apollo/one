(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tracks"],{"093b":function(e,t,n){"use strict";n.r(t);var i=n("69be"),a=function(e){return Object(i["pushScopeId"])("data-v-9670632e"),e=e(),Object(i["popScopeId"])(),e},o={class:"playlist"},l={class:"padding-20"},c=Object(i["createTextVNode"])("Playlist"),r=a((function(){return Object(i["createElementVNode"])("h5",null,"My Description",-1)})),s=a((function(){return Object(i["createElementVNode"])("hr",null,null,-1)})),d={class:"padding-20"},u={class:"grid"},p=a((function(){return Object(i["createElementVNode"])("hr",null,null,-1)})),f={class:"playlistEntries"};function b(e,t,n,a,b,h){var y=Object(i["resolveComponent"])("fixed-playlist-header"),m=Object(i["resolveComponent"])("h7"),v=Object(i["resolveComponent"])("grid-header"),O=Object(i["resolveComponent"])("playlist-entry"),j=Object(i["resolveDirective"])("observe-visibility");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",o,[Object(i["createVNode"])(y,{onClick:h.loadPlaylist,ref:"fixedHeading",class:Object(i["normalizeClass"])({hidden:b.fixedHeaderHidden}),title:b.playlistName},null,8,["onClick","class","title"]),Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createElementBlock"])("div",l,[Object(i["createVNode"])(m,null,{default:Object(i["withCtx"])((function(){return[c]})),_:1}),Object(i["createElementVNode"])("h1",null,Object(i["toDisplayString"])(b.playlistName),1),r])),[[j,h.headerVisibilityChanged]]),s,Object(i["createElementVNode"])("div",d,[Object(i["createElementVNode"])("span",{id:"loadPlaylist",onClick:t[0]||(t[0]=function(){return h.loadPlaylist&&h.loadPlaylist.apply(h,arguments)}),class:"material-icons-outlined"},"play_circle_filled"),Object(i["createElementVNode"])("div",u,[Object(i["createVNode"])(v),p,Object(i["createElementVNode"])("div",f,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(b.playlist,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(O,{key:t,index:t,source:e.source,id:e.id,title:e.title,playing:e.playing,album:e.album,artist:e.artist,cover:e.cover,favourite:e.favourite,duration:e.duration},null,8,["index","source","id","title","playing","album","artist","cover","favourite","duration"])})),128))])])])])}var h=n("1494"),y=(n("3efd"),n("a15b"),n("f258"),n("c988")),m=n("8ed2"),v=n("dcbb"),O={components:{PlaylistEntry:v["a"],FixedPlaylistHeader:y["a"],GridHeader:m["a"]},name:"Tracks",data:function(){return this.updateTracks(),{fixedHeaderHidden:!0,playlist:[],playlistName:"N/A"}},methods:{connect:function(){var e=this;console.log("attempting reconnect");var t=new WebSocket("ws://localhost:1234/ws");t.onclose=function(){console.log("ws closed"),setTimeout(this.connect,1e3)},t.onopen=function(){console.log("ws connected")},t.onmessage=function(t){var n=JSON.parse(t.data);e.updateData(n)}},updateData:function(e){if("player.song"==e.path){var t,n,i=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.title)||"N/A",a=Object(h["a"])(this.playlist);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.playing=o.title==i}}catch(l){a.e(l)}finally{a.f()}}},headerVisibilityChanged:function(e){this.fixedHeaderHidden=e},updateTracks:function(){var e=this;fetch("http://localhost:1234/api/collection/tracks").then((function(e){return e.json()})).then((function(t){e.playlist=t.songs,e.playlistName=t.name,console.log(e.playlist),e.connect()}))},loadPlaylist:function(){fetch("http://localhost:1234/api/loadPlaylist",{method:"POST",body:JSON.stringify({type:"collection"})})}}},j=(n("442d"),n("1c27")),g=n.n(j);const N=g()(O,[["render",b],["__scopeId","data-v-9670632e"]]);t["default"]=N},1273:function(e,t,n){"use strict";n("c178")},1494:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("4228"),n("526b"),n("3efd"),n("5b8c"),n("2670"),n("324c");var i=n("4e3d");function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(i["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){r=!0,l=e},f:function(){try{c||null==n["return"]||n["return"]()}finally{if(r)throw l}}}}},2554:function(e,t,n){"use strict";n("b899")},"442d":function(e,t,n){"use strict";n("a2ab")},"73aa":function(e,t,n){},"83db":function(e,t,n){"use strict";n("73aa")},"8ed2":function(e,t,n){"use strict";var i=n("69be"),a=function(e){return Object(i["pushScopeId"])("data-v-3db22da6"),e=e(),Object(i["popScopeId"])(),e},o={class:"gridHeader"},l=a((function(){return Object(i["createElementVNode"])("span",{class:"id"},"#",-1)})),c=a((function(){return Object(i["createElementVNode"])("span",{class:"title"},"Title",-1)})),r=a((function(){return Object(i["createElementVNode"])("span",{class:"album"},"Album",-1)})),s=a((function(){return Object(i["createElementVNode"])("span",{class:"clock material-icons-round"},"schedule",-1)})),d=[l,c,r,s];function u(e,t,n,a,l,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",o,d)}var p={name:"GridHeader"},f=(n("83db"),n("1c27")),b=n.n(f);const h=b()(p,[["render",u],["__scopeId","data-v-3db22da6"]]);t["a"]=h},a2ab:function(e,t,n){},b899:function(e,t,n){},c178:function(e,t,n){},c988:function(e,t,n){"use strict";var i=n("69be"),a={class:"fixedPlaylistHeader"},o={class:"upperWrapper"};function l(e,t,n,l,c,r){var s=this,d=Object(i["resolveComponent"])("grid-header");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",a,[Object(i["createElementVNode"])("div",o,[Object(i["createElementVNode"])("span",{id:"loadPlaylist",onClick:t[0]||(t[0]=function(e){return s.$emit("loadPlaylist")}),class:"material-icons-outlined"},"play_circle_filled"),Object(i["createElementVNode"])("h3",null,Object(i["toDisplayString"])(n.title),1)]),Object(i["createVNode"])(d,{class:"padding-20 darkback"})])}var c=n("8ed2"),r={name:"FixedPlaylistHeader",components:{GridHeader:c["a"]},props:{title:String}},s=(n("2554"),n("1c27")),d=n.n(s);const u=d()(r,[["render",l],["__scopeId","data-v-5cba14e9"]]);t["a"]=u},dcbb:function(e,t,n){"use strict";var i=n("69be"),a={class:"track"},o=["src"],l={class:"trackwrapper"},c={class:"duration"};function r(e,t,n,r,s,d){var u=Object(i["resolveComponent"])("EditSong"),p=Object(i["resolveComponent"])("Marquee"),f=Object(i["resolveComponent"])("SongCtx");return Object(i["openBlock"])(),Object(i["createBlock"])(f,{onDownload:d.download,onAddto:d.addToPlaylist,onRemove:d.remove,onUpdate:d.update,onLike:t[7]||(t[7]=function(e){return s.favourited=!s.favourited}),isAutoPlaylist:s.isAutoPlaylist,liked:s.favourited,ref:"ctxMenu"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{onClose:e.updatePlaylist,ref:"editSongPopup",cover:n.cover,id:n.id,title:n.title,album:n.album,artist:n.artist,source:n.source},null,8,["onClose","cover","id","title","album","artist","source"]),Object(i["createElementVNode"])("div",{onDblclick:t[3]||(t[3]=function(){d.playAt(),d.onselect()}),onClick:t[4]||(t[4]=function(){return d.onselect&&d.onselect.apply(d,arguments)}),onMouseover:t[5]||(t[5]=function(){return d.displayPlay&&d.displayPlay.apply(d,arguments)}),onMouseleave:t[6]||(t[6]=function(){return d.displayId&&d.displayId.apply(d,arguments)}),class:Object(i["normalizeClass"])(["playlistEntry",{selected:s.highlighted}])},[Object(i["createElementVNode"])("span",{onClick:t[0]||(t[0]=function(){return d.playAt&&d.playAt.apply(d,arguments)}),ref:"idOrPlay",class:Object(i["normalizeClass"])([{playing:n.playing},"id"])},Object(i["toDisplayString"])(n.index+1),3),Object(i["createElementVNode"])("div",a,[Object(i["createElementVNode"])("img",{src:n.cover||"/assets/img/music_placeholder.png"},null,8,o),Object(i["createElementVNode"])("div",l,[Object(i["createElementVNode"])("span",{class:Object(i["normalizeClass"])(["title",{playing:n.playing}])},[Object(i["createVNode"])(p,{text:n.title},null,8,["text"])],2),Object(i["createElementVNode"])("span",{class:Object(i["normalizeClass"])(["artist",{playing:n.playing}])},[Object(i["createVNode"])(p,{text:n.artist},null,8,["text"])],2)])]),Object(i["createElementVNode"])("span",{class:Object(i["normalizeClass"])(["album",{playing:n.playing}])},[Object(i["createVNode"])(p,{text:n.album},null,8,["text"])],2),Object(i["createElementVNode"])("span",{onClick:t[1]||(t[1]=function(e){return s.favourited=!s.favourited}),class:Object(i["normalizeClass"])(["favourite material-icons-round",{showfavourite:s.favourited||s.highlighted}])},Object(i["toDisplayString"])(s.favourited?"favorite":"favorite_border"),3),Object(i["createElementVNode"])("span",c,Object(i["toDisplayString"])(n.duration),1),Object(i["createElementVNode"])("span",{onClick:t[2]||(t[2]=function(){return d.showCtxMenu&&d.showCtxMenu.apply(d,arguments)}),class:Object(i["normalizeClass"])(["more material-icons-round",{hidden:!s.highlighted}])},"more_horiz",2)],34)]})),_:1},8,["onDownload","onAddto","onRemove","onUpdate","isAutoPlaylist","liked"])}n("dfac"),n("3efd"),n("f258"),n("89b1"),n("1c6f");var s=n("a279"),d=n("d0cc"),u=n("5acf"),p={name:"PlaylistEntry",components:{SongCtx:s["a"],EditSong:u["a"],Marquee:d["a"]},props:{index:Number,id:Number,source:String,artist:{type:String,default:"N/A"},cover:{type:String,default:"/assets/img/music_placeholder.png"},title:{type:String,default:"N/A"},album:{type:String,default:"N/A"},duration:{type:String,default:"N/A"},favourite:{type:Boolean,default:!1},playing:{type:Boolean,default:!1}},data:function(){return{highlighted:!1,favourited:this.favourite,isAutoPlaylist:"/collection/tracks"==this.$route.path}},methods:{download:function(){this.$emit("download",this.index)},addToPlaylist:function(e){var t=this;fetch("http://localhost:1234/api/add",{method:"POST",body:JSON.stringify({id:e,source:this.source})}).then((function(e){200==e.status&&t.$emit("requestUpdate")}))},remove:function(){var e=this;fetch("http://localhost:1234/api/remove",{method:"POST",body:JSON.stringify({playlistId:Number(this.$route.params.id),songId:this.id})}).then((function(t){200==t.status&&e.$emit("requestUpdate")}))},update:function(){this.$refs.editSongPopup.showModal=!0},hideCtxMenu:function(){this.$refs.ctxMenu.hide()},showCtxMenu:function(e){console.log("show"),this.$refs.ctxMenu.show(e)},onselect:function(){this.highlighted=!this.highlighted,this.hideCtxMenu()},displayPlay:function(){var e=this.$refs.idOrPlay;e.innerHTML="play_arrow",e.classList.add("material-icons-round")},displayId:function(){var e=this.$refs.idOrPlay;e.innerHTML=this.index+1,e.classList.remove("material-icons-round")},playAt:function(){console.log(this.$route.path);var e={index:this.index};this.$route.path.includes("/playlist/")&&(e.playlistIndex=Number(this.$route.params.id)),this.$route.path.includes("/collection/tracks")&&(e.type="collection"),fetch("http://localhost:1234/api/at",{method:"POST",body:JSON.stringify(e)})},setFavourite:function(){fetch("http://localhost:1234/api/updateSong",{method:"POST",body:JSON.stringify({id:this.id,favourite:this.favourited,album:this.album,artist:this.artist,title:this.title,duration:this.duration,cover:this.cover,source:this.source})})}},watch:{favourited:function(){this.setFavourite()},favourite:function(){console.log("mounted",this.title,this.favourite,this.favourited),this.favourited=this.favourite,this.highlighted=!1}}},f=(n("1273"),n("1c27")),b=n.n(f);const h=b()(p,[["render",r],["__scopeId","data-v-64cbb25c"]]);t["a"]=h}}]);
//# sourceMappingURL=tracks.708a006c.js.map